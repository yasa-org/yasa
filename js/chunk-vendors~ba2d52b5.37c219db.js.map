{"version":3,"sources":["webpack:///./node_modules/monaco-editor/esm/vs/base/common/functional.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/assert.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/diff/diffChange.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/diff/diff.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/cancellation.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/event.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/extpath.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/insane/insane.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/history.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/codicons.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/async.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/decorators.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/htmlContent.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/filters.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/glob.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/idGenerator.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/collections.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/color.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/arrays.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/hash.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/actions.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/errors.js"],"names":["once","fn","result","_this","this","didCall","apply","arguments","ok","value","message","Error","DiffChange","originalStart","originalLength","modifiedStart","modifiedLength","prototype","getOriginalEnd","getModifiedEnd","StringDiffSequence","source","getElements","characters","Int32Array","length","i","len","charCodeAt","stringDiff","original","modified","pretty","ComputeDiff","changes","Debug","Assert","condition","MyArray","Copy","sourceArray","sourceIndex","destinationArray","destinationIndex","Copy2","DiffChangeHelper","m_changes","m_originalStart","m_modifiedStart","m_originalCount","m_modifiedCount","MarkNextChange","push","AddOriginalElement","originalIndex","modifiedIndex","Math","min","AddModifiedElement","getChanges","getReverseChanges","reverse","LcsDiff","originalSequence","modifiedSequence","continueProcessingPredicate","ContinueProcessingPredicate","_a","_getElements","originalStringElements","originalElementsOrHash","originalHasStrings","_b","modifiedStringElements","modifiedElementsOrHash","modifiedHasStrings","_hasStrings","_originalStringElements","_originalElementsOrHash","_modifiedStringElements","_modifiedElementsOrHash","m_forwardHistory","m_reverseHistory","_isStringArray","arr","sequence","elements","hashes","ElementsAreEqual","newIndex","OriginalElementsAreEqual","index1","index2","ModifiedElementsAreEqual","_ComputeDiff","originalEnd","modifiedEnd","quitEarlyArr","ComputeDiffRecursive","PrettifyChanges","quitEarly","midOriginalArr","midModifiedArr","ComputeRecursionPoint","midOriginal","midModified","leftChanges","rightChanges","ConcatenateChanges","WALKTRACE","diagonalForwardBase","diagonalForwardStart","diagonalForwardEnd","diagonalForwardOffset","diagonalReverseBase","diagonalReverseStart","diagonalReverseEnd","diagonalReverseOffset","forwardPoints","reversePoints","deltaIsEven","forwardChanges","reverseChanges","changeHelper","diagonalMin","diagonalMax","diagonalRelative","lastOriginalIndex","historyIndex","diagonal","originalStartPoint","modifiedStartPoint","lastForwardChange","max","maxDifferences","numDiagonals","delta","numDifferences","furthestOriginalIndex","furthestModifiedIndex","ClipDiagonalBound","tempOriginalIndex","abs","matchLengthOfLongest","temp","change","originalStop","modifiedStop","checkOriginal","checkModified","mergedChangeArr","ChangesOverlap","splice","prevChange","bestDelta","bestScore","_boundaryScore","score","_OriginalIsBoundary","index","test","_OriginalRegionIsBoundary","_ModifiedIsBoundary","_ModifiedRegionIsBoundary","originalScore","modifiedScore","left","right","Array","diagonalBaseIndex","diagonalsBelow","diagonalsAbove","diffEven","lowerBoundEven","upperBoundEven","CancellationToken","shortcutEvent","Object","freeze","callback","context","handle","setTimeout","bind","dispose","clearTimeout","isCancellationToken","thing","None","Cancelled","MutableToken","isCancellationRequested","onCancellationRequested","_isCancelled","_emitter","cancel","fire","undefined","defineProperty","get","enumerable","configurable","event","CancellationTokenSource","parent","_token","_parentListener","Event","__extends","extendStatics","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","create","listener","thisArgs","disposables","didFire","e","call","map","snapshot","forEach","each","filter","signal","any","events","_i","reduce","merge","initial","output","emitter","Emitter","onFirstListenerAdd","onLastListenerRemove","debounce","delay","leading","leakWarningThreshold","subscription","numDebouncedCalls","cur","_output","stopwatch","start","Date","getTime","_","latch","cache","firstCall","shouldEmit","buffer","nextTick","_buffer","slice","flush","onFirstListenerDidAdd","ChainableEvent","on","chain","fromNodeEventEmitter","eventName","id","args","removeListener","fromDOMEventEmitter","addEventListener","removeEventListener","fromPromise","promise","then","toPromise","Promise","c","_globalLeakWarningThreshold","LeakageMonitor","customThreshold","name","random","toString","_warnCountdown","_stacks","clear","check","listenerCount","threshold","Map","stack","split","join","count","set","topStack_1","topCount_1","console","warn","options","_disposed","_options","_leakageMon","_event","_listeners","firstListener","isEmpty","removeMonitor","remove","onListenerDidAdd","size","_noop","hasListeners","add","isArray","_deliveryQueue","iter","iterator","next","done","shift","event_1","PauseableEmitter","_super","_isPaused","_eventQueue","_mergeFn","pause","resume","toArray","EventMultiplexer","hook","unhook","idx","indexOf","r","EventBufferer","buffers","wrapEvent","bufferEvents","pop","Relay","listening","inputEvent","inputEventListener","toSlashes","osPath","replace","sep","isEqualOrParent","path","candidate","ignoreCase","separator","beginsWith","sepOffset","charAt","isWindowsDriveLetter","char0","__insane_func","n","t","o","f","require","u","a","code","exports","1","module","toMap","uris","2","defaults","allowedAttributes","iframe","img","allowedClasses","allowedSchemes","allowedTags","3","voids","4","assign","parser","sanitizer","insane","html","strict","configuration","handler","5","string","toLowerCase","6","assignment","item","key","7","he","lowercase","rstart","rend","rattrs","rtag","rtagend","createStack","lastItem","chars","last","parsePart","parseTag","same","substr","parseComment","parseEdge","parseEndTag","parseStartTag","parseTagDecode","regex","match","substring","comment","text","tag","tagName","rest","unary","attrs","low","attrReplacer","doubleQuotedValue","singleQuotedValue","unquotedValue","decode","pos","end","8","attributes","reset","out","parse","valid","classesOk","attrsOk","concat","lkey","isValidClass","className","trim","testUrl","encode","ignoring","ignore","keys","allowed","unignore","colon","questionmark","hash","some","matches","scheme","transformText","depth","9","escapes","unescapes","rescaped","runescaped","escapeHtmlChar","unescapeHtmlChar","escapeHtml","String","unescapeHtml","escape","unescape","version","10","list","asKey","accumulator","HistoryNavigator","history","limit","_initialize","_limit","_onChange","_history","delete","_navigator","previous","current","first","has","_reduceToLimit","_elements","data","Set","history_1","entry","escapeCodiconsRegex","escapeCodicons","escaped","markdownEscapedCodiconsRegex","markdownEscapeEscapedCodicons","renderCodiconsRegex","renderCodicons","codicon","animation","isThenable","obj","createCancelablePromise","thenable","token","resolve","reject","err","class_1","catch","finally","onfinally","raceCancellation","defaultValue","race","Delayer","defaultDelay","timeout","completionPromise","doResolve","doReject","task","trigger","cancelTimeout","task_1","isTriggered","millis","disposableTimeout","timer","promiseFactories","shouldStop","loop","factory","runWhenIdle","TimeoutTimer","runner","setIfNotSet","cancelAndSet","IntervalTimer","clearInterval","interval","setInterval","RunOnceScheduler","timeoutToken","timeoutHandler","onTimeout","isScheduled","schedule","doRun","requestIdleCallback","cancelIdleCallback","dummyIdle_1","didTimeout","timeRemaining","disposed","IdleValue","executor","_didRun","_executor","_value","_error","_handle","getValue","memoizeId","createMemoizer","memoizeKeyPrefix","self","target","descriptor","fnKey","memoizeKey","writable","getOwnPropertyNames","property","memoize","MarkdownString","isTrustedOrOptions","_isTrusted","_supportThemeIcons","isTrusted","supportThemeIcons","appendText","appendMarkdown","appendCodeblock","langId","isEmptyMarkdownString","oneOrMany","isMarkdownString","every","markedStringsEquals","markdownStringEqual","removeMarkdownEscapes","parseHrefAndDimensions","href","dimensions","splitted","s","parameters","heightFromParams","exec","widthFromParams","height","width","widthIsFinite","isFinite","parseInt","heightIsFinite","or","word","wordToMatchAgainst","matchesPrefix","_matchesPrefix","matchesContiguousSubString","matchesSubString","_matchesSubString","j","isLower","isUpper","isNumber","isWhitespace","wordSeparators","isAlphanumeric","head","tail","unshift","nextAnchor","camelCaseWord","_matchesCamelCase","nextUpperIndex","analyzeCamelCaseWord","upper","lower","alpha","numeric","upperPercent","lowerPercent","alphaPercent","numericPercent","isUpperCaseWord","analysis","isCamelCaseWord","isCamelCasePattern","whitespace","matchesCamelCase","fuzzyContiguousFilter","fuzzySeparateFilter","fuzzyRegExpCache","matchesFuzzy","enableSeparateSubstringMatching","regexp","RegExp","anyScore","pattern","lowPattern","_patternPos","lowWord","_wordPos","fuzzyScore","patternPos","_maxLen","wordPos","pow","createMatches","wordStart","res","initTable","table","row","thisRow","FuzzyScore","_table","_scores","_arrows","_debug","printTable","patternLen","wordLen","pad","ret","printTables","patternStart","log","isSeparatorAtPos","isWhitespaceAtPos","isUpperCaseAtPos","wordLow","isPatternInWord","patternLow","firstMatchCanBeWeak","column","_doScore","diag","top_1","_matchesCount","_topScore","_wordStart","_firstMatchCanBeWeak","_findAllMatches2","_topMatch2","isDefault","Default","total","lastMatched","simpleMatchCount","arrow","fuzzyScoreGracefulAggressive","fuzzyScoreWithPermutations","aggressive","top","tries","movingPatternPos","newPattern","nextTypoPermutation","swap1","swap2","GLOBSTAR","GLOB_SPLIT","PATH_REGEX","NO_PATH_REGEX","ALL_FORWARD_SLASHES","starsToRegExp","starCount","splitGlobAware","splitChar","segments","inBraces","inBrackets","curVal","pattern_1","char","parseRegExp","regEx","previousSegmentWasGlobStar_1","segment","braceVal","bracketVal","segment_1","choices","braceRegExp","T1","T2","T3","T3_2","T4","T5","CACHE","FALSE","NULL","parsePattern","arg1","patternKey","trimForExclusions","parsedPattern","wrapRelativePattern","base_1","basename","trivia2","trivia3","trivia4and5","toRegExp","arg2","base","originalPattern","slashBase","backslashBase","basenames","patterns","allBasenames","parsedPatterns","aggregateBasenameMatches","n_1","withBasenames","allPaths","all","matchPathEnds","nativePath","nativePathEnd","regExp_1","lastIndex","error","hasSibling","isRelativePattern","parsedPattern_1","resultPattern","parsedExpression","rp","expression","parseExpressionPattern","requiresSiblings","resultExpression_1","n_2","withBasenames_1","allPaths_1","resultExpression","n_3","when_1","when","clausePattern","matched","m","basenamePatterns","aggregate","ch","aggregatedPatterns","IdGenerator","prefix","_prefix","_lastId","nextId","defaultGenerator","values","from","_loop_1","state_1","SetMap","roundFloat","number","decimalPoints","decimal","round","RGBA","g","equals","HSLA","h","l","fromRGBA","rgba","chroma","_hue2rgb","q","toRGBA","hsla","HSVA","v","cmax","cmin","hsva","x","Color","arg","_hsla","_hsva","fromHex","hex","Format","CSS","parseHex","red","other","getRelativeLuminance","R","_relativeLuminanceForComponent","G","B","luminance","color","isLighter","yiq","isLighterThan","another","lum1","lum2","isDarkerThan","lighten","factor","darken","transparent","isTransparent","isOpaque","opposite","format","getLighterColor","of","relative","getDarkerColor","white","black","blue","cyan","lightgrey","formatRGB","formatRGBA","toFixed","formatHSL","formatHSLA","_toTwoDigitHex","formatHex","formatHexA","compact","_parseHexDigit","charCode","array","tail2","one","itemEquals","binarySearch","comparator","high","mid","comp","findFirstInSorted","floor","mergeSort","compare","_sort","_merge","lo","hi","aux","leftIdx","rightIdx","groupBy","currentGroup","element","coalesce","isFalsyOrEmpty","isNonEmptyArray","distinct","keyFn","position","seen","elem","distinctES6","fromSet","firstIndex","notFoundValue","firstOrDefault","flatten","range","to","arrayInsert","insertIndex","insertArr","before","after","pushToStart","pushToEnd","find","predicate","asArray","hashVal","numberHash","arrayHash","objectHash","stringHash","booleanHash","val","initialHashVal","length_1","sort","__awaiter","thisArg","_arguments","P","generator","adopt","fulfilled","step","rejected","__generator","body","y","label","sent","trys","ops","verb","Symbol","op","TypeError","Action","cssClass","enabled","actionCallback","_onDidChange","_register","onDidChange","_enabled","_checked","_id","_label","_cssClass","_actionCallback","_setLabel","_tooltip","_setTooltip","tooltip","_setClass","class","_setEnabled","_setChecked","checked","run","_data","ActionRunner","_onDidBeforeRun","onDidBeforeRun","_onDidRun","onDidRun","action","error_1","runAction","ErrorHandler","listeners","unexpectedErrorHandler","emit","onUnexpectedError","onUnexpectedExternalError","errorHandler","isPromiseCanceledError","transformErrorForSerialization","name_1","stacktrace","$isError","canceledName","canceled","illegalArgument","illegalState"],"mappings":"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","file":"js/chunk-vendors~ba2d52b5.37c219db.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport function once(fn) {\r\n    var _this = this;\r\n    var didCall = false;\r\n    var result;\r\n    return function () {\r\n        if (didCall) {\r\n            return result;\r\n        }\r\n        didCall = true;\r\n        result = fn.apply(_this, arguments);\r\n        return result;\r\n    };\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n/**\r\n * Throws an error with the provided message if the provided value does not evaluate to a true Javascript value.\r\n */\r\nexport function ok(value, message) {\r\n    if (!value) {\r\n        throw new Error(message ? 'Assertion failed (' + message + ')' : 'Assertion Failed');\r\n    }\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n/**\r\n * Represents information about a specific difference between two sequences.\r\n */\r\nvar DiffChange = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new DiffChange with the given sequence information\r\n     * and content.\r\n     */\r\n    function DiffChange(originalStart, originalLength, modifiedStart, modifiedLength) {\r\n        //Debug.Assert(originalLength > 0 || modifiedLength > 0, \"originalLength and modifiedLength cannot both be <= 0\");\r\n        this.originalStart = originalStart;\r\n        this.originalLength = originalLength;\r\n        this.modifiedStart = modifiedStart;\r\n        this.modifiedLength = modifiedLength;\r\n    }\r\n    /**\r\n     * The end point (exclusive) of the change in the original sequence.\r\n     */\r\n    DiffChange.prototype.getOriginalEnd = function () {\r\n        return this.originalStart + this.originalLength;\r\n    };\r\n    /**\r\n     * The end point (exclusive) of the change in the modified sequence.\r\n     */\r\n    DiffChange.prototype.getModifiedEnd = function () {\r\n        return this.modifiedStart + this.modifiedLength;\r\n    };\r\n    return DiffChange;\r\n}());\r\nexport { DiffChange };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { DiffChange } from './diffChange.js';\r\nimport { stringHash } from '../hash.js';\r\nvar StringDiffSequence = /** @class */ (function () {\r\n    function StringDiffSequence(source) {\r\n        this.source = source;\r\n    }\r\n    StringDiffSequence.prototype.getElements = function () {\r\n        var source = this.source;\r\n        var characters = new Int32Array(source.length);\r\n        for (var i = 0, len = source.length; i < len; i++) {\r\n            characters[i] = source.charCodeAt(i);\r\n        }\r\n        return characters;\r\n    };\r\n    return StringDiffSequence;\r\n}());\r\nexport { StringDiffSequence };\r\nexport function stringDiff(original, modified, pretty) {\r\n    return new LcsDiff(new StringDiffSequence(original), new StringDiffSequence(modified)).ComputeDiff(pretty).changes;\r\n}\r\n//\r\n// The code below has been ported from a C# implementation in VS\r\n//\r\nvar Debug = /** @class */ (function () {\r\n    function Debug() {\r\n    }\r\n    Debug.Assert = function (condition, message) {\r\n        if (!condition) {\r\n            throw new Error(message);\r\n        }\r\n    };\r\n    return Debug;\r\n}());\r\nexport { Debug };\r\nvar MyArray = /** @class */ (function () {\r\n    function MyArray() {\r\n    }\r\n    /**\r\n     * Copies a range of elements from an Array starting at the specified source index and pastes\r\n     * them to another Array starting at the specified destination index. The length and the indexes\r\n     * are specified as 64-bit integers.\r\n     * sourceArray:\r\n     *\t\tThe Array that contains the data to copy.\r\n     * sourceIndex:\r\n     *\t\tA 64-bit integer that represents the index in the sourceArray at which copying begins.\r\n     * destinationArray:\r\n     *\t\tThe Array that receives the data.\r\n     * destinationIndex:\r\n     *\t\tA 64-bit integer that represents the index in the destinationArray at which storing begins.\r\n     * length:\r\n     *\t\tA 64-bit integer that represents the number of elements to copy.\r\n     */\r\n    MyArray.Copy = function (sourceArray, sourceIndex, destinationArray, destinationIndex, length) {\r\n        for (var i = 0; i < length; i++) {\r\n            destinationArray[destinationIndex + i] = sourceArray[sourceIndex + i];\r\n        }\r\n    };\r\n    MyArray.Copy2 = function (sourceArray, sourceIndex, destinationArray, destinationIndex, length) {\r\n        for (var i = 0; i < length; i++) {\r\n            destinationArray[destinationIndex + i] = sourceArray[sourceIndex + i];\r\n        }\r\n    };\r\n    return MyArray;\r\n}());\r\nexport { MyArray };\r\n/**\r\n * A utility class which helps to create the set of DiffChanges from\r\n * a difference operation. This class accepts original DiffElements and\r\n * modified DiffElements that are involved in a particular change. The\r\n * MarktNextChange() method can be called to mark the separation between\r\n * distinct changes. At the end, the Changes property can be called to retrieve\r\n * the constructed changes.\r\n */\r\nvar DiffChangeHelper = /** @class */ (function () {\r\n    /**\r\n     * Constructs a new DiffChangeHelper for the given DiffSequences.\r\n     */\r\n    function DiffChangeHelper() {\r\n        this.m_changes = [];\r\n        this.m_originalStart = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\r\n        this.m_modifiedStart = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\r\n        this.m_originalCount = 0;\r\n        this.m_modifiedCount = 0;\r\n    }\r\n    /**\r\n     * Marks the beginning of the next change in the set of differences.\r\n     */\r\n    DiffChangeHelper.prototype.MarkNextChange = function () {\r\n        // Only add to the list if there is something to add\r\n        if (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\r\n            // Add the new change to our list\r\n            this.m_changes.push(new DiffChange(this.m_originalStart, this.m_originalCount, this.m_modifiedStart, this.m_modifiedCount));\r\n        }\r\n        // Reset for the next change\r\n        this.m_originalCount = 0;\r\n        this.m_modifiedCount = 0;\r\n        this.m_originalStart = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\r\n        this.m_modifiedStart = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\r\n    };\r\n    /**\r\n     * Adds the original element at the given position to the elements\r\n     * affected by the current change. The modified index gives context\r\n     * to the change position with respect to the original sequence.\r\n     * @param originalIndex The index of the original element to add.\r\n     * @param modifiedIndex The index of the modified element that provides corresponding position in the modified sequence.\r\n     */\r\n    DiffChangeHelper.prototype.AddOriginalElement = function (originalIndex, modifiedIndex) {\r\n        // The 'true' start index is the smallest of the ones we've seen\r\n        this.m_originalStart = Math.min(this.m_originalStart, originalIndex);\r\n        this.m_modifiedStart = Math.min(this.m_modifiedStart, modifiedIndex);\r\n        this.m_originalCount++;\r\n    };\r\n    /**\r\n     * Adds the modified element at the given position to the elements\r\n     * affected by the current change. The original index gives context\r\n     * to the change position with respect to the modified sequence.\r\n     * @param originalIndex The index of the original element that provides corresponding position in the original sequence.\r\n     * @param modifiedIndex The index of the modified element to add.\r\n     */\r\n    DiffChangeHelper.prototype.AddModifiedElement = function (originalIndex, modifiedIndex) {\r\n        // The 'true' start index is the smallest of the ones we've seen\r\n        this.m_originalStart = Math.min(this.m_originalStart, originalIndex);\r\n        this.m_modifiedStart = Math.min(this.m_modifiedStart, modifiedIndex);\r\n        this.m_modifiedCount++;\r\n    };\r\n    /**\r\n     * Retrieves all of the changes marked by the class.\r\n     */\r\n    DiffChangeHelper.prototype.getChanges = function () {\r\n        if (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\r\n            // Finish up on whatever is left\r\n            this.MarkNextChange();\r\n        }\r\n        return this.m_changes;\r\n    };\r\n    /**\r\n     * Retrieves all of the changes marked by the class in the reverse order\r\n     */\r\n    DiffChangeHelper.prototype.getReverseChanges = function () {\r\n        if (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\r\n            // Finish up on whatever is left\r\n            this.MarkNextChange();\r\n        }\r\n        this.m_changes.reverse();\r\n        return this.m_changes;\r\n    };\r\n    return DiffChangeHelper;\r\n}());\r\n/**\r\n * An implementation of the difference algorithm described in\r\n * \"An O(ND) Difference Algorithm and its variations\" by Eugene W. Myers\r\n */\r\nvar LcsDiff = /** @class */ (function () {\r\n    /**\r\n     * Constructs the DiffFinder\r\n     */\r\n    function LcsDiff(originalSequence, modifiedSequence, continueProcessingPredicate) {\r\n        if (continueProcessingPredicate === void 0) { continueProcessingPredicate = null; }\r\n        this.ContinueProcessingPredicate = continueProcessingPredicate;\r\n        var _a = LcsDiff._getElements(originalSequence), originalStringElements = _a[0], originalElementsOrHash = _a[1], originalHasStrings = _a[2];\r\n        var _b = LcsDiff._getElements(modifiedSequence), modifiedStringElements = _b[0], modifiedElementsOrHash = _b[1], modifiedHasStrings = _b[2];\r\n        this._hasStrings = (originalHasStrings && modifiedHasStrings);\r\n        this._originalStringElements = originalStringElements;\r\n        this._originalElementsOrHash = originalElementsOrHash;\r\n        this._modifiedStringElements = modifiedStringElements;\r\n        this._modifiedElementsOrHash = modifiedElementsOrHash;\r\n        this.m_forwardHistory = [];\r\n        this.m_reverseHistory = [];\r\n    }\r\n    LcsDiff._isStringArray = function (arr) {\r\n        return (arr.length > 0 && typeof arr[0] === 'string');\r\n    };\r\n    LcsDiff._getElements = function (sequence) {\r\n        var elements = sequence.getElements();\r\n        if (LcsDiff._isStringArray(elements)) {\r\n            var hashes = new Int32Array(elements.length);\r\n            for (var i = 0, len = elements.length; i < len; i++) {\r\n                hashes[i] = stringHash(elements[i], 0);\r\n            }\r\n            return [elements, hashes, true];\r\n        }\r\n        if (elements instanceof Int32Array) {\r\n            return [[], elements, false];\r\n        }\r\n        return [[], new Int32Array(elements), false];\r\n    };\r\n    LcsDiff.prototype.ElementsAreEqual = function (originalIndex, newIndex) {\r\n        if (this._originalElementsOrHash[originalIndex] !== this._modifiedElementsOrHash[newIndex]) {\r\n            return false;\r\n        }\r\n        return (this._hasStrings ? this._originalStringElements[originalIndex] === this._modifiedStringElements[newIndex] : true);\r\n    };\r\n    LcsDiff.prototype.OriginalElementsAreEqual = function (index1, index2) {\r\n        if (this._originalElementsOrHash[index1] !== this._originalElementsOrHash[index2]) {\r\n            return false;\r\n        }\r\n        return (this._hasStrings ? this._originalStringElements[index1] === this._originalStringElements[index2] : true);\r\n    };\r\n    LcsDiff.prototype.ModifiedElementsAreEqual = function (index1, index2) {\r\n        if (this._modifiedElementsOrHash[index1] !== this._modifiedElementsOrHash[index2]) {\r\n            return false;\r\n        }\r\n        return (this._hasStrings ? this._modifiedStringElements[index1] === this._modifiedStringElements[index2] : true);\r\n    };\r\n    LcsDiff.prototype.ComputeDiff = function (pretty) {\r\n        return this._ComputeDiff(0, this._originalElementsOrHash.length - 1, 0, this._modifiedElementsOrHash.length - 1, pretty);\r\n    };\r\n    /**\r\n     * Computes the differences between the original and modified input\r\n     * sequences on the bounded range.\r\n     * @returns An array of the differences between the two input sequences.\r\n     */\r\n    LcsDiff.prototype._ComputeDiff = function (originalStart, originalEnd, modifiedStart, modifiedEnd, pretty) {\r\n        var quitEarlyArr = [false];\r\n        var changes = this.ComputeDiffRecursive(originalStart, originalEnd, modifiedStart, modifiedEnd, quitEarlyArr);\r\n        if (pretty) {\r\n            // We have to clean up the computed diff to be more intuitive\r\n            // but it turns out this cannot be done correctly until the entire set\r\n            // of diffs have been computed\r\n            changes = this.PrettifyChanges(changes);\r\n        }\r\n        return {\r\n            quitEarly: quitEarlyArr[0],\r\n            changes: changes\r\n        };\r\n    };\r\n    /**\r\n     * Private helper method which computes the differences on the bounded range\r\n     * recursively.\r\n     * @returns An array of the differences between the two input sequences.\r\n     */\r\n    LcsDiff.prototype.ComputeDiffRecursive = function (originalStart, originalEnd, modifiedStart, modifiedEnd, quitEarlyArr) {\r\n        quitEarlyArr[0] = false;\r\n        // Find the start of the differences\r\n        while (originalStart <= originalEnd && modifiedStart <= modifiedEnd && this.ElementsAreEqual(originalStart, modifiedStart)) {\r\n            originalStart++;\r\n            modifiedStart++;\r\n        }\r\n        // Find the end of the differences\r\n        while (originalEnd >= originalStart && modifiedEnd >= modifiedStart && this.ElementsAreEqual(originalEnd, modifiedEnd)) {\r\n            originalEnd--;\r\n            modifiedEnd--;\r\n        }\r\n        // In the special case where we either have all insertions or all deletions or the sequences are identical\r\n        if (originalStart > originalEnd || modifiedStart > modifiedEnd) {\r\n            var changes = void 0;\r\n            if (modifiedStart <= modifiedEnd) {\r\n                Debug.Assert(originalStart === originalEnd + 1, 'originalStart should only be one more than originalEnd');\r\n                // All insertions\r\n                changes = [\r\n                    new DiffChange(originalStart, 0, modifiedStart, modifiedEnd - modifiedStart + 1)\r\n                ];\r\n            }\r\n            else if (originalStart <= originalEnd) {\r\n                Debug.Assert(modifiedStart === modifiedEnd + 1, 'modifiedStart should only be one more than modifiedEnd');\r\n                // All deletions\r\n                changes = [\r\n                    new DiffChange(originalStart, originalEnd - originalStart + 1, modifiedStart, 0)\r\n                ];\r\n            }\r\n            else {\r\n                Debug.Assert(originalStart === originalEnd + 1, 'originalStart should only be one more than originalEnd');\r\n                Debug.Assert(modifiedStart === modifiedEnd + 1, 'modifiedStart should only be one more than modifiedEnd');\r\n                // Identical sequences - No differences\r\n                changes = [];\r\n            }\r\n            return changes;\r\n        }\r\n        // This problem can be solved using the Divide-And-Conquer technique.\r\n        var midOriginalArr = [0];\r\n        var midModifiedArr = [0];\r\n        var result = this.ComputeRecursionPoint(originalStart, originalEnd, modifiedStart, modifiedEnd, midOriginalArr, midModifiedArr, quitEarlyArr);\r\n        var midOriginal = midOriginalArr[0];\r\n        var midModified = midModifiedArr[0];\r\n        if (result !== null) {\r\n            // Result is not-null when there was enough memory to compute the changes while\r\n            // searching for the recursion point\r\n            return result;\r\n        }\r\n        else if (!quitEarlyArr[0]) {\r\n            // We can break the problem down recursively by finding the changes in the\r\n            // First Half:   (originalStart, modifiedStart) to (midOriginal, midModified)\r\n            // Second Half:  (midOriginal + 1, minModified + 1) to (originalEnd, modifiedEnd)\r\n            // NOTE: ComputeDiff() is inclusive, therefore the second range starts on the next point\r\n            var leftChanges = this.ComputeDiffRecursive(originalStart, midOriginal, modifiedStart, midModified, quitEarlyArr);\r\n            var rightChanges = [];\r\n            if (!quitEarlyArr[0]) {\r\n                rightChanges = this.ComputeDiffRecursive(midOriginal + 1, originalEnd, midModified + 1, modifiedEnd, quitEarlyArr);\r\n            }\r\n            else {\r\n                // We did't have time to finish the first half, so we don't have time to compute this half.\r\n                // Consider the entire rest of the sequence different.\r\n                rightChanges = [\r\n                    new DiffChange(midOriginal + 1, originalEnd - (midOriginal + 1) + 1, midModified + 1, modifiedEnd - (midModified + 1) + 1)\r\n                ];\r\n            }\r\n            return this.ConcatenateChanges(leftChanges, rightChanges);\r\n        }\r\n        // If we hit here, we quit early, and so can't return anything meaningful\r\n        return [\r\n            new DiffChange(originalStart, originalEnd - originalStart + 1, modifiedStart, modifiedEnd - modifiedStart + 1)\r\n        ];\r\n    };\r\n    LcsDiff.prototype.WALKTRACE = function (diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset, diagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset, forwardPoints, reversePoints, originalIndex, originalEnd, midOriginalArr, modifiedIndex, modifiedEnd, midModifiedArr, deltaIsEven, quitEarlyArr) {\r\n        var forwardChanges = null;\r\n        var reverseChanges = null;\r\n        // First, walk backward through the forward diagonals history\r\n        var changeHelper = new DiffChangeHelper();\r\n        var diagonalMin = diagonalForwardStart;\r\n        var diagonalMax = diagonalForwardEnd;\r\n        var diagonalRelative = (midOriginalArr[0] - midModifiedArr[0]) - diagonalForwardOffset;\r\n        var lastOriginalIndex = -1073741824 /* MIN_SAFE_SMALL_INTEGER */;\r\n        var historyIndex = this.m_forwardHistory.length - 1;\r\n        do {\r\n            // Get the diagonal index from the relative diagonal number\r\n            var diagonal = diagonalRelative + diagonalForwardBase;\r\n            // Figure out where we came from\r\n            if (diagonal === diagonalMin || (diagonal < diagonalMax && forwardPoints[diagonal - 1] < forwardPoints[diagonal + 1])) {\r\n                // Vertical line (the element is an insert)\r\n                originalIndex = forwardPoints[diagonal + 1];\r\n                modifiedIndex = originalIndex - diagonalRelative - diagonalForwardOffset;\r\n                if (originalIndex < lastOriginalIndex) {\r\n                    changeHelper.MarkNextChange();\r\n                }\r\n                lastOriginalIndex = originalIndex;\r\n                changeHelper.AddModifiedElement(originalIndex + 1, modifiedIndex);\r\n                diagonalRelative = (diagonal + 1) - diagonalForwardBase; //Setup for the next iteration\r\n            }\r\n            else {\r\n                // Horizontal line (the element is a deletion)\r\n                originalIndex = forwardPoints[diagonal - 1] + 1;\r\n                modifiedIndex = originalIndex - diagonalRelative - diagonalForwardOffset;\r\n                if (originalIndex < lastOriginalIndex) {\r\n                    changeHelper.MarkNextChange();\r\n                }\r\n                lastOriginalIndex = originalIndex - 1;\r\n                changeHelper.AddOriginalElement(originalIndex, modifiedIndex + 1);\r\n                diagonalRelative = (diagonal - 1) - diagonalForwardBase; //Setup for the next iteration\r\n            }\r\n            if (historyIndex >= 0) {\r\n                forwardPoints = this.m_forwardHistory[historyIndex];\r\n                diagonalForwardBase = forwardPoints[0]; //We stored this in the first spot\r\n                diagonalMin = 1;\r\n                diagonalMax = forwardPoints.length - 1;\r\n            }\r\n        } while (--historyIndex >= -1);\r\n        // Ironically, we get the forward changes as the reverse of the\r\n        // order we added them since we technically added them backwards\r\n        forwardChanges = changeHelper.getReverseChanges();\r\n        if (quitEarlyArr[0]) {\r\n            // TODO: Calculate a partial from the reverse diagonals.\r\n            //       For now, just assume everything after the midOriginal/midModified point is a diff\r\n            var originalStartPoint = midOriginalArr[0] + 1;\r\n            var modifiedStartPoint = midModifiedArr[0] + 1;\r\n            if (forwardChanges !== null && forwardChanges.length > 0) {\r\n                var lastForwardChange = forwardChanges[forwardChanges.length - 1];\r\n                originalStartPoint = Math.max(originalStartPoint, lastForwardChange.getOriginalEnd());\r\n                modifiedStartPoint = Math.max(modifiedStartPoint, lastForwardChange.getModifiedEnd());\r\n            }\r\n            reverseChanges = [\r\n                new DiffChange(originalStartPoint, originalEnd - originalStartPoint + 1, modifiedStartPoint, modifiedEnd - modifiedStartPoint + 1)\r\n            ];\r\n        }\r\n        else {\r\n            // Now walk backward through the reverse diagonals history\r\n            changeHelper = new DiffChangeHelper();\r\n            diagonalMin = diagonalReverseStart;\r\n            diagonalMax = diagonalReverseEnd;\r\n            diagonalRelative = (midOriginalArr[0] - midModifiedArr[0]) - diagonalReverseOffset;\r\n            lastOriginalIndex = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\r\n            historyIndex = (deltaIsEven) ? this.m_reverseHistory.length - 1 : this.m_reverseHistory.length - 2;\r\n            do {\r\n                // Get the diagonal index from the relative diagonal number\r\n                var diagonal = diagonalRelative + diagonalReverseBase;\r\n                // Figure out where we came from\r\n                if (diagonal === diagonalMin || (diagonal < diagonalMax && reversePoints[diagonal - 1] >= reversePoints[diagonal + 1])) {\r\n                    // Horizontal line (the element is a deletion))\r\n                    originalIndex = reversePoints[diagonal + 1] - 1;\r\n                    modifiedIndex = originalIndex - diagonalRelative - diagonalReverseOffset;\r\n                    if (originalIndex > lastOriginalIndex) {\r\n                        changeHelper.MarkNextChange();\r\n                    }\r\n                    lastOriginalIndex = originalIndex + 1;\r\n                    changeHelper.AddOriginalElement(originalIndex + 1, modifiedIndex + 1);\r\n                    diagonalRelative = (diagonal + 1) - diagonalReverseBase; //Setup for the next iteration\r\n                }\r\n                else {\r\n                    // Vertical line (the element is an insertion)\r\n                    originalIndex = reversePoints[diagonal - 1];\r\n                    modifiedIndex = originalIndex - diagonalRelative - diagonalReverseOffset;\r\n                    if (originalIndex > lastOriginalIndex) {\r\n                        changeHelper.MarkNextChange();\r\n                    }\r\n                    lastOriginalIndex = originalIndex;\r\n                    changeHelper.AddModifiedElement(originalIndex + 1, modifiedIndex + 1);\r\n                    diagonalRelative = (diagonal - 1) - diagonalReverseBase; //Setup for the next iteration\r\n                }\r\n                if (historyIndex >= 0) {\r\n                    reversePoints = this.m_reverseHistory[historyIndex];\r\n                    diagonalReverseBase = reversePoints[0]; //We stored this in the first spot\r\n                    diagonalMin = 1;\r\n                    diagonalMax = reversePoints.length - 1;\r\n                }\r\n            } while (--historyIndex >= -1);\r\n            // There are cases where the reverse history will find diffs that\r\n            // are correct, but not intuitive, so we need shift them.\r\n            reverseChanges = changeHelper.getChanges();\r\n        }\r\n        return this.ConcatenateChanges(forwardChanges, reverseChanges);\r\n    };\r\n    /**\r\n     * Given the range to compute the diff on, this method finds the point:\r\n     * (midOriginal, midModified)\r\n     * that exists in the middle of the LCS of the two sequences and\r\n     * is the point at which the LCS problem may be broken down recursively.\r\n     * This method will try to keep the LCS trace in memory. If the LCS recursion\r\n     * point is calculated and the full trace is available in memory, then this method\r\n     * will return the change list.\r\n     * @param originalStart The start bound of the original sequence range\r\n     * @param originalEnd The end bound of the original sequence range\r\n     * @param modifiedStart The start bound of the modified sequence range\r\n     * @param modifiedEnd The end bound of the modified sequence range\r\n     * @param midOriginal The middle point of the original sequence range\r\n     * @param midModified The middle point of the modified sequence range\r\n     * @returns The diff changes, if available, otherwise null\r\n     */\r\n    LcsDiff.prototype.ComputeRecursionPoint = function (originalStart, originalEnd, modifiedStart, modifiedEnd, midOriginalArr, midModifiedArr, quitEarlyArr) {\r\n        var originalIndex = 0, modifiedIndex = 0;\r\n        var diagonalForwardStart = 0, diagonalForwardEnd = 0;\r\n        var diagonalReverseStart = 0, diagonalReverseEnd = 0;\r\n        // To traverse the edit graph and produce the proper LCS, our actual\r\n        // start position is just outside the given boundary\r\n        originalStart--;\r\n        modifiedStart--;\r\n        // We set these up to make the compiler happy, but they will\r\n        // be replaced before we return with the actual recursion point\r\n        midOriginalArr[0] = 0;\r\n        midModifiedArr[0] = 0;\r\n        // Clear out the history\r\n        this.m_forwardHistory = [];\r\n        this.m_reverseHistory = [];\r\n        // Each cell in the two arrays corresponds to a diagonal in the edit graph.\r\n        // The integer value in the cell represents the originalIndex of the furthest\r\n        // reaching point found so far that ends in that diagonal.\r\n        // The modifiedIndex can be computed mathematically from the originalIndex and the diagonal number.\r\n        var maxDifferences = (originalEnd - originalStart) + (modifiedEnd - modifiedStart);\r\n        var numDiagonals = maxDifferences + 1;\r\n        var forwardPoints = new Int32Array(numDiagonals);\r\n        var reversePoints = new Int32Array(numDiagonals);\r\n        // diagonalForwardBase: Index into forwardPoints of the diagonal which passes through (originalStart, modifiedStart)\r\n        // diagonalReverseBase: Index into reversePoints of the diagonal which passes through (originalEnd, modifiedEnd)\r\n        var diagonalForwardBase = (modifiedEnd - modifiedStart);\r\n        var diagonalReverseBase = (originalEnd - originalStart);\r\n        // diagonalForwardOffset: Geometric offset which allows modifiedIndex to be computed from originalIndex and the\r\n        //    diagonal number (relative to diagonalForwardBase)\r\n        // diagonalReverseOffset: Geometric offset which allows modifiedIndex to be computed from originalIndex and the\r\n        //    diagonal number (relative to diagonalReverseBase)\r\n        var diagonalForwardOffset = (originalStart - modifiedStart);\r\n        var diagonalReverseOffset = (originalEnd - modifiedEnd);\r\n        // delta: The difference between the end diagonal and the start diagonal. This is used to relate diagonal numbers\r\n        //   relative to the start diagonal with diagonal numbers relative to the end diagonal.\r\n        // The Even/Oddn-ness of this delta is important for determining when we should check for overlap\r\n        var delta = diagonalReverseBase - diagonalForwardBase;\r\n        var deltaIsEven = (delta % 2 === 0);\r\n        // Here we set up the start and end points as the furthest points found so far\r\n        // in both the forward and reverse directions, respectively\r\n        forwardPoints[diagonalForwardBase] = originalStart;\r\n        reversePoints[diagonalReverseBase] = originalEnd;\r\n        // Remember if we quit early, and thus need to do a best-effort result instead of a real result.\r\n        quitEarlyArr[0] = false;\r\n        // A couple of points:\r\n        // --With this method, we iterate on the number of differences between the two sequences.\r\n        //   The more differences there actually are, the longer this will take.\r\n        // --Also, as the number of differences increases, we have to search on diagonals further\r\n        //   away from the reference diagonal (which is diagonalForwardBase for forward, diagonalReverseBase for reverse).\r\n        // --We extend on even diagonals (relative to the reference diagonal) only when numDifferences\r\n        //   is even and odd diagonals only when numDifferences is odd.\r\n        for (var numDifferences = 1; numDifferences <= (maxDifferences / 2) + 1; numDifferences++) {\r\n            var furthestOriginalIndex = 0;\r\n            var furthestModifiedIndex = 0;\r\n            // Run the algorithm in the forward direction\r\n            diagonalForwardStart = this.ClipDiagonalBound(diagonalForwardBase - numDifferences, numDifferences, diagonalForwardBase, numDiagonals);\r\n            diagonalForwardEnd = this.ClipDiagonalBound(diagonalForwardBase + numDifferences, numDifferences, diagonalForwardBase, numDiagonals);\r\n            for (var diagonal = diagonalForwardStart; diagonal <= diagonalForwardEnd; diagonal += 2) {\r\n                // STEP 1: We extend the furthest reaching point in the present diagonal\r\n                // by looking at the diagonals above and below and picking the one whose point\r\n                // is further away from the start point (originalStart, modifiedStart)\r\n                if (diagonal === diagonalForwardStart || (diagonal < diagonalForwardEnd && forwardPoints[diagonal - 1] < forwardPoints[diagonal + 1])) {\r\n                    originalIndex = forwardPoints[diagonal + 1];\r\n                }\r\n                else {\r\n                    originalIndex = forwardPoints[diagonal - 1] + 1;\r\n                }\r\n                modifiedIndex = originalIndex - (diagonal - diagonalForwardBase) - diagonalForwardOffset;\r\n                // Save the current originalIndex so we can test for false overlap in step 3\r\n                var tempOriginalIndex = originalIndex;\r\n                // STEP 2: We can continue to extend the furthest reaching point in the present diagonal\r\n                // so long as the elements are equal.\r\n                while (originalIndex < originalEnd && modifiedIndex < modifiedEnd && this.ElementsAreEqual(originalIndex + 1, modifiedIndex + 1)) {\r\n                    originalIndex++;\r\n                    modifiedIndex++;\r\n                }\r\n                forwardPoints[diagonal] = originalIndex;\r\n                if (originalIndex + modifiedIndex > furthestOriginalIndex + furthestModifiedIndex) {\r\n                    furthestOriginalIndex = originalIndex;\r\n                    furthestModifiedIndex = modifiedIndex;\r\n                }\r\n                // STEP 3: If delta is odd (overlap first happens on forward when delta is odd)\r\n                // and diagonal is in the range of reverse diagonals computed for numDifferences-1\r\n                // (the previous iteration; we haven't computed reverse diagonals for numDifferences yet)\r\n                // then check for overlap.\r\n                if (!deltaIsEven && Math.abs(diagonal - diagonalReverseBase) <= (numDifferences - 1)) {\r\n                    if (originalIndex >= reversePoints[diagonal]) {\r\n                        midOriginalArr[0] = originalIndex;\r\n                        midModifiedArr[0] = modifiedIndex;\r\n                        if (tempOriginalIndex <= reversePoints[diagonal] && 1447 /* MaxDifferencesHistory */ > 0 && numDifferences <= (1447 /* MaxDifferencesHistory */ + 1)) {\r\n                            // BINGO! We overlapped, and we have the full trace in memory!\r\n                            return this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset, diagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset, forwardPoints, reversePoints, originalIndex, originalEnd, midOriginalArr, modifiedIndex, modifiedEnd, midModifiedArr, deltaIsEven, quitEarlyArr);\r\n                        }\r\n                        else {\r\n                            // Either false overlap, or we didn't have enough memory for the full trace\r\n                            // Just return the recursion point\r\n                            return null;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // Check to see if we should be quitting early, before moving on to the next iteration.\r\n            var matchLengthOfLongest = ((furthestOriginalIndex - originalStart) + (furthestModifiedIndex - modifiedStart) - numDifferences) / 2;\r\n            if (this.ContinueProcessingPredicate !== null && !this.ContinueProcessingPredicate(furthestOriginalIndex, matchLengthOfLongest)) {\r\n                // We can't finish, so skip ahead to generating a result from what we have.\r\n                quitEarlyArr[0] = true;\r\n                // Use the furthest distance we got in the forward direction.\r\n                midOriginalArr[0] = furthestOriginalIndex;\r\n                midModifiedArr[0] = furthestModifiedIndex;\r\n                if (matchLengthOfLongest > 0 && 1447 /* MaxDifferencesHistory */ > 0 && numDifferences <= (1447 /* MaxDifferencesHistory */ + 1)) {\r\n                    // Enough of the history is in memory to walk it backwards\r\n                    return this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset, diagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset, forwardPoints, reversePoints, originalIndex, originalEnd, midOriginalArr, modifiedIndex, modifiedEnd, midModifiedArr, deltaIsEven, quitEarlyArr);\r\n                }\r\n                else {\r\n                    // We didn't actually remember enough of the history.\r\n                    //Since we are quiting the diff early, we need to shift back the originalStart and modified start\r\n                    //back into the boundary limits since we decremented their value above beyond the boundary limit.\r\n                    originalStart++;\r\n                    modifiedStart++;\r\n                    return [\r\n                        new DiffChange(originalStart, originalEnd - originalStart + 1, modifiedStart, modifiedEnd - modifiedStart + 1)\r\n                    ];\r\n                }\r\n            }\r\n            // Run the algorithm in the reverse direction\r\n            diagonalReverseStart = this.ClipDiagonalBound(diagonalReverseBase - numDifferences, numDifferences, diagonalReverseBase, numDiagonals);\r\n            diagonalReverseEnd = this.ClipDiagonalBound(diagonalReverseBase + numDifferences, numDifferences, diagonalReverseBase, numDiagonals);\r\n            for (var diagonal = diagonalReverseStart; diagonal <= diagonalReverseEnd; diagonal += 2) {\r\n                // STEP 1: We extend the furthest reaching point in the present diagonal\r\n                // by looking at the diagonals above and below and picking the one whose point\r\n                // is further away from the start point (originalEnd, modifiedEnd)\r\n                if (diagonal === diagonalReverseStart || (diagonal < diagonalReverseEnd && reversePoints[diagonal - 1] >= reversePoints[diagonal + 1])) {\r\n                    originalIndex = reversePoints[diagonal + 1] - 1;\r\n                }\r\n                else {\r\n                    originalIndex = reversePoints[diagonal - 1];\r\n                }\r\n                modifiedIndex = originalIndex - (diagonal - diagonalReverseBase) - diagonalReverseOffset;\r\n                // Save the current originalIndex so we can test for false overlap\r\n                var tempOriginalIndex = originalIndex;\r\n                // STEP 2: We can continue to extend the furthest reaching point in the present diagonal\r\n                // as long as the elements are equal.\r\n                while (originalIndex > originalStart && modifiedIndex > modifiedStart && this.ElementsAreEqual(originalIndex, modifiedIndex)) {\r\n                    originalIndex--;\r\n                    modifiedIndex--;\r\n                }\r\n                reversePoints[diagonal] = originalIndex;\r\n                // STEP 4: If delta is even (overlap first happens on reverse when delta is even)\r\n                // and diagonal is in the range of forward diagonals computed for numDifferences\r\n                // then check for overlap.\r\n                if (deltaIsEven && Math.abs(diagonal - diagonalForwardBase) <= numDifferences) {\r\n                    if (originalIndex <= forwardPoints[diagonal]) {\r\n                        midOriginalArr[0] = originalIndex;\r\n                        midModifiedArr[0] = modifiedIndex;\r\n                        if (tempOriginalIndex >= forwardPoints[diagonal] && 1447 /* MaxDifferencesHistory */ > 0 && numDifferences <= (1447 /* MaxDifferencesHistory */ + 1)) {\r\n                            // BINGO! We overlapped, and we have the full trace in memory!\r\n                            return this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset, diagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset, forwardPoints, reversePoints, originalIndex, originalEnd, midOriginalArr, modifiedIndex, modifiedEnd, midModifiedArr, deltaIsEven, quitEarlyArr);\r\n                        }\r\n                        else {\r\n                            // Either false overlap, or we didn't have enough memory for the full trace\r\n                            // Just return the recursion point\r\n                            return null;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // Save current vectors to history before the next iteration\r\n            if (numDifferences <= 1447 /* MaxDifferencesHistory */) {\r\n                // We are allocating space for one extra int, which we fill with\r\n                // the index of the diagonal base index\r\n                var temp = new Int32Array(diagonalForwardEnd - diagonalForwardStart + 2);\r\n                temp[0] = diagonalForwardBase - diagonalForwardStart + 1;\r\n                MyArray.Copy2(forwardPoints, diagonalForwardStart, temp, 1, diagonalForwardEnd - diagonalForwardStart + 1);\r\n                this.m_forwardHistory.push(temp);\r\n                temp = new Int32Array(diagonalReverseEnd - diagonalReverseStart + 2);\r\n                temp[0] = diagonalReverseBase - diagonalReverseStart + 1;\r\n                MyArray.Copy2(reversePoints, diagonalReverseStart, temp, 1, diagonalReverseEnd - diagonalReverseStart + 1);\r\n                this.m_reverseHistory.push(temp);\r\n            }\r\n        }\r\n        // If we got here, then we have the full trace in history. We just have to convert it to a change list\r\n        // NOTE: This part is a bit messy\r\n        return this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset, diagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset, forwardPoints, reversePoints, originalIndex, originalEnd, midOriginalArr, modifiedIndex, modifiedEnd, midModifiedArr, deltaIsEven, quitEarlyArr);\r\n    };\r\n    /**\r\n     * Shifts the given changes to provide a more intuitive diff.\r\n     * While the first element in a diff matches the first element after the diff,\r\n     * we shift the diff down.\r\n     *\r\n     * @param changes The list of changes to shift\r\n     * @returns The shifted changes\r\n     */\r\n    LcsDiff.prototype.PrettifyChanges = function (changes) {\r\n        // Shift all the changes down first\r\n        for (var i = 0; i < changes.length; i++) {\r\n            var change = changes[i];\r\n            var originalStop = (i < changes.length - 1) ? changes[i + 1].originalStart : this._originalElementsOrHash.length;\r\n            var modifiedStop = (i < changes.length - 1) ? changes[i + 1].modifiedStart : this._modifiedElementsOrHash.length;\r\n            var checkOriginal = change.originalLength > 0;\r\n            var checkModified = change.modifiedLength > 0;\r\n            while (change.originalStart + change.originalLength < originalStop &&\r\n                change.modifiedStart + change.modifiedLength < modifiedStop &&\r\n                (!checkOriginal || this.OriginalElementsAreEqual(change.originalStart, change.originalStart + change.originalLength)) &&\r\n                (!checkModified || this.ModifiedElementsAreEqual(change.modifiedStart, change.modifiedStart + change.modifiedLength))) {\r\n                change.originalStart++;\r\n                change.modifiedStart++;\r\n            }\r\n            var mergedChangeArr = [null];\r\n            if (i < changes.length - 1 && this.ChangesOverlap(changes[i], changes[i + 1], mergedChangeArr)) {\r\n                changes[i] = mergedChangeArr[0];\r\n                changes.splice(i + 1, 1);\r\n                i--;\r\n                continue;\r\n            }\r\n        }\r\n        // Shift changes back up until we hit empty or whitespace-only lines\r\n        for (var i = changes.length - 1; i >= 0; i--) {\r\n            var change = changes[i];\r\n            var originalStop = 0;\r\n            var modifiedStop = 0;\r\n            if (i > 0) {\r\n                var prevChange = changes[i - 1];\r\n                if (prevChange.originalLength > 0) {\r\n                    originalStop = prevChange.originalStart + prevChange.originalLength;\r\n                }\r\n                if (prevChange.modifiedLength > 0) {\r\n                    modifiedStop = prevChange.modifiedStart + prevChange.modifiedLength;\r\n                }\r\n            }\r\n            var checkOriginal = change.originalLength > 0;\r\n            var checkModified = change.modifiedLength > 0;\r\n            var bestDelta = 0;\r\n            var bestScore = this._boundaryScore(change.originalStart, change.originalLength, change.modifiedStart, change.modifiedLength);\r\n            for (var delta = 1;; delta++) {\r\n                var originalStart = change.originalStart - delta;\r\n                var modifiedStart = change.modifiedStart - delta;\r\n                if (originalStart < originalStop || modifiedStart < modifiedStop) {\r\n                    break;\r\n                }\r\n                if (checkOriginal && !this.OriginalElementsAreEqual(originalStart, originalStart + change.originalLength)) {\r\n                    break;\r\n                }\r\n                if (checkModified && !this.ModifiedElementsAreEqual(modifiedStart, modifiedStart + change.modifiedLength)) {\r\n                    break;\r\n                }\r\n                var score = this._boundaryScore(originalStart, change.originalLength, modifiedStart, change.modifiedLength);\r\n                if (score > bestScore) {\r\n                    bestScore = score;\r\n                    bestDelta = delta;\r\n                }\r\n            }\r\n            change.originalStart -= bestDelta;\r\n            change.modifiedStart -= bestDelta;\r\n        }\r\n        return changes;\r\n    };\r\n    LcsDiff.prototype._OriginalIsBoundary = function (index) {\r\n        if (index <= 0 || index >= this._originalElementsOrHash.length - 1) {\r\n            return true;\r\n        }\r\n        return (this._hasStrings && /^\\s*$/.test(this._originalStringElements[index]));\r\n    };\r\n    LcsDiff.prototype._OriginalRegionIsBoundary = function (originalStart, originalLength) {\r\n        if (this._OriginalIsBoundary(originalStart) || this._OriginalIsBoundary(originalStart - 1)) {\r\n            return true;\r\n        }\r\n        if (originalLength > 0) {\r\n            var originalEnd = originalStart + originalLength;\r\n            if (this._OriginalIsBoundary(originalEnd - 1) || this._OriginalIsBoundary(originalEnd)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    LcsDiff.prototype._ModifiedIsBoundary = function (index) {\r\n        if (index <= 0 || index >= this._modifiedElementsOrHash.length - 1) {\r\n            return true;\r\n        }\r\n        return (this._hasStrings && /^\\s*$/.test(this._modifiedStringElements[index]));\r\n    };\r\n    LcsDiff.prototype._ModifiedRegionIsBoundary = function (modifiedStart, modifiedLength) {\r\n        if (this._ModifiedIsBoundary(modifiedStart) || this._ModifiedIsBoundary(modifiedStart - 1)) {\r\n            return true;\r\n        }\r\n        if (modifiedLength > 0) {\r\n            var modifiedEnd = modifiedStart + modifiedLength;\r\n            if (this._ModifiedIsBoundary(modifiedEnd - 1) || this._ModifiedIsBoundary(modifiedEnd)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    LcsDiff.prototype._boundaryScore = function (originalStart, originalLength, modifiedStart, modifiedLength) {\r\n        var originalScore = (this._OriginalRegionIsBoundary(originalStart, originalLength) ? 1 : 0);\r\n        var modifiedScore = (this._ModifiedRegionIsBoundary(modifiedStart, modifiedLength) ? 1 : 0);\r\n        return (originalScore + modifiedScore);\r\n    };\r\n    /**\r\n     * Concatenates the two input DiffChange lists and returns the resulting\r\n     * list.\r\n     * @param The left changes\r\n     * @param The right changes\r\n     * @returns The concatenated list\r\n     */\r\n    LcsDiff.prototype.ConcatenateChanges = function (left, right) {\r\n        var mergedChangeArr = [];\r\n        if (left.length === 0 || right.length === 0) {\r\n            return (right.length > 0) ? right : left;\r\n        }\r\n        else if (this.ChangesOverlap(left[left.length - 1], right[0], mergedChangeArr)) {\r\n            // Since we break the problem down recursively, it is possible that we\r\n            // might recurse in the middle of a change thereby splitting it into\r\n            // two changes. Here in the combining stage, we detect and fuse those\r\n            // changes back together\r\n            var result = new Array(left.length + right.length - 1);\r\n            MyArray.Copy(left, 0, result, 0, left.length - 1);\r\n            result[left.length - 1] = mergedChangeArr[0];\r\n            MyArray.Copy(right, 1, result, left.length, right.length - 1);\r\n            return result;\r\n        }\r\n        else {\r\n            var result = new Array(left.length + right.length);\r\n            MyArray.Copy(left, 0, result, 0, left.length);\r\n            MyArray.Copy(right, 0, result, left.length, right.length);\r\n            return result;\r\n        }\r\n    };\r\n    /**\r\n     * Returns true if the two changes overlap and can be merged into a single\r\n     * change\r\n     * @param left The left change\r\n     * @param right The right change\r\n     * @param mergedChange The merged change if the two overlap, null otherwise\r\n     * @returns True if the two changes overlap\r\n     */\r\n    LcsDiff.prototype.ChangesOverlap = function (left, right, mergedChangeArr) {\r\n        Debug.Assert(left.originalStart <= right.originalStart, 'Left change is not less than or equal to right change');\r\n        Debug.Assert(left.modifiedStart <= right.modifiedStart, 'Left change is not less than or equal to right change');\r\n        if (left.originalStart + left.originalLength >= right.originalStart || left.modifiedStart + left.modifiedLength >= right.modifiedStart) {\r\n            var originalStart = left.originalStart;\r\n            var originalLength = left.originalLength;\r\n            var modifiedStart = left.modifiedStart;\r\n            var modifiedLength = left.modifiedLength;\r\n            if (left.originalStart + left.originalLength >= right.originalStart) {\r\n                originalLength = right.originalStart + right.originalLength - left.originalStart;\r\n            }\r\n            if (left.modifiedStart + left.modifiedLength >= right.modifiedStart) {\r\n                modifiedLength = right.modifiedStart + right.modifiedLength - left.modifiedStart;\r\n            }\r\n            mergedChangeArr[0] = new DiffChange(originalStart, originalLength, modifiedStart, modifiedLength);\r\n            return true;\r\n        }\r\n        else {\r\n            mergedChangeArr[0] = null;\r\n            return false;\r\n        }\r\n    };\r\n    /**\r\n     * Helper method used to clip a diagonal index to the range of valid\r\n     * diagonals. This also decides whether or not the diagonal index,\r\n     * if it exceeds the boundary, should be clipped to the boundary or clipped\r\n     * one inside the boundary depending on the Even/Odd status of the boundary\r\n     * and numDifferences.\r\n     * @param diagonal The index of the diagonal to clip.\r\n     * @param numDifferences The current number of differences being iterated upon.\r\n     * @param diagonalBaseIndex The base reference diagonal.\r\n     * @param numDiagonals The total number of diagonals.\r\n     * @returns The clipped diagonal index.\r\n     */\r\n    LcsDiff.prototype.ClipDiagonalBound = function (diagonal, numDifferences, diagonalBaseIndex, numDiagonals) {\r\n        if (diagonal >= 0 && diagonal < numDiagonals) {\r\n            // Nothing to clip, its in range\r\n            return diagonal;\r\n        }\r\n        // diagonalsBelow: The number of diagonals below the reference diagonal\r\n        // diagonalsAbove: The number of diagonals above the reference diagonal\r\n        var diagonalsBelow = diagonalBaseIndex;\r\n        var diagonalsAbove = numDiagonals - diagonalBaseIndex - 1;\r\n        var diffEven = (numDifferences % 2 === 0);\r\n        if (diagonal < 0) {\r\n            var lowerBoundEven = (diagonalsBelow % 2 === 0);\r\n            return (diffEven === lowerBoundEven) ? 0 : 1;\r\n        }\r\n        else {\r\n            var upperBoundEven = (diagonalsAbove % 2 === 0);\r\n            return (diffEven === upperBoundEven) ? numDiagonals - 1 : numDiagonals - 2;\r\n        }\r\n    };\r\n    return LcsDiff;\r\n}());\r\nexport { LcsDiff };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Emitter, Event } from './event.js';\r\nvar shortcutEvent = Object.freeze(function (callback, context) {\r\n    var handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose: function () { clearTimeout(handle); } };\r\n});\r\nexport var CancellationToken;\r\n(function (CancellationToken) {\r\n    function isCancellationToken(thing) {\r\n        if (thing === CancellationToken.None || thing === CancellationToken.Cancelled) {\r\n            return true;\r\n        }\r\n        if (thing instanceof MutableToken) {\r\n            return true;\r\n        }\r\n        if (!thing || typeof thing !== 'object') {\r\n            return false;\r\n        }\r\n        return typeof thing.isCancellationRequested === 'boolean'\r\n            && typeof thing.onCancellationRequested === 'function';\r\n    }\r\n    CancellationToken.isCancellationToken = isCancellationToken;\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: shortcutEvent\r\n    });\r\n})(CancellationToken || (CancellationToken = {}));\r\nvar MutableToken = /** @class */ (function () {\r\n    function MutableToken() {\r\n        this._isCancelled = false;\r\n        this._emitter = null;\r\n    }\r\n    MutableToken.prototype.cancel = function () {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(MutableToken.prototype, \"isCancellationRequested\", {\r\n        get: function () {\r\n            return this._isCancelled;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MutableToken.prototype, \"onCancellationRequested\", {\r\n        get: function () {\r\n            if (this._isCancelled) {\r\n                return shortcutEvent;\r\n            }\r\n            if (!this._emitter) {\r\n                this._emitter = new Emitter();\r\n            }\r\n            return this._emitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MutableToken.prototype.dispose = function () {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = null;\r\n        }\r\n    };\r\n    return MutableToken;\r\n}());\r\nvar CancellationTokenSource = /** @class */ (function () {\r\n    function CancellationTokenSource(parent) {\r\n        this._token = undefined;\r\n        this._parentListener = undefined;\r\n        this._parentListener = parent && parent.onCancellationRequested(this.cancel, this);\r\n    }\r\n    Object.defineProperty(CancellationTokenSource.prototype, \"token\", {\r\n        get: function () {\r\n            if (!this._token) {\r\n                // be lazy and create the token only when\r\n                // actually needed\r\n                this._token = new MutableToken();\r\n            }\r\n            return this._token;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CancellationTokenSource.prototype.cancel = function () {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually cancel\r\n            this._token.cancel();\r\n        }\r\n    };\r\n    CancellationTokenSource.prototype.dispose = function (cancel) {\r\n        if (cancel === void 0) { cancel = false; }\r\n        if (cancel) {\r\n            this.cancel();\r\n        }\r\n        if (this._parentListener) {\r\n            this._parentListener.dispose();\r\n        }\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    };\r\n    return CancellationTokenSource;\r\n}());\r\nexport { CancellationTokenSource };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { onUnexpectedError } from './errors.js';\r\nimport { once as onceFn } from './functional.js';\r\nimport { Disposable, toDisposable, combinedDisposable, DisposableStore } from './lifecycle.js';\r\nimport { LinkedList } from './linkedList.js';\r\nexport var Event;\r\n(function (Event) {\r\n    Event.None = function () { return Disposable.None; };\r\n    /**\r\n     * Given an event, returns another event which only fires once.\r\n     */\r\n    function once(event) {\r\n        return function (listener, thisArgs, disposables) {\r\n            if (thisArgs === void 0) { thisArgs = null; }\r\n            // we need this, in case the event fires during the listener call\r\n            var didFire = false;\r\n            var result;\r\n            result = event(function (e) {\r\n                if (didFire) {\r\n                    return;\r\n                }\r\n                else if (result) {\r\n                    result.dispose();\r\n                }\r\n                else {\r\n                    didFire = true;\r\n                }\r\n                return listener.call(thisArgs, e);\r\n            }, null, disposables);\r\n            if (didFire) {\r\n                result.dispose();\r\n            }\r\n            return result;\r\n        };\r\n    }\r\n    Event.once = once;\r\n    /**\r\n     * Given an event and a `map` function, returns another event which maps each element\r\n     * through the mapping function.\r\n     */\r\n    function map(event, map) {\r\n        return snapshot(function (listener, thisArgs, disposables) {\r\n            if (thisArgs === void 0) { thisArgs = null; }\r\n            return event(function (i) { return listener.call(thisArgs, map(i)); }, null, disposables);\r\n        });\r\n    }\r\n    Event.map = map;\r\n    /**\r\n     * Given an event and an `each` function, returns another identical event and calls\r\n     * the `each` function per each element.\r\n     */\r\n    function forEach(event, each) {\r\n        return snapshot(function (listener, thisArgs, disposables) {\r\n            if (thisArgs === void 0) { thisArgs = null; }\r\n            return event(function (i) { each(i); listener.call(thisArgs, i); }, null, disposables);\r\n        });\r\n    }\r\n    Event.forEach = forEach;\r\n    function filter(event, filter) {\r\n        return snapshot(function (listener, thisArgs, disposables) {\r\n            if (thisArgs === void 0) { thisArgs = null; }\r\n            return event(function (e) { return filter(e) && listener.call(thisArgs, e); }, null, disposables);\r\n        });\r\n    }\r\n    Event.filter = filter;\r\n    /**\r\n     * Given an event, returns the same event but typed as `Event<void>`.\r\n     */\r\n    function signal(event) {\r\n        return event;\r\n    }\r\n    Event.signal = signal;\r\n    /**\r\n     * Given a collection of events, returns a single event which emits\r\n     * whenever any of the provided events emit.\r\n     */\r\n    function any() {\r\n        var events = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            events[_i] = arguments[_i];\r\n        }\r\n        return function (listener, thisArgs, disposables) {\r\n            if (thisArgs === void 0) { thisArgs = null; }\r\n            return combinedDisposable.apply(void 0, events.map(function (event) { return event(function (e) { return listener.call(thisArgs, e); }, null, disposables); }));\r\n        };\r\n    }\r\n    Event.any = any;\r\n    /**\r\n     * Given an event and a `merge` function, returns another event which maps each element\r\n     * and the cumulative result through the `merge` function. Similar to `map`, but with memory.\r\n     */\r\n    function reduce(event, merge, initial) {\r\n        var output = initial;\r\n        return map(event, function (e) {\r\n            output = merge(output, e);\r\n            return output;\r\n        });\r\n    }\r\n    Event.reduce = reduce;\r\n    /**\r\n     * Given a chain of event processing functions (filter, map, etc), each\r\n     * function will be invoked per event & per listener. Snapshotting an event\r\n     * chain allows each function to be invoked just once per event.\r\n     */\r\n    function snapshot(event) {\r\n        var listener;\r\n        var emitter = new Emitter({\r\n            onFirstListenerAdd: function () {\r\n                listener = event(emitter.fire, emitter);\r\n            },\r\n            onLastListenerRemove: function () {\r\n                listener.dispose();\r\n            }\r\n        });\r\n        return emitter.event;\r\n    }\r\n    Event.snapshot = snapshot;\r\n    function debounce(event, merge, delay, leading, leakWarningThreshold) {\r\n        if (delay === void 0) { delay = 100; }\r\n        if (leading === void 0) { leading = false; }\r\n        var subscription;\r\n        var output = undefined;\r\n        var handle = undefined;\r\n        var numDebouncedCalls = 0;\r\n        var emitter = new Emitter({\r\n            leakWarningThreshold: leakWarningThreshold,\r\n            onFirstListenerAdd: function () {\r\n                subscription = event(function (cur) {\r\n                    numDebouncedCalls++;\r\n                    output = merge(output, cur);\r\n                    if (leading && !handle) {\r\n                        emitter.fire(output);\r\n                        output = undefined;\r\n                    }\r\n                    clearTimeout(handle);\r\n                    handle = setTimeout(function () {\r\n                        var _output = output;\r\n                        output = undefined;\r\n                        handle = undefined;\r\n                        if (!leading || numDebouncedCalls > 1) {\r\n                            emitter.fire(_output);\r\n                        }\r\n                        numDebouncedCalls = 0;\r\n                    }, delay);\r\n                });\r\n            },\r\n            onLastListenerRemove: function () {\r\n                subscription.dispose();\r\n            }\r\n        });\r\n        return emitter.event;\r\n    }\r\n    Event.debounce = debounce;\r\n    /**\r\n     * Given an event, it returns another event which fires only once and as soon as\r\n     * the input event emits. The event data is the number of millis it took for the\r\n     * event to fire.\r\n     */\r\n    function stopwatch(event) {\r\n        var start = new Date().getTime();\r\n        return map(once(event), function (_) { return new Date().getTime() - start; });\r\n    }\r\n    Event.stopwatch = stopwatch;\r\n    /**\r\n     * Given an event, it returns another event which fires only when the event\r\n     * element changes.\r\n     */\r\n    function latch(event) {\r\n        var firstCall = true;\r\n        var cache;\r\n        return filter(event, function (value) {\r\n            var shouldEmit = firstCall || value !== cache;\r\n            firstCall = false;\r\n            cache = value;\r\n            return shouldEmit;\r\n        });\r\n    }\r\n    Event.latch = latch;\r\n    /**\r\n     * Buffers the provided event until a first listener comes\r\n     * along, at which point fire all the events at once and\r\n     * pipe the event from then on.\r\n     *\r\n     * ```typescript\r\n     * const emitter = new Emitter<number>();\r\n     * const event = emitter.event;\r\n     * const bufferedEvent = buffer(event);\r\n     *\r\n     * emitter.fire(1);\r\n     * emitter.fire(2);\r\n     * emitter.fire(3);\r\n     * // nothing...\r\n     *\r\n     * const listener = bufferedEvent(num => console.log(num));\r\n     * // 1, 2, 3\r\n     *\r\n     * emitter.fire(4);\r\n     * // 4\r\n     * ```\r\n     */\r\n    function buffer(event, nextTick, _buffer) {\r\n        if (nextTick === void 0) { nextTick = false; }\r\n        if (_buffer === void 0) { _buffer = []; }\r\n        var buffer = _buffer.slice();\r\n        var listener = event(function (e) {\r\n            if (buffer) {\r\n                buffer.push(e);\r\n            }\r\n            else {\r\n                emitter.fire(e);\r\n            }\r\n        });\r\n        var flush = function () {\r\n            if (buffer) {\r\n                buffer.forEach(function (e) { return emitter.fire(e); });\r\n            }\r\n            buffer = null;\r\n        };\r\n        var emitter = new Emitter({\r\n            onFirstListenerAdd: function () {\r\n                if (!listener) {\r\n                    listener = event(function (e) { return emitter.fire(e); });\r\n                }\r\n            },\r\n            onFirstListenerDidAdd: function () {\r\n                if (buffer) {\r\n                    if (nextTick) {\r\n                        setTimeout(flush);\r\n                    }\r\n                    else {\r\n                        flush();\r\n                    }\r\n                }\r\n            },\r\n            onLastListenerRemove: function () {\r\n                if (listener) {\r\n                    listener.dispose();\r\n                }\r\n                listener = null;\r\n            }\r\n        });\r\n        return emitter.event;\r\n    }\r\n    Event.buffer = buffer;\r\n    var ChainableEvent = /** @class */ (function () {\r\n        function ChainableEvent(event) {\r\n            this.event = event;\r\n        }\r\n        ChainableEvent.prototype.map = function (fn) {\r\n            return new ChainableEvent(map(this.event, fn));\r\n        };\r\n        ChainableEvent.prototype.forEach = function (fn) {\r\n            return new ChainableEvent(forEach(this.event, fn));\r\n        };\r\n        ChainableEvent.prototype.filter = function (fn) {\r\n            return new ChainableEvent(filter(this.event, fn));\r\n        };\r\n        ChainableEvent.prototype.reduce = function (merge, initial) {\r\n            return new ChainableEvent(reduce(this.event, merge, initial));\r\n        };\r\n        ChainableEvent.prototype.latch = function () {\r\n            return new ChainableEvent(latch(this.event));\r\n        };\r\n        ChainableEvent.prototype.debounce = function (merge, delay, leading, leakWarningThreshold) {\r\n            if (delay === void 0) { delay = 100; }\r\n            if (leading === void 0) { leading = false; }\r\n            return new ChainableEvent(debounce(this.event, merge, delay, leading, leakWarningThreshold));\r\n        };\r\n        ChainableEvent.prototype.on = function (listener, thisArgs, disposables) {\r\n            return this.event(listener, thisArgs, disposables);\r\n        };\r\n        ChainableEvent.prototype.once = function (listener, thisArgs, disposables) {\r\n            return once(this.event)(listener, thisArgs, disposables);\r\n        };\r\n        return ChainableEvent;\r\n    }());\r\n    function chain(event) {\r\n        return new ChainableEvent(event);\r\n    }\r\n    Event.chain = chain;\r\n    function fromNodeEventEmitter(emitter, eventName, map) {\r\n        if (map === void 0) { map = function (id) { return id; }; }\r\n        var fn = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return result.fire(map.apply(void 0, args));\r\n        };\r\n        var onFirstListenerAdd = function () { return emitter.on(eventName, fn); };\r\n        var onLastListenerRemove = function () { return emitter.removeListener(eventName, fn); };\r\n        var result = new Emitter({ onFirstListenerAdd: onFirstListenerAdd, onLastListenerRemove: onLastListenerRemove });\r\n        return result.event;\r\n    }\r\n    Event.fromNodeEventEmitter = fromNodeEventEmitter;\r\n    function fromDOMEventEmitter(emitter, eventName, map) {\r\n        if (map === void 0) { map = function (id) { return id; }; }\r\n        var fn = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return result.fire(map.apply(void 0, args));\r\n        };\r\n        var onFirstListenerAdd = function () { return emitter.addEventListener(eventName, fn); };\r\n        var onLastListenerRemove = function () { return emitter.removeEventListener(eventName, fn); };\r\n        var result = new Emitter({ onFirstListenerAdd: onFirstListenerAdd, onLastListenerRemove: onLastListenerRemove });\r\n        return result.event;\r\n    }\r\n    Event.fromDOMEventEmitter = fromDOMEventEmitter;\r\n    function fromPromise(promise) {\r\n        var emitter = new Emitter();\r\n        var shouldEmit = false;\r\n        promise\r\n            .then(undefined, function () { return null; })\r\n            .then(function () {\r\n            if (!shouldEmit) {\r\n                setTimeout(function () { return emitter.fire(undefined); }, 0);\r\n            }\r\n            else {\r\n                emitter.fire(undefined);\r\n            }\r\n        });\r\n        shouldEmit = true;\r\n        return emitter.event;\r\n    }\r\n    Event.fromPromise = fromPromise;\r\n    function toPromise(event) {\r\n        return new Promise(function (c) { return once(event)(c); });\r\n    }\r\n    Event.toPromise = toPromise;\r\n})(Event || (Event = {}));\r\nvar _globalLeakWarningThreshold = -1;\r\nvar LeakageMonitor = /** @class */ (function () {\r\n    function LeakageMonitor(customThreshold, name) {\r\n        if (name === void 0) { name = Math.random().toString(18).slice(2, 5); }\r\n        this.customThreshold = customThreshold;\r\n        this.name = name;\r\n        this._warnCountdown = 0;\r\n    }\r\n    LeakageMonitor.prototype.dispose = function () {\r\n        if (this._stacks) {\r\n            this._stacks.clear();\r\n        }\r\n    };\r\n    LeakageMonitor.prototype.check = function (listenerCount) {\r\n        var _this = this;\r\n        var threshold = _globalLeakWarningThreshold;\r\n        if (typeof this.customThreshold === 'number') {\r\n            threshold = this.customThreshold;\r\n        }\r\n        if (threshold <= 0 || listenerCount < threshold) {\r\n            return undefined;\r\n        }\r\n        if (!this._stacks) {\r\n            this._stacks = new Map();\r\n        }\r\n        var stack = new Error().stack.split('\\n').slice(3).join('\\n');\r\n        var count = (this._stacks.get(stack) || 0);\r\n        this._stacks.set(stack, count + 1);\r\n        this._warnCountdown -= 1;\r\n        if (this._warnCountdown <= 0) {\r\n            // only warn on first exceed and then every time the limit\r\n            // is exceeded by 50% again\r\n            this._warnCountdown = threshold * 0.5;\r\n            // find most frequent listener and print warning\r\n            var topStack_1;\r\n            var topCount_1 = 0;\r\n            this._stacks.forEach(function (count, stack) {\r\n                if (!topStack_1 || topCount_1 < count) {\r\n                    topStack_1 = stack;\r\n                    topCount_1 = count;\r\n                }\r\n            });\r\n            console.warn(\"[\" + this.name + \"] potential listener LEAK detected, having \" + listenerCount + \" listeners already. MOST frequent listener (\" + topCount_1 + \"):\");\r\n            console.warn(topStack_1);\r\n        }\r\n        return function () {\r\n            var count = (_this._stacks.get(stack) || 0);\r\n            _this._stacks.set(stack, count - 1);\r\n        };\r\n    };\r\n    return LeakageMonitor;\r\n}());\r\n/**\r\n * The Emitter can be used to expose an Event to the public\r\n * to fire it from the insides.\r\n * Sample:\r\n    class Document {\r\n\r\n        private readonly _onDidChange = new Emitter<(value:string)=>any>();\r\n\r\n        public onDidChange = this._onDidChange.event;\r\n\r\n        // getter-style\r\n        // get onDidChange(): Event<(value:string)=>any> {\r\n        // \treturn this._onDidChange.event;\r\n        // }\r\n\r\n        private _doIt() {\r\n            //...\r\n            this._onDidChange.fire(value);\r\n        }\r\n    }\r\n */\r\nvar Emitter = /** @class */ (function () {\r\n    function Emitter(options) {\r\n        this._disposed = false;\r\n        this._options = options;\r\n        this._leakageMon = _globalLeakWarningThreshold > 0\r\n            ? new LeakageMonitor(this._options && this._options.leakWarningThreshold)\r\n            : undefined;\r\n    }\r\n    Object.defineProperty(Emitter.prototype, \"event\", {\r\n        /**\r\n         * For the public to allow to subscribe\r\n         * to events from this Emitter\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._event) {\r\n                this._event = function (listener, thisArgs, disposables) {\r\n                    if (!_this._listeners) {\r\n                        _this._listeners = new LinkedList();\r\n                    }\r\n                    var firstListener = _this._listeners.isEmpty();\r\n                    if (firstListener && _this._options && _this._options.onFirstListenerAdd) {\r\n                        _this._options.onFirstListenerAdd(_this);\r\n                    }\r\n                    var remove = _this._listeners.push(!thisArgs ? listener : [listener, thisArgs]);\r\n                    if (firstListener && _this._options && _this._options.onFirstListenerDidAdd) {\r\n                        _this._options.onFirstListenerDidAdd(_this);\r\n                    }\r\n                    if (_this._options && _this._options.onListenerDidAdd) {\r\n                        _this._options.onListenerDidAdd(_this, listener, thisArgs);\r\n                    }\r\n                    // check and record this emitter for potential leakage\r\n                    var removeMonitor;\r\n                    if (_this._leakageMon) {\r\n                        removeMonitor = _this._leakageMon.check(_this._listeners.size);\r\n                    }\r\n                    var result;\r\n                    result = {\r\n                        dispose: function () {\r\n                            if (removeMonitor) {\r\n                                removeMonitor();\r\n                            }\r\n                            result.dispose = Emitter._noop;\r\n                            if (!_this._disposed) {\r\n                                remove();\r\n                                if (_this._options && _this._options.onLastListenerRemove) {\r\n                                    var hasListeners = (_this._listeners && !_this._listeners.isEmpty());\r\n                                    if (!hasListeners) {\r\n                                        _this._options.onLastListenerRemove(_this);\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    };\r\n                    if (disposables instanceof DisposableStore) {\r\n                        disposables.add(result);\r\n                    }\r\n                    else if (Array.isArray(disposables)) {\r\n                        disposables.push(result);\r\n                    }\r\n                    return result;\r\n                };\r\n            }\r\n            return this._event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    Emitter.prototype.fire = function (event) {\r\n        if (this._listeners) {\r\n            // put all [listener,event]-pairs into delivery queue\r\n            // then emit all event. an inner/nested event might be\r\n            // the driver of this\r\n            if (!this._deliveryQueue) {\r\n                this._deliveryQueue = new LinkedList();\r\n            }\r\n            for (var iter = this._listeners.iterator(), e = iter.next(); !e.done; e = iter.next()) {\r\n                this._deliveryQueue.push([e.value, event]);\r\n            }\r\n            while (this._deliveryQueue.size > 0) {\r\n                var _a = this._deliveryQueue.shift(), listener = _a[0], event_1 = _a[1];\r\n                try {\r\n                    if (typeof listener === 'function') {\r\n                        listener.call(undefined, event_1);\r\n                    }\r\n                    else {\r\n                        listener[0].call(listener[1], event_1);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    onUnexpectedError(e);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Emitter.prototype.dispose = function () {\r\n        if (this._listeners) {\r\n            this._listeners.clear();\r\n        }\r\n        if (this._deliveryQueue) {\r\n            this._deliveryQueue.clear();\r\n        }\r\n        if (this._leakageMon) {\r\n            this._leakageMon.dispose();\r\n        }\r\n        this._disposed = true;\r\n    };\r\n    Emitter._noop = function () { };\r\n    return Emitter;\r\n}());\r\nexport { Emitter };\r\nvar PauseableEmitter = /** @class */ (function (_super) {\r\n    __extends(PauseableEmitter, _super);\r\n    function PauseableEmitter(options) {\r\n        var _this = _super.call(this, options) || this;\r\n        _this._isPaused = 0;\r\n        _this._eventQueue = new LinkedList();\r\n        _this._mergeFn = options && options.merge;\r\n        return _this;\r\n    }\r\n    PauseableEmitter.prototype.pause = function () {\r\n        this._isPaused++;\r\n    };\r\n    PauseableEmitter.prototype.resume = function () {\r\n        if (this._isPaused !== 0 && --this._isPaused === 0) {\r\n            if (this._mergeFn) {\r\n                // use the merge function to create a single composite\r\n                // event. make a copy in case firing pauses this emitter\r\n                var events = this._eventQueue.toArray();\r\n                this._eventQueue.clear();\r\n                _super.prototype.fire.call(this, this._mergeFn(events));\r\n            }\r\n            else {\r\n                // no merging, fire each event individually and test\r\n                // that this emitter isn't paused halfway through\r\n                while (!this._isPaused && this._eventQueue.size !== 0) {\r\n                    _super.prototype.fire.call(this, this._eventQueue.shift());\r\n                }\r\n            }\r\n        }\r\n    };\r\n    PauseableEmitter.prototype.fire = function (event) {\r\n        if (this._listeners) {\r\n            if (this._isPaused !== 0) {\r\n                this._eventQueue.push(event);\r\n            }\r\n            else {\r\n                _super.prototype.fire.call(this, event);\r\n            }\r\n        }\r\n    };\r\n    return PauseableEmitter;\r\n}(Emitter));\r\nexport { PauseableEmitter };\r\nvar EventMultiplexer = /** @class */ (function () {\r\n    function EventMultiplexer() {\r\n        var _this = this;\r\n        this.hasListeners = false;\r\n        this.events = [];\r\n        this.emitter = new Emitter({\r\n            onFirstListenerAdd: function () { return _this.onFirstListenerAdd(); },\r\n            onLastListenerRemove: function () { return _this.onLastListenerRemove(); }\r\n        });\r\n    }\r\n    Object.defineProperty(EventMultiplexer.prototype, \"event\", {\r\n        get: function () {\r\n            return this.emitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    EventMultiplexer.prototype.add = function (event) {\r\n        var _this = this;\r\n        var e = { event: event, listener: null };\r\n        this.events.push(e);\r\n        if (this.hasListeners) {\r\n            this.hook(e);\r\n        }\r\n        var dispose = function () {\r\n            if (_this.hasListeners) {\r\n                _this.unhook(e);\r\n            }\r\n            var idx = _this.events.indexOf(e);\r\n            _this.events.splice(idx, 1);\r\n        };\r\n        return toDisposable(onceFn(dispose));\r\n    };\r\n    EventMultiplexer.prototype.onFirstListenerAdd = function () {\r\n        var _this = this;\r\n        this.hasListeners = true;\r\n        this.events.forEach(function (e) { return _this.hook(e); });\r\n    };\r\n    EventMultiplexer.prototype.onLastListenerRemove = function () {\r\n        var _this = this;\r\n        this.hasListeners = false;\r\n        this.events.forEach(function (e) { return _this.unhook(e); });\r\n    };\r\n    EventMultiplexer.prototype.hook = function (e) {\r\n        var _this = this;\r\n        e.listener = e.event(function (r) { return _this.emitter.fire(r); });\r\n    };\r\n    EventMultiplexer.prototype.unhook = function (e) {\r\n        if (e.listener) {\r\n            e.listener.dispose();\r\n        }\r\n        e.listener = null;\r\n    };\r\n    EventMultiplexer.prototype.dispose = function () {\r\n        this.emitter.dispose();\r\n    };\r\n    return EventMultiplexer;\r\n}());\r\nexport { EventMultiplexer };\r\n/**\r\n * The EventBufferer is useful in situations in which you want\r\n * to delay firing your events during some code.\r\n * You can wrap that code and be sure that the event will not\r\n * be fired during that wrap.\r\n *\r\n * ```\r\n * const emitter: Emitter;\r\n * const delayer = new EventDelayer();\r\n * const delayedEvent = delayer.wrapEvent(emitter.event);\r\n *\r\n * delayedEvent(console.log);\r\n *\r\n * delayer.bufferEvents(() => {\r\n *   emitter.fire(); // event will not be fired yet\r\n * });\r\n *\r\n * // event will only be fired at this point\r\n * ```\r\n */\r\nvar EventBufferer = /** @class */ (function () {\r\n    function EventBufferer() {\r\n        this.buffers = [];\r\n    }\r\n    EventBufferer.prototype.wrapEvent = function (event) {\r\n        var _this = this;\r\n        return function (listener, thisArgs, disposables) {\r\n            return event(function (i) {\r\n                var buffer = _this.buffers[_this.buffers.length - 1];\r\n                if (buffer) {\r\n                    buffer.push(function () { return listener.call(thisArgs, i); });\r\n                }\r\n                else {\r\n                    listener.call(thisArgs, i);\r\n                }\r\n            }, undefined, disposables);\r\n        };\r\n    };\r\n    EventBufferer.prototype.bufferEvents = function (fn) {\r\n        var buffer = [];\r\n        this.buffers.push(buffer);\r\n        var r = fn();\r\n        this.buffers.pop();\r\n        buffer.forEach(function (flush) { return flush(); });\r\n        return r;\r\n    };\r\n    return EventBufferer;\r\n}());\r\nexport { EventBufferer };\r\n/**\r\n * A Relay is an event forwarder which functions as a replugabble event pipe.\r\n * Once created, you can connect an input event to it and it will simply forward\r\n * events from that input event through its own `event` property. The `input`\r\n * can be changed at any point in time.\r\n */\r\nvar Relay = /** @class */ (function () {\r\n    function Relay() {\r\n        var _this = this;\r\n        this.listening = false;\r\n        this.inputEvent = Event.None;\r\n        this.inputEventListener = Disposable.None;\r\n        this.emitter = new Emitter({\r\n            onFirstListenerDidAdd: function () {\r\n                _this.listening = true;\r\n                _this.inputEventListener = _this.inputEvent(_this.emitter.fire, _this.emitter);\r\n            },\r\n            onLastListenerRemove: function () {\r\n                _this.listening = false;\r\n                _this.inputEventListener.dispose();\r\n            }\r\n        });\r\n        this.event = this.emitter.event;\r\n    }\r\n    Object.defineProperty(Relay.prototype, \"input\", {\r\n        set: function (event) {\r\n            this.inputEvent = event;\r\n            if (this.listening) {\r\n                this.inputEventListener.dispose();\r\n                this.inputEventListener = event(this.emitter.fire, this.emitter);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Relay.prototype.dispose = function () {\r\n        this.inputEventListener.dispose();\r\n        this.emitter.dispose();\r\n    };\r\n    return Relay;\r\n}());\r\nexport { Relay };\r\n","import { startsWithIgnoreCase } from './strings.js';\r\nimport { sep, posix } from './path.js';\r\n/**\r\n * Takes a Windows OS path and changes backward slashes to forward slashes.\r\n * This should only be done for OS paths from Windows (or user provided paths potentially from Windows).\r\n * Using it on a Linux or MaxOS path might change it.\r\n */\r\nexport function toSlashes(osPath) {\r\n    return osPath.replace(/[\\\\/]/g, posix.sep);\r\n}\r\nexport function isEqualOrParent(path, candidate, ignoreCase, separator) {\r\n    if (separator === void 0) { separator = sep; }\r\n    if (path === candidate) {\r\n        return true;\r\n    }\r\n    if (!path || !candidate) {\r\n        return false;\r\n    }\r\n    if (candidate.length > path.length) {\r\n        return false;\r\n    }\r\n    if (ignoreCase) {\r\n        var beginsWith = startsWithIgnoreCase(path, candidate);\r\n        if (!beginsWith) {\r\n            return false;\r\n        }\r\n        if (candidate.length === path.length) {\r\n            return true; // same path, different casing\r\n        }\r\n        var sepOffset = candidate.length;\r\n        if (candidate.charAt(candidate.length - 1) === separator) {\r\n            sepOffset--; // adjust the expected sep offset in case our candidate already ends in separator character\r\n        }\r\n        return path.charAt(sepOffset) === separator;\r\n    }\r\n    if (candidate.charAt(candidate.length - 1) !== separator) {\r\n        candidate += separator;\r\n    }\r\n    return path.indexOf(candidate) === 0;\r\n}\r\nexport function isWindowsDriveLetter(char0) {\r\n    return char0 >= 65 /* A */ && char0 <= 90 /* Z */ || char0 >= 97 /* a */ && char0 <= 122 /* z */;\r\n}\r\n","/*\nThe MIT License (MIT)\n\nCopyright  2015 Nicolas Bevacqua\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nlet __insane_func;\n\n(function () { function r(e, n, t) { function o(i, f) { if (!n[i]) { if (!e[i]) { var c = \"function\" == typeof require && require; if (!f && c) return c(i, !0); if (u) return u(i, !0); var a = new Error(\"Cannot find module '\" + i + \"'\"); throw a.code = \"MODULE_NOT_FOUND\", a } var p = n[i] = { exports: {} }; e[i][0].call(p.exports, function (r) { var n = e[i][1][r]; return o(n || r) }, p, p.exports, r, e, n, t) } return n[i].exports } for (var u = \"function\" == typeof require && require, i = 0; i < t.length; i++)o(t[i]); return o } return r })()({\n\t1: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar toMap = require('./toMap');\n\t\tvar uris = ['background', 'base', 'cite', 'href', 'longdesc', 'src', 'usemap'];\n\n\t\tmodule.exports = {\n\t\t\turis: toMap(uris) // attributes that have an href and hence need to be sanitized\n\t\t};\n\n\t}, { \"./toMap\": 10 }], 2: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar defaults = {\n\t\t\tallowedAttributes: {\n\t\t\t\t'*': ['title', 'accesskey'],\n\t\t\t\ta: ['href', 'name', 'target', 'aria-label'],\n\t\t\t\tiframe: ['allowfullscreen', 'frameborder', 'src'],\n\t\t\t\timg: ['src', 'alt', 'title', 'aria-label']\n\t\t\t},\n\t\t\tallowedClasses: {},\n\t\t\tallowedSchemes: ['http', 'https', 'mailto'],\n\t\t\tallowedTags: [\n\t\t\t\t'a', 'abbr', 'article', 'b', 'blockquote', 'br', 'caption', 'code', 'del', 'details', 'div', 'em',\n\t\t\t\t'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'i', 'img', 'ins', 'kbd', 'li', 'main', 'mark',\n\t\t\t\t'ol', 'p', 'pre', 'section', 'span', 'strike', 'strong', 'sub', 'summary', 'sup', 'table',\n\t\t\t\t'tbody', 'td', 'th', 'thead', 'tr', 'u', 'ul'\n\t\t\t],\n\t\t\tfilter: null\n\t\t};\n\n\t\tmodule.exports = defaults;\n\n\t}, {}], 3: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar toMap = require('./toMap');\n\t\tvar voids = ['area', 'br', 'col', 'hr', 'img', 'wbr', 'input', 'base', 'basefont', 'link', 'meta'];\n\n\t\tmodule.exports = {\n\t\t\tvoids: toMap(voids)\n\t\t};\n\n\t}, { \"./toMap\": 10 }], 4: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar he = require('he');\n\t\tvar assign = require('assignment');\n\t\tvar parser = require('./parser');\n\t\tvar sanitizer = require('./sanitizer');\n\t\tvar defaults = require('./defaults');\n\n\t\tfunction insane(html, options, strict) {\n\t\t\tvar buffer = [];\n\t\t\tvar configuration = strict === true ? options : assign({}, defaults, options);\n\t\t\tvar handler = sanitizer(buffer, configuration);\n\n\t\t\tparser(html, handler);\n\n\t\t\treturn buffer.join('');\n\t\t}\n\n\t\tinsane.defaults = defaults;\n\t\tmodule.exports = insane;\n\t\t__insane_func = insane;\n\n\t}, { \"./defaults\": 2, \"./parser\": 7, \"./sanitizer\": 8, \"assignment\": 6, \"he\": 9 }], 5: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tmodule.exports = function lowercase(string) {\n\t\t\treturn typeof string === 'string' ? string.toLowerCase() : string;\n\t\t};\n\n\t}, {}], 6: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tfunction assignment(result) {\n\t\t\tvar stack = Array.prototype.slice.call(arguments, 1);\n\t\t\tvar item;\n\t\t\tvar key;\n\t\t\twhile (stack.length) {\n\t\t\t\titem = stack.shift();\n\t\t\t\tfor (key in item) {\n\t\t\t\t\tif (item.hasOwnProperty(key)) {\n\t\t\t\t\t\tif (Object.prototype.toString.call(result[key]) === '[object Object]') {\n\t\t\t\t\t\t\tresult[key] = assignment(result[key], item[key]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult[key] = item[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tmodule.exports = assignment;\n\n\t}, {}], 7: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar he = require('he');\n\t\tvar lowercase = require('./lowercase');\n\t\tvar attributes = require('./attributes');\n\t\tvar elements = require('./elements');\n\t\tvar rstart = /^<\\s*([\\w:-]+)((?:\\s+[\\w:-]+(?:\\s*=\\s*(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?)*)\\s*(\\/?)\\s*>/;\n\t\tvar rend = /^<\\s*\\/\\s*([\\w:-]+)[^>]*>/;\n\t\tvar rattrs = /([\\w:-]+)(?:\\s*=\\s*(?:(?:\"((?:[^\"])*)\")|(?:'((?:[^'])*)')|([^>\\s]+)))?/g;\n\t\tvar rtag = /^</;\n\t\tvar rtagend = /^<\\s*\\//;\n\n\t\tfunction createStack() {\n\t\t\tvar stack = [];\n\t\t\tstack.lastItem = function lastItem() {\n\t\t\t\treturn stack[stack.length - 1];\n\t\t\t};\n\t\t\treturn stack;\n\t\t}\n\n\t\tfunction parser(html, handler) {\n\t\t\tvar stack = createStack();\n\t\t\tvar last = html;\n\t\t\tvar chars;\n\n\t\t\twhile (html) {\n\t\t\t\tparsePart();\n\t\t\t}\n\t\t\tparseEndTag(); // clean up any remaining tags\n\n\t\t\tfunction parsePart() {\n\t\t\t\tchars = true;\n\t\t\t\tparseTag();\n\n\t\t\t\tvar same = html === last;\n\t\t\t\tlast = html;\n\n\t\t\t\tif (same) { // discard, because it's invalid\n\t\t\t\t\thtml = '';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseTag() {\n\t\t\t\tif (html.substr(0, 4) === '<!--') { // comments\n\t\t\t\t\tparseComment();\n\t\t\t\t} else if (rtagend.test(html)) {\n\t\t\t\t\tparseEdge(rend, parseEndTag);\n\t\t\t\t} else if (rtag.test(html)) {\n\t\t\t\t\tparseEdge(rstart, parseStartTag);\n\t\t\t\t}\n\t\t\t\tparseTagDecode();\n\t\t\t}\n\n\t\t\tfunction parseEdge(regex, parser) {\n\t\t\t\tvar match = html.match(regex);\n\t\t\t\tif (match) {\n\t\t\t\t\thtml = html.substring(match[0].length);\n\t\t\t\t\tmatch[0].replace(regex, parser);\n\t\t\t\t\tchars = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseComment() {\n\t\t\t\tvar index = html.indexOf('-->');\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tif (handler.comment) {\n\t\t\t\t\t\thandler.comment(html.substring(4, index));\n\t\t\t\t\t}\n\t\t\t\t\thtml = html.substring(index + 3);\n\t\t\t\t\tchars = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseTagDecode() {\n\t\t\t\tif (!chars) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar text;\n\t\t\t\tvar index = html.indexOf('<');\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\ttext = html.substring(0, index);\n\t\t\t\t\thtml = html.substring(index);\n\t\t\t\t} else {\n\t\t\t\t\ttext = html;\n\t\t\t\t\thtml = '';\n\t\t\t\t}\n\t\t\t\tif (handler.chars) {\n\t\t\t\t\thandler.chars(text);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseStartTag(tag, tagName, rest, unary) {\n\t\t\t\tvar attrs = {};\n\t\t\t\tvar low = lowercase(tagName);\n\t\t\t\tvar u = elements.voids[low] || !!unary;\n\n\t\t\t\trest.replace(rattrs, attrReplacer);\n\n\t\t\t\tif (!u) {\n\t\t\t\t\tstack.push(low);\n\t\t\t\t}\n\t\t\t\tif (handler.start) {\n\t\t\t\t\thandler.start(low, attrs, u);\n\t\t\t\t}\n\n\t\t\t\tfunction attrReplacer(match, name, doubleQuotedValue, singleQuotedValue, unquotedValue) {\n\t\t\t\t\tif (doubleQuotedValue === void 0 && singleQuotedValue === void 0 && unquotedValue === void 0) {\n\t\t\t\t\t\tattrs[name] = void 0; // attribute is like <button disabled></button>\n\t\t\t\t\t} else {\n\t\t\t\t\t\tattrs[name] = he.decode(doubleQuotedValue || singleQuotedValue || unquotedValue || '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseEndTag(tag, tagName) {\n\t\t\t\tvar i;\n\t\t\t\tvar pos = 0;\n\t\t\t\tvar low = lowercase(tagName);\n\t\t\t\tif (low) {\n\t\t\t\t\tfor (pos = stack.length - 1; pos >= 0; pos--) {\n\t\t\t\t\t\tif (stack[pos] === low) {\n\t\t\t\t\t\t\tbreak; // find the closest opened tag of the same type\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pos >= 0) {\n\t\t\t\t\tfor (i = stack.length - 1; i >= pos; i--) {\n\t\t\t\t\t\tif (handler.end) { // close all the open elements, up the stack\n\t\t\t\t\t\t\thandler.end(stack[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tstack.length = pos;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmodule.exports = parser;\n\n\t}, { \"./attributes\": 1, \"./elements\": 3, \"./lowercase\": 5, \"he\": 9 }], 8: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar he = require('he');\n\t\tvar lowercase = require('./lowercase');\n\t\tvar attributes = require('./attributes');\n\t\tvar elements = require('./elements');\n\n\t\tfunction sanitizer(buffer, options) {\n\t\t\tvar last;\n\t\t\tvar context;\n\t\t\tvar o = options || {};\n\n\t\t\treset();\n\n\t\t\treturn {\n\t\t\t\tstart: start,\n\t\t\t\tend: end,\n\t\t\t\tchars: chars\n\t\t\t};\n\n\t\t\tfunction out(value) {\n\t\t\t\tbuffer.push(value);\n\t\t\t}\n\n\t\t\tfunction start(tag, attrs, unary) {\n\t\t\t\tvar low = lowercase(tag);\n\n\t\t\t\tif (context.ignoring) {\n\t\t\t\t\tignore(low); return;\n\t\t\t\t}\n\t\t\t\tif ((o.allowedTags || []).indexOf(low) === -1) {\n\t\t\t\t\tignore(low); return;\n\t\t\t\t}\n\t\t\t\tif (o.filter && !o.filter({ tag: low, attrs: attrs })) {\n\t\t\t\t\tignore(low); return;\n\t\t\t\t}\n\n\t\t\t\tout('<');\n\t\t\t\tout(low);\n\t\t\t\tObject.keys(attrs).forEach(parse);\n\t\t\t\tout(unary ? '/>' : '>');\n\n\t\t\t\tfunction parse(key) {\n\t\t\t\t\tvar value = attrs[key];\n\t\t\t\t\tvar classesOk = (o.allowedClasses || {})[low] || [];\n\t\t\t\t\tvar attrsOk = (o.allowedAttributes || {})[low] || [];\n\t\t\t\t\tattrsOk = attrsOk.concat((o.allowedAttributes || {})['*'] || []);\n\t\t\t\t\tvar valid;\n\t\t\t\t\tvar lkey = lowercase(key);\n\t\t\t\t\tif (lkey === 'class' && attrsOk.indexOf(lkey) === -1) {\n\t\t\t\t\t\tvalue = value.split(' ').filter(isValidClass).join(' ').trim();\n\t\t\t\t\t\tvalid = value.length;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalid = attrsOk.indexOf(lkey) !== -1 && (attributes.uris[lkey] !== true || testUrl(value));\n\t\t\t\t\t}\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tout(' ');\n\t\t\t\t\t\tout(key);\n\t\t\t\t\t\tif (typeof value === 'string') {\n\t\t\t\t\t\t\tout('=\"');\n\t\t\t\t\t\t\tout(he.encode(value));\n\t\t\t\t\t\t\tout('\"');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfunction isValidClass(className) {\n\t\t\t\t\t\treturn classesOk && classesOk.indexOf(className) !== -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction end(tag) {\n\t\t\t\tvar low = lowercase(tag);\n\t\t\t\tvar allowed = (o.allowedTags || []).indexOf(low) !== -1;\n\t\t\t\tif (allowed) {\n\t\t\t\t\tif (context.ignoring === false) {\n\t\t\t\t\t\tout('</');\n\t\t\t\t\t\tout(low);\n\t\t\t\t\t\tout('>');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tunignore(low);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tunignore(low);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction testUrl(text) {\n\t\t\t\tvar start = text[0];\n\t\t\t\tif (start === '#' || start === '/') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar colon = text.indexOf(':');\n\t\t\t\tif (colon === -1) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar questionmark = text.indexOf('?');\n\t\t\t\tif (questionmark !== -1 && colon > questionmark) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar hash = text.indexOf('#');\n\t\t\t\tif (hash !== -1 && colon > hash) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn o.allowedSchemes.some(matches);\n\n\t\t\t\tfunction matches(scheme) {\n\t\t\t\t\treturn text.indexOf(scheme + ':') === 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction chars(text) {\n\t\t\t\tif (context.ignoring === false) {\n\t\t\t\t\tout(o.transformText ? o.transformText(text) : text);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction ignore(tag) {\n\t\t\t\tif (elements.voids[tag]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (context.ignoring === false) {\n\t\t\t\t\tcontext = { ignoring: tag, depth: 1 };\n\t\t\t\t} else if (context.ignoring === tag) {\n\t\t\t\t\tcontext.depth++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction unignore(tag) {\n\t\t\t\tif (context.ignoring === tag) {\n\t\t\t\t\tif (--context.depth <= 0) {\n\t\t\t\t\t\treset();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction reset() {\n\t\t\t\tcontext = { ignoring: false, depth: 0 };\n\t\t\t}\n\t\t}\n\n\t\tmodule.exports = sanitizer;\n\n\t}, { \"./attributes\": 1, \"./elements\": 3, \"./lowercase\": 5, \"he\": 9 }], 9: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar escapes = {\n\t\t\t'&': '&amp;',\n\t\t\t'<': '&lt;',\n\t\t\t'>': '&gt;',\n\t\t\t'\"': '&quot;',\n\t\t\t\"'\": '&#39;'\n\t\t};\n\t\tvar unescapes = {\n\t\t\t'&amp;': '&',\n\t\t\t'&lt;': '<',\n\t\t\t'&gt;': '>',\n\t\t\t'&quot;': '\"',\n\t\t\t'&#39;': \"'\"\n\t\t};\n\t\tvar rescaped = /(&amp;|&lt;|&gt;|&quot;|&#39;)/g;\n\t\tvar runescaped = /[&<>\"']/g;\n\n\t\tfunction escapeHtmlChar(match) {\n\t\t\treturn escapes[match];\n\t\t}\n\t\tfunction unescapeHtmlChar(match) {\n\t\t\treturn unescapes[match];\n\t\t}\n\n\t\tfunction escapeHtml(text) {\n\t\t\treturn text == null ? '' : String(text).replace(runescaped, escapeHtmlChar);\n\t\t}\n\n\t\tfunction unescapeHtml(html) {\n\t\t\treturn html == null ? '' : String(html).replace(rescaped, unescapeHtmlChar);\n\t\t}\n\n\t\tescapeHtml.options = unescapeHtml.options = {};\n\n\t\tmodule.exports = {\n\t\t\tencode: escapeHtml,\n\t\t\tescape: escapeHtml,\n\t\t\tdecode: unescapeHtml,\n\t\t\tunescape: unescapeHtml,\n\t\t\tversion: '1.0.0-browser'\n\t\t};\n\n\t}, {}], 10: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tfunction toMap(list) {\n\t\t\treturn list.reduce(asKey, {});\n\t\t}\n\n\t\tfunction asKey(accumulator, item) {\n\t\t\taccumulator[item] = true;\n\t\t\treturn accumulator;\n\t\t}\n\n\t\tmodule.exports = toMap;\n\n\t}, {}]\n}, {}, [4]);\n\n// ESM-comment-begin\n// define(function() { return { insane: __insane_func }; });\n// ESM-comment-end\n\n// ESM-uncomment-begin\nexport var insane = __insane_func;\n// ESM-uncomment-end\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { ArrayNavigator } from './iterator.js';\r\nvar HistoryNavigator = /** @class */ (function () {\r\n    function HistoryNavigator(history, limit) {\r\n        if (history === void 0) { history = []; }\r\n        if (limit === void 0) { limit = 10; }\r\n        this._initialize(history);\r\n        this._limit = limit;\r\n        this._onChange();\r\n    }\r\n    HistoryNavigator.prototype.add = function (t) {\r\n        this._history.delete(t);\r\n        this._history.add(t);\r\n        this._onChange();\r\n    };\r\n    HistoryNavigator.prototype.next = function () {\r\n        return this._navigator.next();\r\n    };\r\n    HistoryNavigator.prototype.previous = function () {\r\n        return this._navigator.previous();\r\n    };\r\n    HistoryNavigator.prototype.current = function () {\r\n        return this._navigator.current();\r\n    };\r\n    HistoryNavigator.prototype.parent = function () {\r\n        return null;\r\n    };\r\n    HistoryNavigator.prototype.first = function () {\r\n        return this._navigator.first();\r\n    };\r\n    HistoryNavigator.prototype.last = function () {\r\n        return this._navigator.last();\r\n    };\r\n    HistoryNavigator.prototype.has = function (t) {\r\n        return this._history.has(t);\r\n    };\r\n    HistoryNavigator.prototype._onChange = function () {\r\n        this._reduceToLimit();\r\n        var elements = this._elements;\r\n        this._navigator = new ArrayNavigator(elements, 0, elements.length, elements.length);\r\n    };\r\n    HistoryNavigator.prototype._reduceToLimit = function () {\r\n        var data = this._elements;\r\n        if (data.length > this._limit) {\r\n            this._initialize(data.slice(data.length - this._limit));\r\n        }\r\n    };\r\n    HistoryNavigator.prototype._initialize = function (history) {\r\n        this._history = new Set();\r\n        for (var _i = 0, history_1 = history; _i < history_1.length; _i++) {\r\n            var entry = history_1[_i];\r\n            this._history.add(entry);\r\n        }\r\n    };\r\n    Object.defineProperty(HistoryNavigator.prototype, \"_elements\", {\r\n        get: function () {\r\n            var elements = [];\r\n            this._history.forEach(function (e) { return elements.push(e); });\r\n            return elements;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return HistoryNavigator;\r\n}());\r\nexport { HistoryNavigator };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar escapeCodiconsRegex = /(\\\\)?\\$\\([a-z0-9\\-]+?(?:~[a-z0-9\\-]*?)?\\)/gi;\r\nexport function escapeCodicons(text) {\r\n    return text.replace(escapeCodiconsRegex, function (match, escaped) { return escaped ? match : \"\\\\\" + match; });\r\n}\r\nvar markdownEscapedCodiconsRegex = /\\\\\\$\\([a-z0-9\\-]+?(?:~[a-z0-9\\-]*?)?\\)/gi;\r\nexport function markdownEscapeEscapedCodicons(text) {\r\n    // Need to add an extra \\ for escaping in markdown\r\n    return text.replace(markdownEscapedCodiconsRegex, function (match) { return \"\\\\\" + match; });\r\n}\r\nvar renderCodiconsRegex = /(\\\\)?\\$\\((([a-z0-9\\-]+?)(?:~([a-z0-9\\-]*?))?)\\)/gi;\r\nexport function renderCodicons(text) {\r\n    return text.replace(renderCodiconsRegex, function (_, escaped, codicon, name, animation) {\r\n        return escaped\r\n            ? \"$(\" + codicon + \")\"\r\n            : \"<span class=\\\"codicon codicon-\" + name + (animation ? \" codicon-animation-\" + animation : '') + \"\\\"></span>\";\r\n    });\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { CancellationTokenSource } from './cancellation.js';\r\nimport * as errors from './errors.js';\r\nimport { toDisposable } from './lifecycle.js';\r\nexport function isThenable(obj) {\r\n    return obj && typeof obj.then === 'function';\r\n}\r\nexport function createCancelablePromise(callback) {\r\n    var source = new CancellationTokenSource();\r\n    var thenable = callback(source.token);\r\n    var promise = new Promise(function (resolve, reject) {\r\n        source.token.onCancellationRequested(function () {\r\n            reject(errors.canceled());\r\n        });\r\n        Promise.resolve(thenable).then(function (value) {\r\n            source.dispose();\r\n            resolve(value);\r\n        }, function (err) {\r\n            source.dispose();\r\n            reject(err);\r\n        });\r\n    });\r\n    return new /** @class */ (function () {\r\n        function class_1() {\r\n        }\r\n        class_1.prototype.cancel = function () {\r\n            source.cancel();\r\n        };\r\n        class_1.prototype.then = function (resolve, reject) {\r\n            return promise.then(resolve, reject);\r\n        };\r\n        class_1.prototype.catch = function (reject) {\r\n            return this.then(undefined, reject);\r\n        };\r\n        class_1.prototype.finally = function (onfinally) {\r\n            return promise.finally(onfinally);\r\n        };\r\n        return class_1;\r\n    }());\r\n}\r\nexport function raceCancellation(promise, token, defaultValue) {\r\n    return Promise.race([promise, new Promise(function (resolve) { return token.onCancellationRequested(function () { return resolve(defaultValue); }); })]);\r\n}\r\n/**\r\n * A helper to delay execution of a task that is being requested often.\r\n *\r\n * Following the throttler, now imagine the mail man wants to optimize the number of\r\n * trips proactively. The trip itself can be long, so he decides not to make the trip\r\n * as soon as a letter is submitted. Instead he waits a while, in case more\r\n * letters are submitted. After said waiting period, if no letters were submitted, he\r\n * decides to make the trip. Imagine that N more letters were submitted after the first\r\n * one, all within a short period of time between each other. Even though N+1\r\n * submissions occurred, only 1 delivery was made.\r\n *\r\n * The delayer offers this behavior via the trigger() method, into which both the task\r\n * to be executed and the waiting period (delay) must be passed in as arguments. Following\r\n * the example:\r\n *\r\n * \t\tconst delayer = new Delayer(WAITING_PERIOD);\r\n * \t\tconst letters = [];\r\n *\r\n * \t\tfunction letterReceived(l) {\r\n * \t\t\tletters.push(l);\r\n * \t\t\tdelayer.trigger(() => { return makeTheTrip(); });\r\n * \t\t}\r\n */\r\nvar Delayer = /** @class */ (function () {\r\n    function Delayer(defaultDelay) {\r\n        this.defaultDelay = defaultDelay;\r\n        this.timeout = null;\r\n        this.completionPromise = null;\r\n        this.doResolve = null;\r\n        this.doReject = null;\r\n        this.task = null;\r\n    }\r\n    Delayer.prototype.trigger = function (task, delay) {\r\n        var _this = this;\r\n        if (delay === void 0) { delay = this.defaultDelay; }\r\n        this.task = task;\r\n        this.cancelTimeout();\r\n        if (!this.completionPromise) {\r\n            this.completionPromise = new Promise(function (c, e) {\r\n                _this.doResolve = c;\r\n                _this.doReject = e;\r\n            }).then(function () {\r\n                _this.completionPromise = null;\r\n                _this.doResolve = null;\r\n                if (_this.task) {\r\n                    var task_1 = _this.task;\r\n                    _this.task = null;\r\n                    return task_1();\r\n                }\r\n                return undefined;\r\n            });\r\n        }\r\n        this.timeout = setTimeout(function () {\r\n            _this.timeout = null;\r\n            if (_this.doResolve) {\r\n                _this.doResolve(null);\r\n            }\r\n        }, delay);\r\n        return this.completionPromise;\r\n    };\r\n    Delayer.prototype.isTriggered = function () {\r\n        return this.timeout !== null;\r\n    };\r\n    Delayer.prototype.cancel = function () {\r\n        this.cancelTimeout();\r\n        if (this.completionPromise) {\r\n            if (this.doReject) {\r\n                this.doReject(errors.canceled());\r\n            }\r\n            this.completionPromise = null;\r\n        }\r\n    };\r\n    Delayer.prototype.cancelTimeout = function () {\r\n        if (this.timeout !== null) {\r\n            clearTimeout(this.timeout);\r\n            this.timeout = null;\r\n        }\r\n    };\r\n    Delayer.prototype.dispose = function () {\r\n        this.cancelTimeout();\r\n    };\r\n    return Delayer;\r\n}());\r\nexport { Delayer };\r\nexport function timeout(millis, token) {\r\n    if (!token) {\r\n        return createCancelablePromise(function (token) { return timeout(millis, token); });\r\n    }\r\n    return new Promise(function (resolve, reject) {\r\n        var handle = setTimeout(resolve, millis);\r\n        token.onCancellationRequested(function () {\r\n            clearTimeout(handle);\r\n            reject(errors.canceled());\r\n        });\r\n    });\r\n}\r\nexport function disposableTimeout(handler, timeout) {\r\n    if (timeout === void 0) { timeout = 0; }\r\n    var timer = setTimeout(handler, timeout);\r\n    return toDisposable(function () { return clearTimeout(timer); });\r\n}\r\nexport function first(promiseFactories, shouldStop, defaultValue) {\r\n    if (shouldStop === void 0) { shouldStop = function (t) { return !!t; }; }\r\n    if (defaultValue === void 0) { defaultValue = null; }\r\n    var index = 0;\r\n    var len = promiseFactories.length;\r\n    var loop = function () {\r\n        if (index >= len) {\r\n            return Promise.resolve(defaultValue);\r\n        }\r\n        var factory = promiseFactories[index++];\r\n        var promise = Promise.resolve(factory());\r\n        return promise.then(function (result) {\r\n            if (shouldStop(result)) {\r\n                return Promise.resolve(result);\r\n            }\r\n            return loop();\r\n        });\r\n    };\r\n    return loop();\r\n}\r\nvar TimeoutTimer = /** @class */ (function () {\r\n    function TimeoutTimer(runner, timeout) {\r\n        this._token = -1;\r\n        if (typeof runner === 'function' && typeof timeout === 'number') {\r\n            this.setIfNotSet(runner, timeout);\r\n        }\r\n    }\r\n    TimeoutTimer.prototype.dispose = function () {\r\n        this.cancel();\r\n    };\r\n    TimeoutTimer.prototype.cancel = function () {\r\n        if (this._token !== -1) {\r\n            clearTimeout(this._token);\r\n            this._token = -1;\r\n        }\r\n    };\r\n    TimeoutTimer.prototype.cancelAndSet = function (runner, timeout) {\r\n        var _this = this;\r\n        this.cancel();\r\n        this._token = setTimeout(function () {\r\n            _this._token = -1;\r\n            runner();\r\n        }, timeout);\r\n    };\r\n    TimeoutTimer.prototype.setIfNotSet = function (runner, timeout) {\r\n        var _this = this;\r\n        if (this._token !== -1) {\r\n            // timer is already set\r\n            return;\r\n        }\r\n        this._token = setTimeout(function () {\r\n            _this._token = -1;\r\n            runner();\r\n        }, timeout);\r\n    };\r\n    return TimeoutTimer;\r\n}());\r\nexport { TimeoutTimer };\r\nvar IntervalTimer = /** @class */ (function () {\r\n    function IntervalTimer() {\r\n        this._token = -1;\r\n    }\r\n    IntervalTimer.prototype.dispose = function () {\r\n        this.cancel();\r\n    };\r\n    IntervalTimer.prototype.cancel = function () {\r\n        if (this._token !== -1) {\r\n            clearInterval(this._token);\r\n            this._token = -1;\r\n        }\r\n    };\r\n    IntervalTimer.prototype.cancelAndSet = function (runner, interval) {\r\n        this.cancel();\r\n        this._token = setInterval(function () {\r\n            runner();\r\n        }, interval);\r\n    };\r\n    return IntervalTimer;\r\n}());\r\nexport { IntervalTimer };\r\nvar RunOnceScheduler = /** @class */ (function () {\r\n    function RunOnceScheduler(runner, timeout) {\r\n        this.timeoutToken = -1;\r\n        this.runner = runner;\r\n        this.timeout = timeout;\r\n        this.timeoutHandler = this.onTimeout.bind(this);\r\n    }\r\n    /**\r\n     * Dispose RunOnceScheduler\r\n     */\r\n    RunOnceScheduler.prototype.dispose = function () {\r\n        this.cancel();\r\n        this.runner = null;\r\n    };\r\n    /**\r\n     * Cancel current scheduled runner (if any).\r\n     */\r\n    RunOnceScheduler.prototype.cancel = function () {\r\n        if (this.isScheduled()) {\r\n            clearTimeout(this.timeoutToken);\r\n            this.timeoutToken = -1;\r\n        }\r\n    };\r\n    /**\r\n     * Cancel previous runner (if any) & schedule a new runner.\r\n     */\r\n    RunOnceScheduler.prototype.schedule = function (delay) {\r\n        if (delay === void 0) { delay = this.timeout; }\r\n        this.cancel();\r\n        this.timeoutToken = setTimeout(this.timeoutHandler, delay);\r\n    };\r\n    /**\r\n     * Returns true if scheduled.\r\n     */\r\n    RunOnceScheduler.prototype.isScheduled = function () {\r\n        return this.timeoutToken !== -1;\r\n    };\r\n    RunOnceScheduler.prototype.onTimeout = function () {\r\n        this.timeoutToken = -1;\r\n        if (this.runner) {\r\n            this.doRun();\r\n        }\r\n    };\r\n    RunOnceScheduler.prototype.doRun = function () {\r\n        if (this.runner) {\r\n            this.runner();\r\n        }\r\n    };\r\n    return RunOnceScheduler;\r\n}());\r\nexport { RunOnceScheduler };\r\n/**\r\n * Execute the callback the next time the browser is idle\r\n */\r\nexport var runWhenIdle;\r\n(function () {\r\n    if (typeof requestIdleCallback !== 'function' || typeof cancelIdleCallback !== 'function') {\r\n        var dummyIdle_1 = Object.freeze({\r\n            didTimeout: true,\r\n            timeRemaining: function () { return 15; }\r\n        });\r\n        runWhenIdle = function (runner) {\r\n            var handle = setTimeout(function () { return runner(dummyIdle_1); });\r\n            var disposed = false;\r\n            return {\r\n                dispose: function () {\r\n                    if (disposed) {\r\n                        return;\r\n                    }\r\n                    disposed = true;\r\n                    clearTimeout(handle);\r\n                }\r\n            };\r\n        };\r\n    }\r\n    else {\r\n        runWhenIdle = function (runner, timeout) {\r\n            var handle = requestIdleCallback(runner, typeof timeout === 'number' ? { timeout: timeout } : undefined);\r\n            var disposed = false;\r\n            return {\r\n                dispose: function () {\r\n                    if (disposed) {\r\n                        return;\r\n                    }\r\n                    disposed = true;\r\n                    cancelIdleCallback(handle);\r\n                }\r\n            };\r\n        };\r\n    }\r\n})();\r\n/**\r\n * An implementation of the \"idle-until-urgent\"-strategy as introduced\r\n * here: https://philipwalton.com/articles/idle-until-urgent/\r\n */\r\nvar IdleValue = /** @class */ (function () {\r\n    function IdleValue(executor) {\r\n        var _this = this;\r\n        this._didRun = false;\r\n        this._executor = function () {\r\n            try {\r\n                _this._value = executor();\r\n            }\r\n            catch (err) {\r\n                _this._error = err;\r\n            }\r\n            finally {\r\n                _this._didRun = true;\r\n            }\r\n        };\r\n        this._handle = runWhenIdle(function () { return _this._executor(); });\r\n    }\r\n    IdleValue.prototype.dispose = function () {\r\n        this._handle.dispose();\r\n    };\r\n    IdleValue.prototype.getValue = function () {\r\n        if (!this._didRun) {\r\n            this._handle.dispose();\r\n            this._executor();\r\n        }\r\n        if (this._error) {\r\n            throw this._error;\r\n        }\r\n        return this._value;\r\n    };\r\n    return IdleValue;\r\n}());\r\nexport { IdleValue };\r\n","var memoizeId = 0;\r\nexport function createMemoizer() {\r\n    var memoizeKeyPrefix = \"$memoize\" + memoizeId++;\r\n    var self = undefined;\r\n    var result = function memoize(target, key, descriptor) {\r\n        var fnKey = null;\r\n        var fn = null;\r\n        if (typeof descriptor.value === 'function') {\r\n            fnKey = 'value';\r\n            fn = descriptor.value;\r\n            if (fn.length !== 0) {\r\n                console.warn('Memoize should only be used in functions with zero parameters');\r\n            }\r\n        }\r\n        else if (typeof descriptor.get === 'function') {\r\n            fnKey = 'get';\r\n            fn = descriptor.get;\r\n        }\r\n        if (!fn) {\r\n            throw new Error('not supported');\r\n        }\r\n        var memoizeKey = memoizeKeyPrefix + \":\" + key;\r\n        descriptor[fnKey] = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            self = this;\r\n            if (!this.hasOwnProperty(memoizeKey)) {\r\n                Object.defineProperty(this, memoizeKey, {\r\n                    configurable: true,\r\n                    enumerable: false,\r\n                    writable: true,\r\n                    value: fn.apply(this, args)\r\n                });\r\n            }\r\n            return this[memoizeKey];\r\n        };\r\n    };\r\n    result.clear = function () {\r\n        if (typeof self === 'undefined') {\r\n            return;\r\n        }\r\n        Object.getOwnPropertyNames(self).forEach(function (property) {\r\n            if (property.indexOf(memoizeKeyPrefix) === 0) {\r\n                delete self[property];\r\n            }\r\n        });\r\n    };\r\n    return result;\r\n}\r\nexport function memoize(target, key, descriptor) {\r\n    return createMemoizer()(target, key, descriptor);\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { equals } from './arrays.js';\r\nimport { escapeCodicons } from './codicons.js';\r\nvar MarkdownString = /** @class */ (function () {\r\n    function MarkdownString(_value, isTrustedOrOptions) {\r\n        if (_value === void 0) { _value = ''; }\r\n        if (isTrustedOrOptions === void 0) { isTrustedOrOptions = false; }\r\n        var _a, _b;\r\n        this._value = _value;\r\n        if (typeof isTrustedOrOptions === 'boolean') {\r\n            this._isTrusted = isTrustedOrOptions;\r\n            this._supportThemeIcons = false;\r\n        }\r\n        else {\r\n            this._isTrusted = (_a = isTrustedOrOptions.isTrusted) !== null && _a !== void 0 ? _a : false;\r\n            this._supportThemeIcons = (_b = isTrustedOrOptions.supportThemeIcons) !== null && _b !== void 0 ? _b : false;\r\n        }\r\n    }\r\n    Object.defineProperty(MarkdownString.prototype, \"value\", {\r\n        get: function () { return this._value; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MarkdownString.prototype, \"isTrusted\", {\r\n        get: function () { return this._isTrusted; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MarkdownString.prototype, \"supportThemeIcons\", {\r\n        get: function () { return this._supportThemeIcons; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MarkdownString.prototype.appendText = function (value) {\r\n        // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n        this._value += (this._supportThemeIcons ? escapeCodicons(value) : value)\r\n            .replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&')\r\n            .replace('\\n', '\\n\\n');\r\n        return this;\r\n    };\r\n    MarkdownString.prototype.appendMarkdown = function (value) {\r\n        this._value += value;\r\n        return this;\r\n    };\r\n    MarkdownString.prototype.appendCodeblock = function (langId, code) {\r\n        this._value += '\\n```';\r\n        this._value += langId;\r\n        this._value += '\\n';\r\n        this._value += code;\r\n        this._value += '\\n```\\n';\r\n        return this;\r\n    };\r\n    return MarkdownString;\r\n}());\r\nexport { MarkdownString };\r\nexport function isEmptyMarkdownString(oneOrMany) {\r\n    if (isMarkdownString(oneOrMany)) {\r\n        return !oneOrMany.value;\r\n    }\r\n    else if (Array.isArray(oneOrMany)) {\r\n        return oneOrMany.every(isEmptyMarkdownString);\r\n    }\r\n    else {\r\n        return true;\r\n    }\r\n}\r\nexport function isMarkdownString(thing) {\r\n    if (thing instanceof MarkdownString) {\r\n        return true;\r\n    }\r\n    else if (thing && typeof thing === 'object') {\r\n        return typeof thing.value === 'string'\r\n            && (typeof thing.isTrusted === 'boolean' || thing.isTrusted === undefined)\r\n            && (typeof thing.supportThemeIcons === 'boolean' || thing.supportThemeIcons === undefined);\r\n    }\r\n    return false;\r\n}\r\nexport function markedStringsEquals(a, b) {\r\n    if (!a && !b) {\r\n        return true;\r\n    }\r\n    else if (!a || !b) {\r\n        return false;\r\n    }\r\n    else if (Array.isArray(a) && Array.isArray(b)) {\r\n        return equals(a, b, markdownStringEqual);\r\n    }\r\n    else if (isMarkdownString(a) && isMarkdownString(b)) {\r\n        return markdownStringEqual(a, b);\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\nfunction markdownStringEqual(a, b) {\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    else if (!a || !b) {\r\n        return false;\r\n    }\r\n    else {\r\n        return a.value === b.value && a.isTrusted === b.isTrusted && a.supportThemeIcons === b.supportThemeIcons;\r\n    }\r\n}\r\nexport function removeMarkdownEscapes(text) {\r\n    if (!text) {\r\n        return text;\r\n    }\r\n    return text.replace(/\\\\([\\\\`*_{}[\\]()#+\\-.!])/g, '$1');\r\n}\r\nexport function parseHrefAndDimensions(href) {\r\n    var dimensions = [];\r\n    var splitted = href.split('|').map(function (s) { return s.trim(); });\r\n    href = splitted[0];\r\n    var parameters = splitted[1];\r\n    if (parameters) {\r\n        var heightFromParams = /height=(\\d+)/.exec(parameters);\r\n        var widthFromParams = /width=(\\d+)/.exec(parameters);\r\n        var height = heightFromParams ? heightFromParams[1] : '';\r\n        var width = widthFromParams ? widthFromParams[1] : '';\r\n        var widthIsFinite = isFinite(parseInt(width));\r\n        var heightIsFinite = isFinite(parseInt(height));\r\n        if (widthIsFinite) {\r\n            dimensions.push(\"width=\\\"\" + width + \"\\\"\");\r\n        }\r\n        if (heightIsFinite) {\r\n            dimensions.push(\"height=\\\"\" + height + \"\\\"\");\r\n        }\r\n    }\r\n    return { href: href, dimensions: dimensions };\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { LRUCache } from './map.js';\r\nimport * as strings from './strings.js';\r\n// Combined filters\r\n/**\r\n * @returns A filter which combines the provided set\r\n * of filters with an or. The *first* filters that\r\n * matches defined the return value of the returned\r\n * filter.\r\n */\r\nexport function or() {\r\n    var filter = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        filter[_i] = arguments[_i];\r\n    }\r\n    return function (word, wordToMatchAgainst) {\r\n        for (var i = 0, len = filter.length; i < len; i++) {\r\n            var match = filter[i](word, wordToMatchAgainst);\r\n            if (match) {\r\n                return match;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n}\r\nexport var matchesPrefix = _matchesPrefix.bind(undefined, true);\r\nfunction _matchesPrefix(ignoreCase, word, wordToMatchAgainst) {\r\n    if (!wordToMatchAgainst || wordToMatchAgainst.length < word.length) {\r\n        return null;\r\n    }\r\n    var matches;\r\n    if (ignoreCase) {\r\n        matches = strings.startsWithIgnoreCase(wordToMatchAgainst, word);\r\n    }\r\n    else {\r\n        matches = wordToMatchAgainst.indexOf(word) === 0;\r\n    }\r\n    if (!matches) {\r\n        return null;\r\n    }\r\n    return word.length > 0 ? [{ start: 0, end: word.length }] : [];\r\n}\r\n// Contiguous Substring\r\nexport function matchesContiguousSubString(word, wordToMatchAgainst) {\r\n    var index = wordToMatchAgainst.toLowerCase().indexOf(word.toLowerCase());\r\n    if (index === -1) {\r\n        return null;\r\n    }\r\n    return [{ start: index, end: index + word.length }];\r\n}\r\n// Substring\r\nexport function matchesSubString(word, wordToMatchAgainst) {\r\n    return _matchesSubString(word.toLowerCase(), wordToMatchAgainst.toLowerCase(), 0, 0);\r\n}\r\nfunction _matchesSubString(word, wordToMatchAgainst, i, j) {\r\n    if (i === word.length) {\r\n        return [];\r\n    }\r\n    else if (j === wordToMatchAgainst.length) {\r\n        return null;\r\n    }\r\n    else {\r\n        if (word[i] === wordToMatchAgainst[j]) {\r\n            var result = null;\r\n            if (result = _matchesSubString(word, wordToMatchAgainst, i + 1, j + 1)) {\r\n                return join({ start: j, end: j + 1 }, result);\r\n            }\r\n            return null;\r\n        }\r\n        return _matchesSubString(word, wordToMatchAgainst, i, j + 1);\r\n    }\r\n}\r\n// CamelCase\r\nfunction isLower(code) {\r\n    return 97 /* a */ <= code && code <= 122 /* z */;\r\n}\r\nexport function isUpper(code) {\r\n    return 65 /* A */ <= code && code <= 90 /* Z */;\r\n}\r\nfunction isNumber(code) {\r\n    return 48 /* Digit0 */ <= code && code <= 57 /* Digit9 */;\r\n}\r\nfunction isWhitespace(code) {\r\n    return (code === 32 /* Space */\r\n        || code === 9 /* Tab */\r\n        || code === 10 /* LineFeed */\r\n        || code === 13 /* CarriageReturn */);\r\n}\r\nvar wordSeparators = new Set();\r\n'`~!@#$%^&*()-=+[{]}\\\\|;:\\'\",.<>/?'\r\n    .split('')\r\n    .forEach(function (s) { return wordSeparators.add(s.charCodeAt(0)); });\r\nfunction isAlphanumeric(code) {\r\n    return isLower(code) || isUpper(code) || isNumber(code);\r\n}\r\nfunction join(head, tail) {\r\n    if (tail.length === 0) {\r\n        tail = [head];\r\n    }\r\n    else if (head.end === tail[0].start) {\r\n        tail[0].start = head.start;\r\n    }\r\n    else {\r\n        tail.unshift(head);\r\n    }\r\n    return tail;\r\n}\r\nfunction nextAnchor(camelCaseWord, start) {\r\n    for (var i = start; i < camelCaseWord.length; i++) {\r\n        var c = camelCaseWord.charCodeAt(i);\r\n        if (isUpper(c) || isNumber(c) || (i > 0 && !isAlphanumeric(camelCaseWord.charCodeAt(i - 1)))) {\r\n            return i;\r\n        }\r\n    }\r\n    return camelCaseWord.length;\r\n}\r\nfunction _matchesCamelCase(word, camelCaseWord, i, j) {\r\n    if (i === word.length) {\r\n        return [];\r\n    }\r\n    else if (j === camelCaseWord.length) {\r\n        return null;\r\n    }\r\n    else if (word[i] !== camelCaseWord[j].toLowerCase()) {\r\n        return null;\r\n    }\r\n    else {\r\n        var result = null;\r\n        var nextUpperIndex = j + 1;\r\n        result = _matchesCamelCase(word, camelCaseWord, i + 1, j + 1);\r\n        while (!result && (nextUpperIndex = nextAnchor(camelCaseWord, nextUpperIndex)) < camelCaseWord.length) {\r\n            result = _matchesCamelCase(word, camelCaseWord, i + 1, nextUpperIndex);\r\n            nextUpperIndex++;\r\n        }\r\n        return result === null ? null : join({ start: j, end: j + 1 }, result);\r\n    }\r\n}\r\n// Heuristic to avoid computing camel case matcher for words that don't\r\n// look like camelCaseWords.\r\nfunction analyzeCamelCaseWord(word) {\r\n    var upper = 0, lower = 0, alpha = 0, numeric = 0, code = 0;\r\n    for (var i = 0; i < word.length; i++) {\r\n        code = word.charCodeAt(i);\r\n        if (isUpper(code)) {\r\n            upper++;\r\n        }\r\n        if (isLower(code)) {\r\n            lower++;\r\n        }\r\n        if (isAlphanumeric(code)) {\r\n            alpha++;\r\n        }\r\n        if (isNumber(code)) {\r\n            numeric++;\r\n        }\r\n    }\r\n    var upperPercent = upper / word.length;\r\n    var lowerPercent = lower / word.length;\r\n    var alphaPercent = alpha / word.length;\r\n    var numericPercent = numeric / word.length;\r\n    return { upperPercent: upperPercent, lowerPercent: lowerPercent, alphaPercent: alphaPercent, numericPercent: numericPercent };\r\n}\r\nfunction isUpperCaseWord(analysis) {\r\n    var upperPercent = analysis.upperPercent, lowerPercent = analysis.lowerPercent;\r\n    return lowerPercent === 0 && upperPercent > 0.6;\r\n}\r\nfunction isCamelCaseWord(analysis) {\r\n    var upperPercent = analysis.upperPercent, lowerPercent = analysis.lowerPercent, alphaPercent = analysis.alphaPercent, numericPercent = analysis.numericPercent;\r\n    return lowerPercent > 0.2 && upperPercent < 0.8 && alphaPercent > 0.6 && numericPercent < 0.2;\r\n}\r\n// Heuristic to avoid computing camel case matcher for words that don't\r\n// look like camel case patterns.\r\nfunction isCamelCasePattern(word) {\r\n    var upper = 0, lower = 0, code = 0, whitespace = 0;\r\n    for (var i = 0; i < word.length; i++) {\r\n        code = word.charCodeAt(i);\r\n        if (isUpper(code)) {\r\n            upper++;\r\n        }\r\n        if (isLower(code)) {\r\n            lower++;\r\n        }\r\n        if (isWhitespace(code)) {\r\n            whitespace++;\r\n        }\r\n    }\r\n    if ((upper === 0 || lower === 0) && whitespace === 0) {\r\n        return word.length <= 30;\r\n    }\r\n    else {\r\n        return upper <= 5;\r\n    }\r\n}\r\nexport function matchesCamelCase(word, camelCaseWord) {\r\n    if (!camelCaseWord) {\r\n        return null;\r\n    }\r\n    camelCaseWord = camelCaseWord.trim();\r\n    if (camelCaseWord.length === 0) {\r\n        return null;\r\n    }\r\n    if (!isCamelCasePattern(word)) {\r\n        return null;\r\n    }\r\n    if (camelCaseWord.length > 60) {\r\n        return null;\r\n    }\r\n    var analysis = analyzeCamelCaseWord(camelCaseWord);\r\n    if (!isCamelCaseWord(analysis)) {\r\n        if (!isUpperCaseWord(analysis)) {\r\n            return null;\r\n        }\r\n        camelCaseWord = camelCaseWord.toLowerCase();\r\n    }\r\n    var result = null;\r\n    var i = 0;\r\n    word = word.toLowerCase();\r\n    while (i < camelCaseWord.length && (result = _matchesCamelCase(word, camelCaseWord, 0, i)) === null) {\r\n        i = nextAnchor(camelCaseWord, i + 1);\r\n    }\r\n    return result;\r\n}\r\n// Fuzzy\r\nvar fuzzyContiguousFilter = or(matchesPrefix, matchesCamelCase, matchesContiguousSubString);\r\nvar fuzzySeparateFilter = or(matchesPrefix, matchesCamelCase, matchesSubString);\r\nvar fuzzyRegExpCache = new LRUCache(10000); // bounded to 10000 elements\r\nexport function matchesFuzzy(word, wordToMatchAgainst, enableSeparateSubstringMatching) {\r\n    if (enableSeparateSubstringMatching === void 0) { enableSeparateSubstringMatching = false; }\r\n    if (typeof word !== 'string' || typeof wordToMatchAgainst !== 'string') {\r\n        return null; // return early for invalid input\r\n    }\r\n    // Form RegExp for wildcard matches\r\n    var regexp = fuzzyRegExpCache.get(word);\r\n    if (!regexp) {\r\n        regexp = new RegExp(strings.convertSimple2RegExpPattern(word), 'i');\r\n        fuzzyRegExpCache.set(word, regexp);\r\n    }\r\n    // RegExp Filter\r\n    var match = regexp.exec(wordToMatchAgainst);\r\n    if (match) {\r\n        return [{ start: match.index, end: match.index + match[0].length }];\r\n    }\r\n    // Default Filter\r\n    return enableSeparateSubstringMatching ? fuzzySeparateFilter(word, wordToMatchAgainst) : fuzzyContiguousFilter(word, wordToMatchAgainst);\r\n}\r\nexport function anyScore(pattern, lowPattern, _patternPos, word, lowWord, _wordPos) {\r\n    var result = fuzzyScore(pattern, lowPattern, 0, word, lowWord, 0, true);\r\n    if (result) {\r\n        return result;\r\n    }\r\n    var matches = 0;\r\n    var score = 0;\r\n    var idx = _wordPos;\r\n    for (var patternPos = 0; patternPos < lowPattern.length && patternPos < _maxLen; ++patternPos) {\r\n        var wordPos = lowWord.indexOf(lowPattern.charAt(patternPos), idx);\r\n        if (wordPos >= 0) {\r\n            score += 1;\r\n            matches += Math.pow(2, wordPos);\r\n            idx = wordPos + 1;\r\n        }\r\n        else if (matches !== 0) {\r\n            // once we have started matching things\r\n            // we need to match the remaining pattern\r\n            // characters\r\n            break;\r\n        }\r\n    }\r\n    return [score, matches, _wordPos];\r\n}\r\n//#region --- fuzzyScore ---\r\nexport function createMatches(score) {\r\n    if (typeof score === 'undefined') {\r\n        return [];\r\n    }\r\n    var matches = score[1].toString(2);\r\n    var wordStart = score[2];\r\n    var res = [];\r\n    for (var pos = wordStart; pos < _maxLen; pos++) {\r\n        if (matches[matches.length - (pos + 1)] === '1') {\r\n            var last = res[res.length - 1];\r\n            if (last && last.end === pos) {\r\n                last.end = pos + 1;\r\n            }\r\n            else {\r\n                res.push({ start: pos, end: pos + 1 });\r\n            }\r\n        }\r\n    }\r\n    return res;\r\n}\r\nvar _maxLen = 128;\r\nfunction initTable() {\r\n    var table = [];\r\n    var row = [0];\r\n    for (var i = 1; i <= _maxLen; i++) {\r\n        row.push(-i);\r\n    }\r\n    for (var i = 0; i <= _maxLen; i++) {\r\n        var thisRow = row.slice(0);\r\n        thisRow[0] = -i;\r\n        table.push(thisRow);\r\n    }\r\n    return table;\r\n}\r\nvar _table = initTable();\r\nvar _scores = initTable();\r\nvar _arrows = initTable();\r\nvar _debug = false;\r\nfunction printTable(table, pattern, patternLen, word, wordLen) {\r\n    function pad(s, n, pad) {\r\n        if (pad === void 0) { pad = ' '; }\r\n        while (s.length < n) {\r\n            s = pad + s;\r\n        }\r\n        return s;\r\n    }\r\n    var ret = \" |   |\" + word.split('').map(function (c) { return pad(c, 3); }).join('|') + \"\\n\";\r\n    for (var i = 0; i <= patternLen; i++) {\r\n        if (i === 0) {\r\n            ret += ' |';\r\n        }\r\n        else {\r\n            ret += pattern[i - 1] + \"|\";\r\n        }\r\n        ret += table[i].slice(0, wordLen + 1).map(function (n) { return pad(n.toString(), 3); }).join('|') + '\\n';\r\n    }\r\n    return ret;\r\n}\r\nfunction printTables(pattern, patternStart, word, wordStart) {\r\n    pattern = pattern.substr(patternStart);\r\n    word = word.substr(wordStart);\r\n    console.log(printTable(_table, pattern, pattern.length, word, word.length));\r\n    console.log(printTable(_arrows, pattern, pattern.length, word, word.length));\r\n    console.log(printTable(_scores, pattern, pattern.length, word, word.length));\r\n}\r\nfunction isSeparatorAtPos(value, index) {\r\n    if (index < 0 || index >= value.length) {\r\n        return false;\r\n    }\r\n    var code = value.charCodeAt(index);\r\n    switch (code) {\r\n        case 95 /* Underline */:\r\n        case 45 /* Dash */:\r\n        case 46 /* Period */:\r\n        case 32 /* Space */:\r\n        case 47 /* Slash */:\r\n        case 92 /* Backslash */:\r\n        case 39 /* SingleQuote */:\r\n        case 34 /* DoubleQuote */:\r\n        case 58 /* Colon */:\r\n        case 36 /* DollarSign */:\r\n            return true;\r\n        default:\r\n            return false;\r\n    }\r\n}\r\nfunction isWhitespaceAtPos(value, index) {\r\n    if (index < 0 || index >= value.length) {\r\n        return false;\r\n    }\r\n    var code = value.charCodeAt(index);\r\n    switch (code) {\r\n        case 32 /* Space */:\r\n        case 9 /* Tab */:\r\n            return true;\r\n        default:\r\n            return false;\r\n    }\r\n}\r\nfunction isUpperCaseAtPos(pos, word, wordLow) {\r\n    return word[pos] !== wordLow[pos];\r\n}\r\nexport function isPatternInWord(patternLow, patternPos, patternLen, wordLow, wordPos, wordLen) {\r\n    while (patternPos < patternLen && wordPos < wordLen) {\r\n        if (patternLow[patternPos] === wordLow[wordPos]) {\r\n            patternPos += 1;\r\n        }\r\n        wordPos += 1;\r\n    }\r\n    return patternPos === patternLen; // pattern must be exhausted\r\n}\r\nexport var FuzzyScore;\r\n(function (FuzzyScore) {\r\n    /**\r\n     * No matches and value `-100`\r\n     */\r\n    FuzzyScore.Default = Object.freeze([-100, 0, 0]);\r\n    function isDefault(score) {\r\n        return !score || (score[0] === -100 && score[1] === 0 && score[2] === 0);\r\n    }\r\n    FuzzyScore.isDefault = isDefault;\r\n})(FuzzyScore || (FuzzyScore = {}));\r\nexport function fuzzyScore(pattern, patternLow, patternStart, word, wordLow, wordStart, firstMatchCanBeWeak) {\r\n    var patternLen = pattern.length > _maxLen ? _maxLen : pattern.length;\r\n    var wordLen = word.length > _maxLen ? _maxLen : word.length;\r\n    if (patternStart >= patternLen || wordStart >= wordLen || (patternLen - patternStart) > (wordLen - wordStart)) {\r\n        return undefined;\r\n    }\r\n    // Run a simple check if the characters of pattern occur\r\n    // (in order) at all in word. If that isn't the case we\r\n    // stop because no match will be possible\r\n    if (!isPatternInWord(patternLow, patternStart, patternLen, wordLow, wordStart, wordLen)) {\r\n        return undefined;\r\n    }\r\n    var row = 1;\r\n    var column = 1;\r\n    var patternPos = patternStart;\r\n    var wordPos = wordStart;\r\n    // There will be a match, fill in tables\r\n    for (row = 1, patternPos = patternStart; patternPos < patternLen; row++, patternPos++) {\r\n        for (column = 1, wordPos = wordStart; wordPos < wordLen; column++, wordPos++) {\r\n            var score = _doScore(pattern, patternLow, patternPos, patternStart, word, wordLow, wordPos);\r\n            _scores[row][column] = score;\r\n            var diag = _table[row - 1][column - 1] + (score > 1 ? 1 : score);\r\n            var top_1 = _table[row - 1][column] + -1;\r\n            var left = _table[row][column - 1] + -1;\r\n            if (left >= top_1) {\r\n                // left or diag\r\n                if (left > diag) {\r\n                    _table[row][column] = left;\r\n                    _arrows[row][column] = 4 /* Left */;\r\n                }\r\n                else if (left === diag) {\r\n                    _table[row][column] = left;\r\n                    _arrows[row][column] = 4 /* Left */ | 2 /* Diag */;\r\n                }\r\n                else {\r\n                    _table[row][column] = diag;\r\n                    _arrows[row][column] = 2 /* Diag */;\r\n                }\r\n            }\r\n            else {\r\n                // top or diag\r\n                if (top_1 > diag) {\r\n                    _table[row][column] = top_1;\r\n                    _arrows[row][column] = 1 /* Top */;\r\n                }\r\n                else if (top_1 === diag) {\r\n                    _table[row][column] = top_1;\r\n                    _arrows[row][column] = 1 /* Top */ | 2 /* Diag */;\r\n                }\r\n                else {\r\n                    _table[row][column] = diag;\r\n                    _arrows[row][column] = 2 /* Diag */;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (_debug) {\r\n        printTables(pattern, patternStart, word, wordStart);\r\n    }\r\n    _matchesCount = 0;\r\n    _topScore = -100;\r\n    _wordStart = wordStart;\r\n    _firstMatchCanBeWeak = firstMatchCanBeWeak;\r\n    _findAllMatches2(row - 1, column - 1, patternLen === wordLen ? 1 : 0, 0, false);\r\n    if (_matchesCount === 0) {\r\n        return undefined;\r\n    }\r\n    return [_topScore, _topMatch2, wordStart];\r\n}\r\nfunction _doScore(pattern, patternLow, patternPos, patternStart, word, wordLow, wordPos) {\r\n    if (patternLow[patternPos] !== wordLow[wordPos]) {\r\n        return -1;\r\n    }\r\n    if (wordPos === (patternPos - patternStart)) {\r\n        // common prefix: `foobar <-> foobaz`\r\n        //                            ^^^^^\r\n        if (pattern[patternPos] === word[wordPos]) {\r\n            return 7;\r\n        }\r\n        else {\r\n            return 5;\r\n        }\r\n    }\r\n    else if (isUpperCaseAtPos(wordPos, word, wordLow) && (wordPos === 0 || !isUpperCaseAtPos(wordPos - 1, word, wordLow))) {\r\n        // hitting upper-case: `foo <-> forOthers`\r\n        //                              ^^ ^\r\n        if (pattern[patternPos] === word[wordPos]) {\r\n            return 7;\r\n        }\r\n        else {\r\n            return 5;\r\n        }\r\n    }\r\n    else if (isSeparatorAtPos(wordLow, wordPos) && (wordPos === 0 || !isSeparatorAtPos(wordLow, wordPos - 1))) {\r\n        // hitting a separator: `. <-> foo.bar`\r\n        //                                ^\r\n        return 5;\r\n    }\r\n    else if (isSeparatorAtPos(wordLow, wordPos - 1) || isWhitespaceAtPos(wordLow, wordPos - 1)) {\r\n        // post separator: `foo <-> bar_foo`\r\n        //                              ^^^\r\n        return 5;\r\n    }\r\n    else {\r\n        return 1;\r\n    }\r\n}\r\nvar _matchesCount = 0;\r\nvar _topMatch2 = 0;\r\nvar _topScore = 0;\r\nvar _wordStart = 0;\r\nvar _firstMatchCanBeWeak = false;\r\nfunction _findAllMatches2(row, column, total, matches, lastMatched) {\r\n    if (_matchesCount >= 10 || total < -25) {\r\n        // stop when having already 10 results, or\r\n        // when a potential alignment as already 5 gaps\r\n        return;\r\n    }\r\n    var simpleMatchCount = 0;\r\n    while (row > 0 && column > 0) {\r\n        var score = _scores[row][column];\r\n        var arrow = _arrows[row][column];\r\n        if (arrow === 4 /* Left */) {\r\n            // left -> no match, skip a word character\r\n            column -= 1;\r\n            if (lastMatched) {\r\n                total -= 5; // new gap penalty\r\n            }\r\n            else if (matches !== 0) {\r\n                total -= 1; // gap penalty after first match\r\n            }\r\n            lastMatched = false;\r\n            simpleMatchCount = 0;\r\n        }\r\n        else if (arrow & 2 /* Diag */) {\r\n            if (arrow & 4 /* Left */) {\r\n                // left\r\n                _findAllMatches2(row, column - 1, matches !== 0 ? total - 1 : total, // gap penalty after first match\r\n                matches, lastMatched);\r\n            }\r\n            // diag\r\n            total += score;\r\n            row -= 1;\r\n            column -= 1;\r\n            lastMatched = true;\r\n            // match -> set a 1 at the word pos\r\n            matches += Math.pow(2, (column + _wordStart));\r\n            // count simple matches and boost a row of\r\n            // simple matches when they yield in a\r\n            // strong match.\r\n            if (score === 1) {\r\n                simpleMatchCount += 1;\r\n                if (row === 0 && !_firstMatchCanBeWeak) {\r\n                    // when the first match is a weak\r\n                    // match we discard it\r\n                    return undefined;\r\n                }\r\n            }\r\n            else {\r\n                // boost\r\n                total += 1 + (simpleMatchCount * (score - 1));\r\n                simpleMatchCount = 0;\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    total -= column >= 3 ? 9 : column * 3; // late start penalty\r\n    // dynamically keep track of the current top score\r\n    // and insert the current best score at head, the rest at tail\r\n    _matchesCount += 1;\r\n    if (total > _topScore) {\r\n        _topScore = total;\r\n        _topMatch2 = matches;\r\n    }\r\n}\r\n//#endregion\r\n//#region --- graceful ---\r\nexport function fuzzyScoreGracefulAggressive(pattern, lowPattern, patternPos, word, lowWord, wordPos, firstMatchCanBeWeak) {\r\n    return fuzzyScoreWithPermutations(pattern, lowPattern, patternPos, word, lowWord, wordPos, true, firstMatchCanBeWeak);\r\n}\r\nfunction fuzzyScoreWithPermutations(pattern, lowPattern, patternPos, word, lowWord, wordPos, aggressive, firstMatchCanBeWeak) {\r\n    var top = fuzzyScore(pattern, lowPattern, patternPos, word, lowWord, wordPos, firstMatchCanBeWeak);\r\n    if (top && !aggressive) {\r\n        // when using the original pattern yield a result we`\r\n        // return it unless we are aggressive and try to find\r\n        // a better alignment, e.g. `cno` -> `^co^ns^ole` or `^c^o^nsole`.\r\n        return top;\r\n    }\r\n    if (pattern.length >= 3) {\r\n        // When the pattern is long enough then try a few (max 7)\r\n        // permutations of the pattern to find a better match. The\r\n        // permutations only swap neighbouring characters, e.g\r\n        // `cnoso` becomes `conso`, `cnsoo`, `cnoos`.\r\n        var tries = Math.min(7, pattern.length - 1);\r\n        for (var movingPatternPos = patternPos + 1; movingPatternPos < tries; movingPatternPos++) {\r\n            var newPattern = nextTypoPermutation(pattern, movingPatternPos);\r\n            if (newPattern) {\r\n                var candidate = fuzzyScore(newPattern, newPattern.toLowerCase(), patternPos, word, lowWord, wordPos, firstMatchCanBeWeak);\r\n                if (candidate) {\r\n                    candidate[0] -= 3; // permutation penalty\r\n                    if (!top || candidate[0] > top[0]) {\r\n                        top = candidate;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return top;\r\n}\r\nfunction nextTypoPermutation(pattern, patternPos) {\r\n    if (patternPos + 1 >= pattern.length) {\r\n        return undefined;\r\n    }\r\n    var swap1 = pattern[patternPos];\r\n    var swap2 = pattern[patternPos + 1];\r\n    if (swap1 === swap2) {\r\n        return undefined;\r\n    }\r\n    return pattern.slice(0, patternPos)\r\n        + swap2\r\n        + swap1\r\n        + pattern.slice(patternPos + 2);\r\n}\r\n//#endregion\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as arrays from './arrays.js';\r\nimport * as strings from './strings.js';\r\nimport * as extpath from './extpath.js';\r\nimport * as paths from './path.js';\r\nimport { LRUCache } from './map.js';\r\nimport { isThenable } from './async.js';\r\nvar GLOBSTAR = '**';\r\nvar GLOB_SPLIT = '/';\r\nvar PATH_REGEX = '[/\\\\\\\\]'; // any slash or backslash\r\nvar NO_PATH_REGEX = '[^/\\\\\\\\]'; // any non-slash and non-backslash\r\nvar ALL_FORWARD_SLASHES = /\\//g;\r\nfunction starsToRegExp(starCount) {\r\n    switch (starCount) {\r\n        case 0:\r\n            return '';\r\n        case 1:\r\n            return NO_PATH_REGEX + \"*?\"; // 1 star matches any number of characters except path separator (/ and \\) - non greedy (?)\r\n        default:\r\n            // Matches:  (Path Sep OR Path Val followed by Path Sep OR Path Sep followed by Path Val) 0-many times\r\n            // Group is non capturing because we don't need to capture at all (?:...)\r\n            // Overall we use non-greedy matching because it could be that we match too much\r\n            return \"(?:\" + PATH_REGEX + \"|\" + NO_PATH_REGEX + \"+\" + PATH_REGEX + \"|\" + PATH_REGEX + NO_PATH_REGEX + \"+)*?\";\r\n    }\r\n}\r\nexport function splitGlobAware(pattern, splitChar) {\r\n    if (!pattern) {\r\n        return [];\r\n    }\r\n    var segments = [];\r\n    var inBraces = false;\r\n    var inBrackets = false;\r\n    var curVal = '';\r\n    for (var _i = 0, pattern_1 = pattern; _i < pattern_1.length; _i++) {\r\n        var char = pattern_1[_i];\r\n        switch (char) {\r\n            case splitChar:\r\n                if (!inBraces && !inBrackets) {\r\n                    segments.push(curVal);\r\n                    curVal = '';\r\n                    continue;\r\n                }\r\n                break;\r\n            case '{':\r\n                inBraces = true;\r\n                break;\r\n            case '}':\r\n                inBraces = false;\r\n                break;\r\n            case '[':\r\n                inBrackets = true;\r\n                break;\r\n            case ']':\r\n                inBrackets = false;\r\n                break;\r\n        }\r\n        curVal += char;\r\n    }\r\n    // Tail\r\n    if (curVal) {\r\n        segments.push(curVal);\r\n    }\r\n    return segments;\r\n}\r\nfunction parseRegExp(pattern) {\r\n    if (!pattern) {\r\n        return '';\r\n    }\r\n    var regEx = '';\r\n    // Split up into segments for each slash found\r\n    var segments = splitGlobAware(pattern, GLOB_SPLIT);\r\n    // Special case where we only have globstars\r\n    if (segments.every(function (s) { return s === GLOBSTAR; })) {\r\n        regEx = '.*';\r\n    }\r\n    // Build regex over segments\r\n    else {\r\n        var previousSegmentWasGlobStar_1 = false;\r\n        segments.forEach(function (segment, index) {\r\n            // Globstar is special\r\n            if (segment === GLOBSTAR) {\r\n                // if we have more than one globstar after another, just ignore it\r\n                if (!previousSegmentWasGlobStar_1) {\r\n                    regEx += starsToRegExp(2);\r\n                    previousSegmentWasGlobStar_1 = true;\r\n                }\r\n                return;\r\n            }\r\n            // States\r\n            var inBraces = false;\r\n            var braceVal = '';\r\n            var inBrackets = false;\r\n            var bracketVal = '';\r\n            for (var _i = 0, segment_1 = segment; _i < segment_1.length; _i++) {\r\n                var char = segment_1[_i];\r\n                // Support brace expansion\r\n                if (char !== '}' && inBraces) {\r\n                    braceVal += char;\r\n                    continue;\r\n                }\r\n                // Support brackets\r\n                if (inBrackets && (char !== ']' || !bracketVal) /* ] is literally only allowed as first character in brackets to match it */) {\r\n                    var res = void 0;\r\n                    // range operator\r\n                    if (char === '-') {\r\n                        res = char;\r\n                    }\r\n                    // negation operator (only valid on first index in bracket)\r\n                    else if ((char === '^' || char === '!') && !bracketVal) {\r\n                        res = '^';\r\n                    }\r\n                    // glob split matching is not allowed within character ranges\r\n                    // see http://man7.org/linux/man-pages/man7/glob.7.html\r\n                    else if (char === GLOB_SPLIT) {\r\n                        res = '';\r\n                    }\r\n                    // anything else gets escaped\r\n                    else {\r\n                        res = strings.escapeRegExpCharacters(char);\r\n                    }\r\n                    bracketVal += res;\r\n                    continue;\r\n                }\r\n                switch (char) {\r\n                    case '{':\r\n                        inBraces = true;\r\n                        continue;\r\n                    case '[':\r\n                        inBrackets = true;\r\n                        continue;\r\n                    case '}':\r\n                        var choices = splitGlobAware(braceVal, ',');\r\n                        // Converts {foo,bar} => [foo|bar]\r\n                        var braceRegExp = \"(?:\" + choices.map(function (c) { return parseRegExp(c); }).join('|') + \")\";\r\n                        regEx += braceRegExp;\r\n                        inBraces = false;\r\n                        braceVal = '';\r\n                        break;\r\n                    case ']':\r\n                        regEx += ('[' + bracketVal + ']');\r\n                        inBrackets = false;\r\n                        bracketVal = '';\r\n                        break;\r\n                    case '?':\r\n                        regEx += NO_PATH_REGEX; // 1 ? matches any single character except path separator (/ and \\)\r\n                        continue;\r\n                    case '*':\r\n                        regEx += starsToRegExp(1);\r\n                        continue;\r\n                    default:\r\n                        regEx += strings.escapeRegExpCharacters(char);\r\n                }\r\n            }\r\n            // Tail: Add the slash we had split on if there is more to come and the remaining pattern is not a globstar\r\n            // For example if pattern: some/**/*.js we want the \"/\" after some to be included in the RegEx to prevent\r\n            // a folder called \"something\" to match as well.\r\n            // However, if pattern: some/**, we tolerate that we also match on \"something\" because our globstar behaviour\r\n            // is to match 0-N segments.\r\n            if (index < segments.length - 1 && (segments[index + 1] !== GLOBSTAR || index + 2 < segments.length)) {\r\n                regEx += PATH_REGEX;\r\n            }\r\n            // reset state\r\n            previousSegmentWasGlobStar_1 = false;\r\n        });\r\n    }\r\n    return regEx;\r\n}\r\n// regexes to check for trival glob patterns that just check for String#endsWith\r\nvar T1 = /^\\*\\*\\/\\*\\.[\\w\\.-]+$/; // **/*.something\r\nvar T2 = /^\\*\\*\\/([\\w\\.-]+)\\/?$/; // **/something\r\nvar T3 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?)*}$/; // {**/*.something,**/*.else} or {**/package.json,**/project.json}\r\nvar T3_2 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?)*}$/; // Like T3, with optional trailing /**\r\nvar T4 = /^\\*\\*((\\/[\\w\\.-]+)+)\\/?$/; // **/something/else\r\nvar T5 = /^([\\w\\.-]+(\\/[\\w\\.-]+)*)\\/?$/; // something/else\r\nvar CACHE = new LRUCache(10000); // bounded to 10000 elements\r\nvar FALSE = function () {\r\n    return false;\r\n};\r\nvar NULL = function () {\r\n    return null;\r\n};\r\nfunction parsePattern(arg1, options) {\r\n    if (!arg1) {\r\n        return NULL;\r\n    }\r\n    // Handle IRelativePattern\r\n    var pattern;\r\n    if (typeof arg1 !== 'string') {\r\n        pattern = arg1.pattern;\r\n    }\r\n    else {\r\n        pattern = arg1;\r\n    }\r\n    // Whitespace trimming\r\n    pattern = pattern.trim();\r\n    // Check cache\r\n    var patternKey = pattern + \"_\" + !!options.trimForExclusions;\r\n    var parsedPattern = CACHE.get(patternKey);\r\n    if (parsedPattern) {\r\n        return wrapRelativePattern(parsedPattern, arg1);\r\n    }\r\n    // Check for Trivias\r\n    var match;\r\n    if (T1.test(pattern)) { // common pattern: **/*.txt just need endsWith check\r\n        var base_1 = pattern.substr(4); // '**/*'.length === 4\r\n        parsedPattern = function (path, basename) {\r\n            return typeof path === 'string' && strings.endsWith(path, base_1) ? pattern : null;\r\n        };\r\n    }\r\n    else if (match = T2.exec(trimForExclusions(pattern, options))) { // common pattern: **/some.txt just need basename check\r\n        parsedPattern = trivia2(match[1], pattern);\r\n    }\r\n    else if ((options.trimForExclusions ? T3_2 : T3).test(pattern)) { // repetition of common patterns (see above) {**/*.txt,**/*.png}\r\n        parsedPattern = trivia3(pattern, options);\r\n    }\r\n    else if (match = T4.exec(trimForExclusions(pattern, options))) { // common pattern: **/something/else just need endsWith check\r\n        parsedPattern = trivia4and5(match[1].substr(1), pattern, true);\r\n    }\r\n    else if (match = T5.exec(trimForExclusions(pattern, options))) { // common pattern: something/else just need equals check\r\n        parsedPattern = trivia4and5(match[1], pattern, false);\r\n    }\r\n    // Otherwise convert to pattern\r\n    else {\r\n        parsedPattern = toRegExp(pattern);\r\n    }\r\n    // Cache\r\n    CACHE.set(patternKey, parsedPattern);\r\n    return wrapRelativePattern(parsedPattern, arg1);\r\n}\r\nfunction wrapRelativePattern(parsedPattern, arg2) {\r\n    if (typeof arg2 === 'string') {\r\n        return parsedPattern;\r\n    }\r\n    return function (path, basename) {\r\n        if (!extpath.isEqualOrParent(path, arg2.base)) {\r\n            return null;\r\n        }\r\n        return parsedPattern(paths.relative(arg2.base, path), basename);\r\n    };\r\n}\r\nfunction trimForExclusions(pattern, options) {\r\n    return options.trimForExclusions && strings.endsWith(pattern, '/**') ? pattern.substr(0, pattern.length - 2) : pattern; // dropping **, tailing / is dropped later\r\n}\r\n// common pattern: **/some.txt just need basename check\r\nfunction trivia2(base, originalPattern) {\r\n    var slashBase = \"/\" + base;\r\n    var backslashBase = \"\\\\\" + base;\r\n    var parsedPattern = function (path, basename) {\r\n        if (typeof path !== 'string') {\r\n            return null;\r\n        }\r\n        if (basename) {\r\n            return basename === base ? originalPattern : null;\r\n        }\r\n        return path === base || strings.endsWith(path, slashBase) || strings.endsWith(path, backslashBase) ? originalPattern : null;\r\n    };\r\n    var basenames = [base];\r\n    parsedPattern.basenames = basenames;\r\n    parsedPattern.patterns = [originalPattern];\r\n    parsedPattern.allBasenames = basenames;\r\n    return parsedPattern;\r\n}\r\n// repetition of common patterns (see above) {**/*.txt,**/*.png}\r\nfunction trivia3(pattern, options) {\r\n    var parsedPatterns = aggregateBasenameMatches(pattern.slice(1, -1).split(',')\r\n        .map(function (pattern) { return parsePattern(pattern, options); })\r\n        .filter(function (pattern) { return pattern !== NULL; }), pattern);\r\n    var n = parsedPatterns.length;\r\n    if (!n) {\r\n        return NULL;\r\n    }\r\n    if (n === 1) {\r\n        return parsedPatterns[0];\r\n    }\r\n    var parsedPattern = function (path, basename) {\r\n        for (var i = 0, n_1 = parsedPatterns.length; i < n_1; i++) {\r\n            if (parsedPatterns[i](path, basename)) {\r\n                return pattern;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    var withBasenames = arrays.first(parsedPatterns, function (pattern) { return !!pattern.allBasenames; });\r\n    if (withBasenames) {\r\n        parsedPattern.allBasenames = withBasenames.allBasenames;\r\n    }\r\n    var allPaths = parsedPatterns.reduce(function (all, current) { return current.allPaths ? all.concat(current.allPaths) : all; }, []);\r\n    if (allPaths.length) {\r\n        parsedPattern.allPaths = allPaths;\r\n    }\r\n    return parsedPattern;\r\n}\r\n// common patterns: **/something/else just need endsWith check, something/else just needs and equals check\r\nfunction trivia4and5(path, pattern, matchPathEnds) {\r\n    var nativePath = paths.sep !== paths.posix.sep ? path.replace(ALL_FORWARD_SLASHES, paths.sep) : path;\r\n    var nativePathEnd = paths.sep + nativePath;\r\n    var parsedPattern = matchPathEnds ? function (path, basename) {\r\n        return typeof path === 'string' && (path === nativePath || strings.endsWith(path, nativePathEnd)) ? pattern : null;\r\n    } : function (path, basename) {\r\n        return typeof path === 'string' && path === nativePath ? pattern : null;\r\n    };\r\n    parsedPattern.allPaths = [(matchPathEnds ? '*/' : './') + path];\r\n    return parsedPattern;\r\n}\r\nfunction toRegExp(pattern) {\r\n    try {\r\n        var regExp_1 = new RegExp(\"^\" + parseRegExp(pattern) + \"$\");\r\n        return function (path, basename) {\r\n            regExp_1.lastIndex = 0; // reset RegExp to its initial state to reuse it!\r\n            return typeof path === 'string' && regExp_1.test(path) ? pattern : null;\r\n        };\r\n    }\r\n    catch (error) {\r\n        return NULL;\r\n    }\r\n}\r\nexport function match(arg1, path, hasSibling) {\r\n    if (!arg1 || typeof path !== 'string') {\r\n        return false;\r\n    }\r\n    return parse(arg1)(path, undefined, hasSibling);\r\n}\r\nexport function parse(arg1, options) {\r\n    if (options === void 0) { options = {}; }\r\n    if (!arg1) {\r\n        return FALSE;\r\n    }\r\n    // Glob with String\r\n    if (typeof arg1 === 'string' || isRelativePattern(arg1)) {\r\n        var parsedPattern_1 = parsePattern(arg1, options);\r\n        if (parsedPattern_1 === NULL) {\r\n            return FALSE;\r\n        }\r\n        var resultPattern = function (path, basename) {\r\n            return !!parsedPattern_1(path, basename);\r\n        };\r\n        if (parsedPattern_1.allBasenames) {\r\n            resultPattern.allBasenames = parsedPattern_1.allBasenames;\r\n        }\r\n        if (parsedPattern_1.allPaths) {\r\n            resultPattern.allPaths = parsedPattern_1.allPaths;\r\n        }\r\n        return resultPattern;\r\n    }\r\n    // Glob with Expression\r\n    return parsedExpression(arg1, options);\r\n}\r\nexport function isRelativePattern(obj) {\r\n    var rp = obj;\r\n    return rp && typeof rp.base === 'string' && typeof rp.pattern === 'string';\r\n}\r\nfunction parsedExpression(expression, options) {\r\n    var parsedPatterns = aggregateBasenameMatches(Object.getOwnPropertyNames(expression)\r\n        .map(function (pattern) { return parseExpressionPattern(pattern, expression[pattern], options); })\r\n        .filter(function (pattern) { return pattern !== NULL; }));\r\n    var n = parsedPatterns.length;\r\n    if (!n) {\r\n        return NULL;\r\n    }\r\n    if (!parsedPatterns.some(function (parsedPattern) { return !!parsedPattern.requiresSiblings; })) {\r\n        if (n === 1) {\r\n            return parsedPatterns[0];\r\n        }\r\n        var resultExpression_1 = function (path, basename) {\r\n            for (var i = 0, n_2 = parsedPatterns.length; i < n_2; i++) {\r\n                // Pattern matches path\r\n                var result = parsedPatterns[i](path, basename);\r\n                if (result) {\r\n                    return result;\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        var withBasenames_1 = arrays.first(parsedPatterns, function (pattern) { return !!pattern.allBasenames; });\r\n        if (withBasenames_1) {\r\n            resultExpression_1.allBasenames = withBasenames_1.allBasenames;\r\n        }\r\n        var allPaths_1 = parsedPatterns.reduce(function (all, current) { return current.allPaths ? all.concat(current.allPaths) : all; }, []);\r\n        if (allPaths_1.length) {\r\n            resultExpression_1.allPaths = allPaths_1;\r\n        }\r\n        return resultExpression_1;\r\n    }\r\n    var resultExpression = function (path, basename, hasSibling) {\r\n        var name = undefined;\r\n        for (var i = 0, n_3 = parsedPatterns.length; i < n_3; i++) {\r\n            // Pattern matches path\r\n            var parsedPattern = parsedPatterns[i];\r\n            if (parsedPattern.requiresSiblings && hasSibling) {\r\n                if (!basename) {\r\n                    basename = paths.basename(path);\r\n                }\r\n                if (!name) {\r\n                    name = basename.substr(0, basename.length - paths.extname(path).length);\r\n                }\r\n            }\r\n            var result = parsedPattern(path, basename, name, hasSibling);\r\n            if (result) {\r\n                return result;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    var withBasenames = arrays.first(parsedPatterns, function (pattern) { return !!pattern.allBasenames; });\r\n    if (withBasenames) {\r\n        resultExpression.allBasenames = withBasenames.allBasenames;\r\n    }\r\n    var allPaths = parsedPatterns.reduce(function (all, current) { return current.allPaths ? all.concat(current.allPaths) : all; }, []);\r\n    if (allPaths.length) {\r\n        resultExpression.allPaths = allPaths;\r\n    }\r\n    return resultExpression;\r\n}\r\nfunction parseExpressionPattern(pattern, value, options) {\r\n    if (value === false) {\r\n        return NULL; // pattern is disabled\r\n    }\r\n    var parsedPattern = parsePattern(pattern, options);\r\n    if (parsedPattern === NULL) {\r\n        return NULL;\r\n    }\r\n    // Expression Pattern is <boolean>\r\n    if (typeof value === 'boolean') {\r\n        return parsedPattern;\r\n    }\r\n    // Expression Pattern is <SiblingClause>\r\n    if (value) {\r\n        var when_1 = value.when;\r\n        if (typeof when_1 === 'string') {\r\n            var result = function (path, basename, name, hasSibling) {\r\n                if (!hasSibling || !parsedPattern(path, basename)) {\r\n                    return null;\r\n                }\r\n                var clausePattern = when_1.replace('$(basename)', name);\r\n                var matched = hasSibling(clausePattern);\r\n                return isThenable(matched) ?\r\n                    matched.then(function (m) { return m ? pattern : null; }) :\r\n                    matched ? pattern : null;\r\n            };\r\n            result.requiresSiblings = true;\r\n            return result;\r\n        }\r\n    }\r\n    // Expression is Anything\r\n    return parsedPattern;\r\n}\r\nfunction aggregateBasenameMatches(parsedPatterns, result) {\r\n    var basenamePatterns = parsedPatterns.filter(function (parsedPattern) { return !!parsedPattern.basenames; });\r\n    if (basenamePatterns.length < 2) {\r\n        return parsedPatterns;\r\n    }\r\n    var basenames = basenamePatterns.reduce(function (all, current) {\r\n        var basenames = current.basenames;\r\n        return basenames ? all.concat(basenames) : all;\r\n    }, []);\r\n    var patterns;\r\n    if (result) {\r\n        patterns = [];\r\n        for (var i = 0, n = basenames.length; i < n; i++) {\r\n            patterns.push(result);\r\n        }\r\n    }\r\n    else {\r\n        patterns = basenamePatterns.reduce(function (all, current) {\r\n            var patterns = current.patterns;\r\n            return patterns ? all.concat(patterns) : all;\r\n        }, []);\r\n    }\r\n    var aggregate = function (path, basename) {\r\n        if (typeof path !== 'string') {\r\n            return null;\r\n        }\r\n        if (!basename) {\r\n            var i = void 0;\r\n            for (i = path.length; i > 0; i--) {\r\n                var ch = path.charCodeAt(i - 1);\r\n                if (ch === 47 /* Slash */ || ch === 92 /* Backslash */) {\r\n                    break;\r\n                }\r\n            }\r\n            basename = path.substr(i);\r\n        }\r\n        var index = basenames.indexOf(basename);\r\n        return index !== -1 ? patterns[index] : null;\r\n    };\r\n    aggregate.basenames = basenames;\r\n    aggregate.patterns = patterns;\r\n    aggregate.allBasenames = basenames;\r\n    var aggregatedPatterns = parsedPatterns.filter(function (parsedPattern) { return !parsedPattern.basenames; });\r\n    aggregatedPatterns.push(aggregate);\r\n    return aggregatedPatterns;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar IdGenerator = /** @class */ (function () {\r\n    function IdGenerator(prefix) {\r\n        this._prefix = prefix;\r\n        this._lastId = 0;\r\n    }\r\n    IdGenerator.prototype.nextId = function () {\r\n        return this._prefix + (++this._lastId);\r\n    };\r\n    return IdGenerator;\r\n}());\r\nexport { IdGenerator };\r\nexport var defaultGenerator = new IdGenerator('id#');\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\r\n/**\r\n * Returns an array which contains all values that reside\r\n * in the given set.\r\n */\r\nexport function values(from) {\r\n    var result = [];\r\n    for (var key in from) {\r\n        if (hasOwnProperty.call(from, key)) {\r\n            result.push(from[key]);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport function first(from) {\r\n    for (var key in from) {\r\n        if (hasOwnProperty.call(from, key)) {\r\n            return from[key];\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\n/**\r\n * Iterates over each entry in the provided set. The iterator allows\r\n * to remove elements and will stop when the callback returns {{false}}.\r\n */\r\nexport function forEach(from, callback) {\r\n    var _loop_1 = function (key) {\r\n        if (hasOwnProperty.call(from, key)) {\r\n            var result = callback({ key: key, value: from[key] }, function () {\r\n                delete from[key];\r\n            });\r\n            if (result === false) {\r\n                return { value: void 0 };\r\n            }\r\n        }\r\n    };\r\n    for (var key in from) {\r\n        var state_1 = _loop_1(key);\r\n        if (typeof state_1 === \"object\")\r\n            return state_1.value;\r\n    }\r\n}\r\nvar SetMap = /** @class */ (function () {\r\n    function SetMap() {\r\n        this.map = new Map();\r\n    }\r\n    SetMap.prototype.add = function (key, value) {\r\n        var values = this.map.get(key);\r\n        if (!values) {\r\n            values = new Set();\r\n            this.map.set(key, values);\r\n        }\r\n        values.add(value);\r\n    };\r\n    SetMap.prototype.delete = function (key, value) {\r\n        var values = this.map.get(key);\r\n        if (!values) {\r\n            return;\r\n        }\r\n        values.delete(value);\r\n        if (values.size === 0) {\r\n            this.map.delete(key);\r\n        }\r\n    };\r\n    SetMap.prototype.forEach = function (key, fn) {\r\n        var values = this.map.get(key);\r\n        if (!values) {\r\n            return;\r\n        }\r\n        values.forEach(fn);\r\n    };\r\n    return SetMap;\r\n}());\r\nexport { SetMap };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nfunction roundFloat(number, decimalPoints) {\r\n    var decimal = Math.pow(10, decimalPoints);\r\n    return Math.round(number * decimal) / decimal;\r\n}\r\nvar RGBA = /** @class */ (function () {\r\n    function RGBA(r, g, b, a) {\r\n        if (a === void 0) { a = 1; }\r\n        this.r = Math.min(255, Math.max(0, r)) | 0;\r\n        this.g = Math.min(255, Math.max(0, g)) | 0;\r\n        this.b = Math.min(255, Math.max(0, b)) | 0;\r\n        this.a = roundFloat(Math.max(Math.min(1, a), 0), 3);\r\n    }\r\n    RGBA.equals = function (a, b) {\r\n        return a.r === b.r && a.g === b.g && a.b === b.b && a.a === b.a;\r\n    };\r\n    return RGBA;\r\n}());\r\nexport { RGBA };\r\nvar HSLA = /** @class */ (function () {\r\n    function HSLA(h, s, l, a) {\r\n        this.h = Math.max(Math.min(360, h), 0) | 0;\r\n        this.s = roundFloat(Math.max(Math.min(1, s), 0), 3);\r\n        this.l = roundFloat(Math.max(Math.min(1, l), 0), 3);\r\n        this.a = roundFloat(Math.max(Math.min(1, a), 0), 3);\r\n    }\r\n    HSLA.equals = function (a, b) {\r\n        return a.h === b.h && a.s === b.s && a.l === b.l && a.a === b.a;\r\n    };\r\n    /**\r\n     * Converts an RGB color value to HSL. Conversion formula\r\n     * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n     * Assumes r, g, and b are contained in the set [0, 255] and\r\n     * returns h in the set [0, 360], s, and l in the set [0, 1].\r\n     */\r\n    HSLA.fromRGBA = function (rgba) {\r\n        var r = rgba.r / 255;\r\n        var g = rgba.g / 255;\r\n        var b = rgba.b / 255;\r\n        var a = rgba.a;\r\n        var max = Math.max(r, g, b);\r\n        var min = Math.min(r, g, b);\r\n        var h = 0;\r\n        var s = 0;\r\n        var l = (min + max) / 2;\r\n        var chroma = max - min;\r\n        if (chroma > 0) {\r\n            s = Math.min((l <= 0.5 ? chroma / (2 * l) : chroma / (2 - (2 * l))), 1);\r\n            switch (max) {\r\n                case r:\r\n                    h = (g - b) / chroma + (g < b ? 6 : 0);\r\n                    break;\r\n                case g:\r\n                    h = (b - r) / chroma + 2;\r\n                    break;\r\n                case b:\r\n                    h = (r - g) / chroma + 4;\r\n                    break;\r\n            }\r\n            h *= 60;\r\n            h = Math.round(h);\r\n        }\r\n        return new HSLA(h, s, l, a);\r\n    };\r\n    HSLA._hue2rgb = function (p, q, t) {\r\n        if (t < 0) {\r\n            t += 1;\r\n        }\r\n        if (t > 1) {\r\n            t -= 1;\r\n        }\r\n        if (t < 1 / 6) {\r\n            return p + (q - p) * 6 * t;\r\n        }\r\n        if (t < 1 / 2) {\r\n            return q;\r\n        }\r\n        if (t < 2 / 3) {\r\n            return p + (q - p) * (2 / 3 - t) * 6;\r\n        }\r\n        return p;\r\n    };\r\n    /**\r\n     * Converts an HSL color value to RGB. Conversion formula\r\n     * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n     * Assumes h in the set [0, 360] s, and l are contained in the set [0, 1] and\r\n     * returns r, g, and b in the set [0, 255].\r\n     */\r\n    HSLA.toRGBA = function (hsla) {\r\n        var h = hsla.h / 360;\r\n        var s = hsla.s, l = hsla.l, a = hsla.a;\r\n        var r, g, b;\r\n        if (s === 0) {\r\n            r = g = b = l; // achromatic\r\n        }\r\n        else {\r\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n            var p = 2 * l - q;\r\n            r = HSLA._hue2rgb(p, q, h + 1 / 3);\r\n            g = HSLA._hue2rgb(p, q, h);\r\n            b = HSLA._hue2rgb(p, q, h - 1 / 3);\r\n        }\r\n        return new RGBA(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), a);\r\n    };\r\n    return HSLA;\r\n}());\r\nexport { HSLA };\r\nvar HSVA = /** @class */ (function () {\r\n    function HSVA(h, s, v, a) {\r\n        this.h = Math.max(Math.min(360, h), 0) | 0;\r\n        this.s = roundFloat(Math.max(Math.min(1, s), 0), 3);\r\n        this.v = roundFloat(Math.max(Math.min(1, v), 0), 3);\r\n        this.a = roundFloat(Math.max(Math.min(1, a), 0), 3);\r\n    }\r\n    HSVA.equals = function (a, b) {\r\n        return a.h === b.h && a.s === b.s && a.v === b.v && a.a === b.a;\r\n    };\r\n    // from http://www.rapidtables.com/convert/color/rgb-to-hsv.htm\r\n    HSVA.fromRGBA = function (rgba) {\r\n        var r = rgba.r / 255;\r\n        var g = rgba.g / 255;\r\n        var b = rgba.b / 255;\r\n        var cmax = Math.max(r, g, b);\r\n        var cmin = Math.min(r, g, b);\r\n        var delta = cmax - cmin;\r\n        var s = cmax === 0 ? 0 : (delta / cmax);\r\n        var m;\r\n        if (delta === 0) {\r\n            m = 0;\r\n        }\r\n        else if (cmax === r) {\r\n            m = ((((g - b) / delta) % 6) + 6) % 6;\r\n        }\r\n        else if (cmax === g) {\r\n            m = ((b - r) / delta) + 2;\r\n        }\r\n        else {\r\n            m = ((r - g) / delta) + 4;\r\n        }\r\n        return new HSVA(Math.round(m * 60), s, cmax, rgba.a);\r\n    };\r\n    // from http://www.rapidtables.com/convert/color/hsv-to-rgb.htm\r\n    HSVA.toRGBA = function (hsva) {\r\n        var h = hsva.h, s = hsva.s, v = hsva.v, a = hsva.a;\r\n        var c = v * s;\r\n        var x = c * (1 - Math.abs((h / 60) % 2 - 1));\r\n        var m = v - c;\r\n        var _a = [0, 0, 0], r = _a[0], g = _a[1], b = _a[2];\r\n        if (h < 60) {\r\n            r = c;\r\n            g = x;\r\n        }\r\n        else if (h < 120) {\r\n            r = x;\r\n            g = c;\r\n        }\r\n        else if (h < 180) {\r\n            g = c;\r\n            b = x;\r\n        }\r\n        else if (h < 240) {\r\n            g = x;\r\n            b = c;\r\n        }\r\n        else if (h < 300) {\r\n            r = x;\r\n            b = c;\r\n        }\r\n        else if (h < 360) {\r\n            r = c;\r\n            b = x;\r\n        }\r\n        r = Math.round((r + m) * 255);\r\n        g = Math.round((g + m) * 255);\r\n        b = Math.round((b + m) * 255);\r\n        return new RGBA(r, g, b, a);\r\n    };\r\n    return HSVA;\r\n}());\r\nexport { HSVA };\r\nvar Color = /** @class */ (function () {\r\n    function Color(arg) {\r\n        if (!arg) {\r\n            throw new Error('Color needs a value');\r\n        }\r\n        else if (arg instanceof RGBA) {\r\n            this.rgba = arg;\r\n        }\r\n        else if (arg instanceof HSLA) {\r\n            this._hsla = arg;\r\n            this.rgba = HSLA.toRGBA(arg);\r\n        }\r\n        else if (arg instanceof HSVA) {\r\n            this._hsva = arg;\r\n            this.rgba = HSVA.toRGBA(arg);\r\n        }\r\n        else {\r\n            throw new Error('Invalid color ctor argument');\r\n        }\r\n    }\r\n    Color.fromHex = function (hex) {\r\n        return Color.Format.CSS.parseHex(hex) || Color.red;\r\n    };\r\n    Object.defineProperty(Color.prototype, \"hsla\", {\r\n        get: function () {\r\n            if (this._hsla) {\r\n                return this._hsla;\r\n            }\r\n            else {\r\n                return HSLA.fromRGBA(this.rgba);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color.prototype, \"hsva\", {\r\n        get: function () {\r\n            if (this._hsva) {\r\n                return this._hsva;\r\n            }\r\n            return HSVA.fromRGBA(this.rgba);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Color.prototype.equals = function (other) {\r\n        return !!other && RGBA.equals(this.rgba, other.rgba) && HSLA.equals(this.hsla, other.hsla) && HSVA.equals(this.hsva, other.hsva);\r\n    };\r\n    /**\r\n     * http://www.w3.org/TR/WCAG20/#relativeluminancedef\r\n     * Returns the number in the set [0, 1]. O => Darkest Black. 1 => Lightest white.\r\n     */\r\n    Color.prototype.getRelativeLuminance = function () {\r\n        var R = Color._relativeLuminanceForComponent(this.rgba.r);\r\n        var G = Color._relativeLuminanceForComponent(this.rgba.g);\r\n        var B = Color._relativeLuminanceForComponent(this.rgba.b);\r\n        var luminance = 0.2126 * R + 0.7152 * G + 0.0722 * B;\r\n        return roundFloat(luminance, 4);\r\n    };\r\n    Color._relativeLuminanceForComponent = function (color) {\r\n        var c = color / 255;\r\n        return (c <= 0.03928) ? c / 12.92 : Math.pow(((c + 0.055) / 1.055), 2.4);\r\n    };\r\n    /**\r\n     *\thttp://24ways.org/2010/calculating-color-contrast\r\n     *  Return 'true' if lighter color otherwise 'false'\r\n     */\r\n    Color.prototype.isLighter = function () {\r\n        var yiq = (this.rgba.r * 299 + this.rgba.g * 587 + this.rgba.b * 114) / 1000;\r\n        return yiq >= 128;\r\n    };\r\n    Color.prototype.isLighterThan = function (another) {\r\n        var lum1 = this.getRelativeLuminance();\r\n        var lum2 = another.getRelativeLuminance();\r\n        return lum1 > lum2;\r\n    };\r\n    Color.prototype.isDarkerThan = function (another) {\r\n        var lum1 = this.getRelativeLuminance();\r\n        var lum2 = another.getRelativeLuminance();\r\n        return lum1 < lum2;\r\n    };\r\n    Color.prototype.lighten = function (factor) {\r\n        return new Color(new HSLA(this.hsla.h, this.hsla.s, this.hsla.l + this.hsla.l * factor, this.hsla.a));\r\n    };\r\n    Color.prototype.darken = function (factor) {\r\n        return new Color(new HSLA(this.hsla.h, this.hsla.s, this.hsla.l - this.hsla.l * factor, this.hsla.a));\r\n    };\r\n    Color.prototype.transparent = function (factor) {\r\n        var _a = this.rgba, r = _a.r, g = _a.g, b = _a.b, a = _a.a;\r\n        return new Color(new RGBA(r, g, b, a * factor));\r\n    };\r\n    Color.prototype.isTransparent = function () {\r\n        return this.rgba.a === 0;\r\n    };\r\n    Color.prototype.isOpaque = function () {\r\n        return this.rgba.a === 1;\r\n    };\r\n    Color.prototype.opposite = function () {\r\n        return new Color(new RGBA(255 - this.rgba.r, 255 - this.rgba.g, 255 - this.rgba.b, this.rgba.a));\r\n    };\r\n    Color.prototype.toString = function () {\r\n        return '' + Color.Format.CSS.format(this);\r\n    };\r\n    Color.getLighterColor = function (of, relative, factor) {\r\n        if (of.isLighterThan(relative)) {\r\n            return of;\r\n        }\r\n        factor = factor ? factor : 0.5;\r\n        var lum1 = of.getRelativeLuminance();\r\n        var lum2 = relative.getRelativeLuminance();\r\n        factor = factor * (lum2 - lum1) / lum2;\r\n        return of.lighten(factor);\r\n    };\r\n    Color.getDarkerColor = function (of, relative, factor) {\r\n        if (of.isDarkerThan(relative)) {\r\n            return of;\r\n        }\r\n        factor = factor ? factor : 0.5;\r\n        var lum1 = of.getRelativeLuminance();\r\n        var lum2 = relative.getRelativeLuminance();\r\n        factor = factor * (lum1 - lum2) / lum1;\r\n        return of.darken(factor);\r\n    };\r\n    Color.white = new Color(new RGBA(255, 255, 255, 1));\r\n    Color.black = new Color(new RGBA(0, 0, 0, 1));\r\n    Color.red = new Color(new RGBA(255, 0, 0, 1));\r\n    Color.blue = new Color(new RGBA(0, 0, 255, 1));\r\n    Color.cyan = new Color(new RGBA(0, 255, 255, 1));\r\n    Color.lightgrey = new Color(new RGBA(211, 211, 211, 1));\r\n    Color.transparent = new Color(new RGBA(0, 0, 0, 0));\r\n    return Color;\r\n}());\r\nexport { Color };\r\n(function (Color) {\r\n    var Format;\r\n    (function (Format) {\r\n        var CSS;\r\n        (function (CSS) {\r\n            function formatRGB(color) {\r\n                if (color.rgba.a === 1) {\r\n                    return \"rgb(\" + color.rgba.r + \", \" + color.rgba.g + \", \" + color.rgba.b + \")\";\r\n                }\r\n                return Color.Format.CSS.formatRGBA(color);\r\n            }\r\n            CSS.formatRGB = formatRGB;\r\n            function formatRGBA(color) {\r\n                return \"rgba(\" + color.rgba.r + \", \" + color.rgba.g + \", \" + color.rgba.b + \", \" + +(color.rgba.a).toFixed(2) + \")\";\r\n            }\r\n            CSS.formatRGBA = formatRGBA;\r\n            function formatHSL(color) {\r\n                if (color.hsla.a === 1) {\r\n                    return \"hsl(\" + color.hsla.h + \", \" + (color.hsla.s * 100).toFixed(2) + \"%, \" + (color.hsla.l * 100).toFixed(2) + \"%)\";\r\n                }\r\n                return Color.Format.CSS.formatHSLA(color);\r\n            }\r\n            CSS.formatHSL = formatHSL;\r\n            function formatHSLA(color) {\r\n                return \"hsla(\" + color.hsla.h + \", \" + (color.hsla.s * 100).toFixed(2) + \"%, \" + (color.hsla.l * 100).toFixed(2) + \"%, \" + color.hsla.a.toFixed(2) + \")\";\r\n            }\r\n            CSS.formatHSLA = formatHSLA;\r\n            function _toTwoDigitHex(n) {\r\n                var r = n.toString(16);\r\n                return r.length !== 2 ? '0' + r : r;\r\n            }\r\n            /**\r\n             * Formats the color as #RRGGBB\r\n             */\r\n            function formatHex(color) {\r\n                return \"#\" + _toTwoDigitHex(color.rgba.r) + _toTwoDigitHex(color.rgba.g) + _toTwoDigitHex(color.rgba.b);\r\n            }\r\n            CSS.formatHex = formatHex;\r\n            /**\r\n             * Formats the color as #RRGGBBAA\r\n             * If 'compact' is set, colors without transparancy will be printed as #RRGGBB\r\n             */\r\n            function formatHexA(color, compact) {\r\n                if (compact === void 0) { compact = false; }\r\n                if (compact && color.rgba.a === 1) {\r\n                    return Color.Format.CSS.formatHex(color);\r\n                }\r\n                return \"#\" + _toTwoDigitHex(color.rgba.r) + _toTwoDigitHex(color.rgba.g) + _toTwoDigitHex(color.rgba.b) + _toTwoDigitHex(Math.round(color.rgba.a * 255));\r\n            }\r\n            CSS.formatHexA = formatHexA;\r\n            /**\r\n             * The default format will use HEX if opaque and RGBA otherwise.\r\n             */\r\n            function format(color) {\r\n                if (color.isOpaque()) {\r\n                    return Color.Format.CSS.formatHex(color);\r\n                }\r\n                return Color.Format.CSS.formatRGBA(color);\r\n            }\r\n            CSS.format = format;\r\n            /**\r\n             * Converts an Hex color value to a Color.\r\n             * returns r, g, and b are contained in the set [0, 255]\r\n             * @param hex string (#RGB, #RGBA, #RRGGBB or #RRGGBBAA).\r\n             */\r\n            function parseHex(hex) {\r\n                var length = hex.length;\r\n                if (length === 0) {\r\n                    // Invalid color\r\n                    return null;\r\n                }\r\n                if (hex.charCodeAt(0) !== 35 /* Hash */) {\r\n                    // Does not begin with a #\r\n                    return null;\r\n                }\r\n                if (length === 7) {\r\n                    // #RRGGBB format\r\n                    var r = 16 * _parseHexDigit(hex.charCodeAt(1)) + _parseHexDigit(hex.charCodeAt(2));\r\n                    var g = 16 * _parseHexDigit(hex.charCodeAt(3)) + _parseHexDigit(hex.charCodeAt(4));\r\n                    var b = 16 * _parseHexDigit(hex.charCodeAt(5)) + _parseHexDigit(hex.charCodeAt(6));\r\n                    return new Color(new RGBA(r, g, b, 1));\r\n                }\r\n                if (length === 9) {\r\n                    // #RRGGBBAA format\r\n                    var r = 16 * _parseHexDigit(hex.charCodeAt(1)) + _parseHexDigit(hex.charCodeAt(2));\r\n                    var g = 16 * _parseHexDigit(hex.charCodeAt(3)) + _parseHexDigit(hex.charCodeAt(4));\r\n                    var b = 16 * _parseHexDigit(hex.charCodeAt(5)) + _parseHexDigit(hex.charCodeAt(6));\r\n                    var a = 16 * _parseHexDigit(hex.charCodeAt(7)) + _parseHexDigit(hex.charCodeAt(8));\r\n                    return new Color(new RGBA(r, g, b, a / 255));\r\n                }\r\n                if (length === 4) {\r\n                    // #RGB format\r\n                    var r = _parseHexDigit(hex.charCodeAt(1));\r\n                    var g = _parseHexDigit(hex.charCodeAt(2));\r\n                    var b = _parseHexDigit(hex.charCodeAt(3));\r\n                    return new Color(new RGBA(16 * r + r, 16 * g + g, 16 * b + b));\r\n                }\r\n                if (length === 5) {\r\n                    // #RGBA format\r\n                    var r = _parseHexDigit(hex.charCodeAt(1));\r\n                    var g = _parseHexDigit(hex.charCodeAt(2));\r\n                    var b = _parseHexDigit(hex.charCodeAt(3));\r\n                    var a = _parseHexDigit(hex.charCodeAt(4));\r\n                    return new Color(new RGBA(16 * r + r, 16 * g + g, 16 * b + b, (16 * a + a) / 255));\r\n                }\r\n                // Invalid color\r\n                return null;\r\n            }\r\n            CSS.parseHex = parseHex;\r\n            function _parseHexDigit(charCode) {\r\n                switch (charCode) {\r\n                    case 48 /* Digit0 */: return 0;\r\n                    case 49 /* Digit1 */: return 1;\r\n                    case 50 /* Digit2 */: return 2;\r\n                    case 51 /* Digit3 */: return 3;\r\n                    case 52 /* Digit4 */: return 4;\r\n                    case 53 /* Digit5 */: return 5;\r\n                    case 54 /* Digit6 */: return 6;\r\n                    case 55 /* Digit7 */: return 7;\r\n                    case 56 /* Digit8 */: return 8;\r\n                    case 57 /* Digit9 */: return 9;\r\n                    case 97 /* a */: return 10;\r\n                    case 65 /* A */: return 10;\r\n                    case 98 /* b */: return 11;\r\n                    case 66 /* B */: return 11;\r\n                    case 99 /* c */: return 12;\r\n                    case 67 /* C */: return 12;\r\n                    case 100 /* d */: return 13;\r\n                    case 68 /* D */: return 13;\r\n                    case 101 /* e */: return 14;\r\n                    case 69 /* E */: return 14;\r\n                    case 102 /* f */: return 15;\r\n                    case 70 /* F */: return 15;\r\n                }\r\n                return 0;\r\n            }\r\n        })(CSS = Format.CSS || (Format.CSS = {}));\r\n    })(Format = Color.Format || (Color.Format = {}));\r\n})(Color || (Color = {}));\r\n","/**\r\n * Returns the last element of an array.\r\n * @param array The array.\r\n * @param n Which element from the end (default is zero).\r\n */\r\nexport function tail(array, n) {\r\n    if (n === void 0) { n = 0; }\r\n    return array[array.length - (1 + n)];\r\n}\r\nexport function tail2(arr) {\r\n    if (arr.length === 0) {\r\n        throw new Error('Invalid tail call');\r\n    }\r\n    return [arr.slice(0, arr.length - 1), arr[arr.length - 1]];\r\n}\r\nexport function equals(one, other, itemEquals) {\r\n    if (itemEquals === void 0) { itemEquals = function (a, b) { return a === b; }; }\r\n    if (one === other) {\r\n        return true;\r\n    }\r\n    if (!one || !other) {\r\n        return false;\r\n    }\r\n    if (one.length !== other.length) {\r\n        return false;\r\n    }\r\n    for (var i = 0, len = one.length; i < len; i++) {\r\n        if (!itemEquals(one[i], other[i])) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexport function binarySearch(array, key, comparator) {\r\n    var low = 0, high = array.length - 1;\r\n    while (low <= high) {\r\n        var mid = ((low + high) / 2) | 0;\r\n        var comp = comparator(array[mid], key);\r\n        if (comp < 0) {\r\n            low = mid + 1;\r\n        }\r\n        else if (comp > 0) {\r\n            high = mid - 1;\r\n        }\r\n        else {\r\n            return mid;\r\n        }\r\n    }\r\n    return -(low + 1);\r\n}\r\n/**\r\n * Takes a sorted array and a function p. The array is sorted in such a way that all elements where p(x) is false\r\n * are located before all elements where p(x) is true.\r\n * @returns the least x for which p(x) is true or array.length if no element fullfills the given function.\r\n */\r\nexport function findFirstInSorted(array, p) {\r\n    var low = 0, high = array.length;\r\n    if (high === 0) {\r\n        return 0; // no children\r\n    }\r\n    while (low < high) {\r\n        var mid = Math.floor((low + high) / 2);\r\n        if (p(array[mid])) {\r\n            high = mid;\r\n        }\r\n        else {\r\n            low = mid + 1;\r\n        }\r\n    }\r\n    return low;\r\n}\r\n/**\r\n * Like `Array#sort` but always stable. Usually runs a little slower `than Array#sort`\r\n * so only use this when actually needing stable sort.\r\n */\r\nexport function mergeSort(data, compare) {\r\n    _sort(data, compare, 0, data.length - 1, []);\r\n    return data;\r\n}\r\nfunction _merge(a, compare, lo, mid, hi, aux) {\r\n    var leftIdx = lo, rightIdx = mid + 1;\r\n    for (var i = lo; i <= hi; i++) {\r\n        aux[i] = a[i];\r\n    }\r\n    for (var i = lo; i <= hi; i++) {\r\n        if (leftIdx > mid) {\r\n            // left side consumed\r\n            a[i] = aux[rightIdx++];\r\n        }\r\n        else if (rightIdx > hi) {\r\n            // right side consumed\r\n            a[i] = aux[leftIdx++];\r\n        }\r\n        else if (compare(aux[rightIdx], aux[leftIdx]) < 0) {\r\n            // right element is less -> comes first\r\n            a[i] = aux[rightIdx++];\r\n        }\r\n        else {\r\n            // left element comes first (less or equal)\r\n            a[i] = aux[leftIdx++];\r\n        }\r\n    }\r\n}\r\nfunction _sort(a, compare, lo, hi, aux) {\r\n    if (hi <= lo) {\r\n        return;\r\n    }\r\n    var mid = lo + ((hi - lo) / 2) | 0;\r\n    _sort(a, compare, lo, mid, aux);\r\n    _sort(a, compare, mid + 1, hi, aux);\r\n    if (compare(a[mid], a[mid + 1]) <= 0) {\r\n        // left and right are sorted and if the last-left element is less\r\n        // or equals than the first-right element there is nothing else\r\n        // to do\r\n        return;\r\n    }\r\n    _merge(a, compare, lo, mid, hi, aux);\r\n}\r\nexport function groupBy(data, compare) {\r\n    var result = [];\r\n    var currentGroup = undefined;\r\n    for (var _i = 0, _a = mergeSort(data.slice(0), compare); _i < _a.length; _i++) {\r\n        var element = _a[_i];\r\n        if (!currentGroup || compare(currentGroup[0], element) !== 0) {\r\n            currentGroup = [element];\r\n            result.push(currentGroup);\r\n        }\r\n        else {\r\n            currentGroup.push(element);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * @returns New array with all falsy values removed. The original array IS NOT modified.\r\n */\r\nexport function coalesce(array) {\r\n    return array.filter(function (e) { return !!e; });\r\n}\r\n/**\r\n * @returns false if the provided object is an array and not empty.\r\n */\r\nexport function isFalsyOrEmpty(obj) {\r\n    return !Array.isArray(obj) || obj.length === 0;\r\n}\r\nexport function isNonEmptyArray(obj) {\r\n    return Array.isArray(obj) && obj.length > 0;\r\n}\r\n/**\r\n * Removes duplicates from the given array. The optional keyFn allows to specify\r\n * how elements are checked for equalness by returning a unique string for each.\r\n */\r\nexport function distinct(array, keyFn) {\r\n    if (!keyFn) {\r\n        return array.filter(function (element, position) {\r\n            return array.indexOf(element) === position;\r\n        });\r\n    }\r\n    var seen = Object.create(null);\r\n    return array.filter(function (elem) {\r\n        var key = keyFn(elem);\r\n        if (seen[key]) {\r\n            return false;\r\n        }\r\n        seen[key] = true;\r\n        return true;\r\n    });\r\n}\r\nexport function distinctES6(array) {\r\n    var seen = new Set();\r\n    return array.filter(function (element) {\r\n        if (seen.has(element)) {\r\n            return false;\r\n        }\r\n        seen.add(element);\r\n        return true;\r\n    });\r\n}\r\nexport function fromSet(set) {\r\n    var result = [];\r\n    set.forEach(function (o) { return result.push(o); });\r\n    return result;\r\n}\r\nexport function firstIndex(array, fn) {\r\n    for (var i = 0; i < array.length; i++) {\r\n        var element = array[i];\r\n        if (fn(element)) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\nexport function first(array, fn, notFoundValue) {\r\n    if (notFoundValue === void 0) { notFoundValue = undefined; }\r\n    var index = firstIndex(array, fn);\r\n    return index < 0 ? notFoundValue : array[index];\r\n}\r\nexport function firstOrDefault(array, notFoundValue) {\r\n    return array.length > 0 ? array[0] : notFoundValue;\r\n}\r\nexport function flatten(arr) {\r\n    var _a;\r\n    return (_a = []).concat.apply(_a, arr);\r\n}\r\nexport function range(arg, to) {\r\n    var from = typeof to === 'number' ? arg : 0;\r\n    if (typeof to === 'number') {\r\n        from = arg;\r\n    }\r\n    else {\r\n        from = 0;\r\n        to = arg;\r\n    }\r\n    var result = [];\r\n    if (from <= to) {\r\n        for (var i = from; i < to; i++) {\r\n            result.push(i);\r\n        }\r\n    }\r\n    else {\r\n        for (var i = from; i > to; i--) {\r\n            result.push(i);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Insert `insertArr` inside `target` at `insertIndex`.\r\n * Please don't touch unless you understand https://jsperf.com/inserting-an-array-within-an-array\r\n */\r\nexport function arrayInsert(target, insertIndex, insertArr) {\r\n    var before = target.slice(0, insertIndex);\r\n    var after = target.slice(insertIndex);\r\n    return before.concat(insertArr, after);\r\n}\r\n/**\r\n * Pushes an element to the start of the array, if found.\r\n */\r\nexport function pushToStart(arr, value) {\r\n    var index = arr.indexOf(value);\r\n    if (index > -1) {\r\n        arr.splice(index, 1);\r\n        arr.unshift(value);\r\n    }\r\n}\r\n/**\r\n * Pushes an element to the end of the array, if found.\r\n */\r\nexport function pushToEnd(arr, value) {\r\n    var index = arr.indexOf(value);\r\n    if (index > -1) {\r\n        arr.splice(index, 1);\r\n        arr.push(value);\r\n    }\r\n}\r\nexport function find(arr, predicate) {\r\n    for (var i = 0; i < arr.length; i++) {\r\n        var element = arr[i];\r\n        if (predicate(element, i, arr)) {\r\n            return element;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexport function asArray(x) {\r\n    return Array.isArray(x) ? x : [x];\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n/**\r\n * Return a hash value for an object.\r\n */\r\nexport function hash(obj, hashVal) {\r\n    if (hashVal === void 0) { hashVal = 0; }\r\n    switch (typeof obj) {\r\n        case 'object':\r\n            if (obj === null) {\r\n                return numberHash(349, hashVal);\r\n            }\r\n            else if (Array.isArray(obj)) {\r\n                return arrayHash(obj, hashVal);\r\n            }\r\n            return objectHash(obj, hashVal);\r\n        case 'string':\r\n            return stringHash(obj, hashVal);\r\n        case 'boolean':\r\n            return booleanHash(obj, hashVal);\r\n        case 'number':\r\n            return numberHash(obj, hashVal);\r\n        case 'undefined':\r\n            return numberHash(0, 937);\r\n        default:\r\n            return numberHash(0, 617);\r\n    }\r\n}\r\nfunction numberHash(val, initialHashVal) {\r\n    return (((initialHashVal << 5) - initialHashVal) + val) | 0; // hashVal * 31 + ch, keep as int32\r\n}\r\nfunction booleanHash(b, initialHashVal) {\r\n    return numberHash(b ? 433 : 863, initialHashVal);\r\n}\r\nexport function stringHash(s, hashVal) {\r\n    hashVal = numberHash(149417, hashVal);\r\n    for (var i = 0, length_1 = s.length; i < length_1; i++) {\r\n        hashVal = numberHash(s.charCodeAt(i), hashVal);\r\n    }\r\n    return hashVal;\r\n}\r\nfunction arrayHash(arr, initialHashVal) {\r\n    initialHashVal = numberHash(104579, initialHashVal);\r\n    return arr.reduce(function (hashVal, item) { return hash(item, hashVal); }, initialHashVal);\r\n}\r\nfunction objectHash(obj, initialHashVal) {\r\n    initialHashVal = numberHash(181387, initialHashVal);\r\n    return Object.keys(obj).sort().reduce(function (hashVal, key) {\r\n        hashVal = stringHash(key, hashVal);\r\n        return hash(obj[key], hashVal);\r\n    }, initialHashVal);\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { Disposable } from './lifecycle.js';\r\nimport { Emitter } from './event.js';\r\nvar Action = /** @class */ (function (_super) {\r\n    __extends(Action, _super);\r\n    function Action(id, label, cssClass, enabled, actionCallback) {\r\n        if (label === void 0) { label = ''; }\r\n        if (cssClass === void 0) { cssClass = ''; }\r\n        if (enabled === void 0) { enabled = true; }\r\n        var _this = _super.call(this) || this;\r\n        _this._onDidChange = _this._register(new Emitter());\r\n        _this.onDidChange = _this._onDidChange.event;\r\n        _this._enabled = true;\r\n        _this._checked = false;\r\n        _this._id = id;\r\n        _this._label = label;\r\n        _this._cssClass = cssClass;\r\n        _this._enabled = enabled;\r\n        _this._actionCallback = actionCallback;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Action.prototype, \"id\", {\r\n        get: function () {\r\n            return this._id;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Action.prototype, \"label\", {\r\n        get: function () {\r\n            return this._label;\r\n        },\r\n        set: function (value) {\r\n            this._setLabel(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Action.prototype._setLabel = function (value) {\r\n        if (this._label !== value) {\r\n            this._label = value;\r\n            this._onDidChange.fire({ label: value });\r\n        }\r\n    };\r\n    Object.defineProperty(Action.prototype, \"tooltip\", {\r\n        get: function () {\r\n            return this._tooltip || '';\r\n        },\r\n        set: function (value) {\r\n            this._setTooltip(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Action.prototype._setTooltip = function (value) {\r\n        if (this._tooltip !== value) {\r\n            this._tooltip = value;\r\n            this._onDidChange.fire({ tooltip: value });\r\n        }\r\n    };\r\n    Object.defineProperty(Action.prototype, \"class\", {\r\n        get: function () {\r\n            return this._cssClass;\r\n        },\r\n        set: function (value) {\r\n            this._setClass(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Action.prototype._setClass = function (value) {\r\n        if (this._cssClass !== value) {\r\n            this._cssClass = value;\r\n            this._onDidChange.fire({ class: value });\r\n        }\r\n    };\r\n    Object.defineProperty(Action.prototype, \"enabled\", {\r\n        get: function () {\r\n            return this._enabled;\r\n        },\r\n        set: function (value) {\r\n            this._setEnabled(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Action.prototype._setEnabled = function (value) {\r\n        if (this._enabled !== value) {\r\n            this._enabled = value;\r\n            this._onDidChange.fire({ enabled: value });\r\n        }\r\n    };\r\n    Object.defineProperty(Action.prototype, \"checked\", {\r\n        get: function () {\r\n            return this._checked;\r\n        },\r\n        set: function (value) {\r\n            this._setChecked(value);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Action.prototype._setChecked = function (value) {\r\n        if (this._checked !== value) {\r\n            this._checked = value;\r\n            this._onDidChange.fire({ checked: value });\r\n        }\r\n    };\r\n    Action.prototype.run = function (event, _data) {\r\n        if (this._actionCallback) {\r\n            return this._actionCallback(event);\r\n        }\r\n        return Promise.resolve(true);\r\n    };\r\n    return Action;\r\n}(Disposable));\r\nexport { Action };\r\nvar ActionRunner = /** @class */ (function (_super) {\r\n    __extends(ActionRunner, _super);\r\n    function ActionRunner() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._onDidBeforeRun = _this._register(new Emitter());\r\n        _this.onDidBeforeRun = _this._onDidBeforeRun.event;\r\n        _this._onDidRun = _this._register(new Emitter());\r\n        _this.onDidRun = _this._onDidRun.event;\r\n        return _this;\r\n    }\r\n    ActionRunner.prototype.run = function (action, context) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!action.enabled) {\r\n                            return [2 /*return*/, Promise.resolve(null)];\r\n                        }\r\n                        this._onDidBeforeRun.fire({ action: action });\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, this.runAction(action, context)];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        this._onDidRun.fire({ action: action, result: result });\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        error_1 = _a.sent();\r\n                        this._onDidRun.fire({ action: action, error: error_1 });\r\n                        return [3 /*break*/, 4];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ActionRunner.prototype.runAction = function (action, context) {\r\n        var res = context ? action.run(context) : action.run();\r\n        return Promise.resolve(res);\r\n    };\r\n    return ActionRunner;\r\n}(Disposable));\r\nexport { ActionRunner };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n// Avoid circular dependency on EventEmitter by implementing a subset of the interface.\r\nvar ErrorHandler = /** @class */ (function () {\r\n    function ErrorHandler() {\r\n        this.listeners = [];\r\n        this.unexpectedErrorHandler = function (e) {\r\n            setTimeout(function () {\r\n                if (e.stack) {\r\n                    throw new Error(e.message + '\\n\\n' + e.stack);\r\n                }\r\n                throw e;\r\n            }, 0);\r\n        };\r\n    }\r\n    ErrorHandler.prototype.emit = function (e) {\r\n        this.listeners.forEach(function (listener) {\r\n            listener(e);\r\n        });\r\n    };\r\n    ErrorHandler.prototype.onUnexpectedError = function (e) {\r\n        this.unexpectedErrorHandler(e);\r\n        this.emit(e);\r\n    };\r\n    // For external errors, we don't want the listeners to be called\r\n    ErrorHandler.prototype.onUnexpectedExternalError = function (e) {\r\n        this.unexpectedErrorHandler(e);\r\n    };\r\n    return ErrorHandler;\r\n}());\r\nexport { ErrorHandler };\r\nexport var errorHandler = new ErrorHandler();\r\nexport function onUnexpectedError(e) {\r\n    // ignore errors from cancelled promises\r\n    if (!isPromiseCanceledError(e)) {\r\n        errorHandler.onUnexpectedError(e);\r\n    }\r\n    return undefined;\r\n}\r\nexport function onUnexpectedExternalError(e) {\r\n    // ignore errors from cancelled promises\r\n    if (!isPromiseCanceledError(e)) {\r\n        errorHandler.onUnexpectedExternalError(e);\r\n    }\r\n    return undefined;\r\n}\r\nexport function transformErrorForSerialization(error) {\r\n    if (error instanceof Error) {\r\n        var name_1 = error.name, message = error.message;\r\n        var stack = error.stacktrace || error.stack;\r\n        return {\r\n            $isError: true,\r\n            name: name_1,\r\n            message: message,\r\n            stack: stack\r\n        };\r\n    }\r\n    // return as is\r\n    return error;\r\n}\r\nvar canceledName = 'Canceled';\r\n/**\r\n * Checks if the given error is a promise in canceled state\r\n */\r\nexport function isPromiseCanceledError(error) {\r\n    return error instanceof Error && error.name === canceledName && error.message === canceledName;\r\n}\r\n/**\r\n * Returns an error that signals cancellation.\r\n */\r\nexport function canceled() {\r\n    var error = new Error(canceledName);\r\n    error.name = error.message;\r\n    return error;\r\n}\r\nexport function illegalArgument(name) {\r\n    if (name) {\r\n        return new Error(\"Illegal argument: \" + name);\r\n    }\r\n    else {\r\n        return new Error('Illegal argument');\r\n    }\r\n}\r\nexport function illegalState(name) {\r\n    if (name) {\r\n        return new Error(\"Illegal state: \" + name);\r\n    }\r\n    else {\r\n        return new Error('Illegal state');\r\n    }\r\n}\r\n"],"sourceRoot":""}