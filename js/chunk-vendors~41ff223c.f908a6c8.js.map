{"version":3,"sources":["webpack:///./node_modules/echarts/lib/component/tooltip.js","webpack:///./node_modules/echarts/lib/component/gridSimple.js","webpack:///./node_modules/echarts/lib/component/dataset.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipContent.js","webpack:///./node_modules/echarts/lib/component/legendScroll.js","webpack:///./node_modules/echarts/lib/component/legend/ScrollableLegendView.js","webpack:///./node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","webpack:///./node_modules/echarts/lib/component/axisPointer/globalListener.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipView.js","webpack:///./node_modules/echarts/lib/component/legend/legendAction.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","webpack:///./node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","webpack:///./node_modules/echarts/lib/component/axis/axisSplitHelper.js","webpack:///./node_modules/echarts/lib/component/legend/LegendView.js","webpack:///./node_modules/echarts/lib/component/axis/AxisView.js","webpack:///./node_modules/echarts/lib/component/helper/listComponent.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","webpack:///./node_modules/echarts/lib/component/legend/LegendModel.js","webpack:///./node_modules/echarts/lib/component/legend/legendFilter.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipModel.js","webpack:///./node_modules/echarts/lib/component/axis.js","webpack:///./node_modules/echarts/lib/component/axisPointer.js","webpack:///./node_modules/echarts/lib/component/axisPointer/modelHelper.js","webpack:///./node_modules/echarts/lib/component/legend.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","webpack:///./node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","webpack:///./node_modules/echarts/lib/component/axisPointer/axisTrigger.js","webpack:///./node_modules/echarts/lib/component/legend/scrollableLegendAction.js","webpack:///./node_modules/echarts/lib/component/legend/ScrollableLegendModel.js","webpack:///./node_modules/echarts/lib/component/axis/CartesianAxisView.js","webpack:///./node_modules/echarts/lib/component/axis/AxisBuilder.js","webpack:///./node_modules/echarts/lib/component/axisPointer/viewHelper.js"],"names":["echarts","registerAction","type","event","update","zrUtil","graphic","extendComponentView","render","gridModel","ecModel","this","group","removeAll","get","add","Rect","shape","coordinateSystem","getRect","style","defaults","fill","getItemStyle","silent","z2","registerPreprocessor","option","xAxis","yAxis","grid","ComponentModel","ComponentView","_sourceHelper","detectSourceFormat","_sourceType","SERIES_LAYOUT_BY_COLUMN","extend","defaultOption","seriesLayoutBy","sourceHeader","dimensions","source","optionUpdated","zrColor","eventUtil","domUtil","env","formatUtil","each","toCamelCase","vendors","gCssText","assembleTransition","duration","transitionCurve","transitionText","map","vendorPrefix","join","assembleFont","textStyleModel","cssText","fontSize","color","getTextColor","push","getFont","Math","round","name","val","assembleCssText","tooltipModel","transitionDuration","backgroundColor","getModel","padding","canvasSupported","toHex","borderName","camelCase","normalizeCssArray","makeStyleCoord","out","zr","appendToBody","zrX","zrY","zrPainter","painter","zrViewportRoot","getViewportRoot","transformLocalCoord","document","body","viewportRootOffset","getViewportRootOffset","offsetLeft","offsetTop","TooltipContent","container","api","opt","wxa","el","createElement","domBelongToZr","_zr","getZr","_appendToBody","_styleCoord","getWidth","getHeight","appendChild","_container","_show","_hideTimeout","self","onmouseenter","_enterable","clearTimeout","_inContent","onmousemove","e","window","handler","normalizeEvent","dispatch","onmouseleave","hideLater","_hideDelay","prototype","constructor","stl","currentStyle","defaultView","getComputedStyle","domStyle","position","show","styleCoord","display","innerHTML","pointerEvents","setContent","content","setEnterable","enterable","getSize","clientWidth","clientHeight","moveTo","left","top","hide","time","setTimeout","bind","isShow","dispose","parentNode","removeChild","getOuterSize","width","height","parseInt","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","_default","module","exports","layoutUtil","LegendView","Group","WH","XY","ScrollableLegendView","newlineDisabled","init","superCall","_currentIndex","_containerGroup","getContentGroup","_controllerGroup","_showController","resetInner","removeClipPath","__rectSize","renderInner","itemAlign","legendModel","selector","orient","selectorPosition","me","controllerGroup","pageIconSize","isArray","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","icon","createIcon","getOrient","onclick","_pageGo","x","y","Text","textFill","font","textVerticalAlign","textAlign","layoutInner","maxSize","isFirstRender","selectorGroup","getSelectorGroup","orientIdx","index","wh","xy","hw","yx","box","selectorButtonGap","selectorRect","getBoundingRect","selectorPos","processMaxSize","clone","mainRect","_layoutContentAndController","offset","max","min","attr","contentGroup","containerGroup","contentRect","controllerRect","showController","contentPos","containerPos","controllerPos","pageButtonGap","retrieve2","pageButtonPosition","clipShape","setClipPath","eachChild","child","invisible","pageInfo","_getPageInfo","pageIndex","updateProps","contentPosition","_updatePageInfoView","to","scrollDataIndex","dispatchAction","legendId","id","canJump","childOfName","setStyle","cursor","pageText","pageFormatter","current","total","pageCount","isString","replace","containerRectSize","targetItemIndex","_findTargetItemIndex","children","targetItem","itemCount","length","pCount","result","slice","pagePrevDataIndex","pageNextDataIndex","targetItemInfo","getItemInfo","s","i","winStartItemInfo","winEndItemInfo","currItemInfo","intersect","itemRect","start","__legendDataIndex","itemInfo","winStart","targetDataIndex","defaultIndex","idx","legendDataIdx","modelUtil","finder","seriesModel","point","seriesIndex","getSeriesByIndex","data","getData","dataIndex","queryDataIndex","getItemGraphicEl","coordSys","getTooltipPosition","dataToPoint","getValues","dim","mapDimension","rect","applyTransform","transform","_model","makeInner","inner","register","key","node","records","initGlobalListeners","record","useHandler","eventType","cb","on","dis","makeDispatchAction","dispatchTooltipFinally","pendings","initialized","curry","doEnter","onLeave","actuallyPayload","showLen","showTip","hideLen","hideTip","currTrigger","payload","pendingList","unregister","TooltipRichContent","numberUtil","findPointFromSeries","Model","globalListener","axisHelper","axisPointerViewHelper","getTooltipRenderMode","parsePercent","proxyRect","tooltipContent","getComponent","renderMode","_renderMode","getDom","_newLine","_tooltipContent","_tooltipModel","_ecModel","_api","_lastDataByCoordSys","_alwaysShowContent","_initGlobalListener","_keepShow","triggerOn","indexOf","_tryShow","_hide","_lastX","_lastY","_refreshUpdateTimeout","isDisposed","manuallyShowTip","from","uid","_ticket","dataByCoordSys","tooltip","offsetX","offsetY","target","tooltipOption","_manuallyAxisShowTip","pointInfo","cx","cy","findHover","manuallyHideTip","coordSysAxesInfo","buildTooltipModel","getItemModel","model","_showAxisTooltip","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","delay","_showTimout","globalTooltipModel","singleDefaultHTML","singleParamsList","singleTooltipModel","newLine","markers","itemCoordSys","dataByAxis","item","axisModel","axisDim","axisIndex","axisValue","value","seriesDefaultHTML","valueLabel","getValueLabel","axis","seriesDataIndices","valueLabelOpt","idxItem","series","dataIndexInside","dataParams","getDataParams","axisType","axisId","getAxisRawValue","axisValueLabel","html","seriesTooltip","formatTooltip","isObject","newMarkers","merge","firstLine","encodeHTML","reverse","positionExpr","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","undefined","dataModel","dataType","tooltipTrigger","defaultHtml","params","asyncTicket","getRawIndex","tooltipOpt","formatter","subTooltipModel","formatTpl","callback","cbTicket","viewWidth","viewHeight","contentSize","align","vAlign","viewSize","layoutRect","getLayoutRect","pos","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","j","newIdxItem","modelCascade","resultModel","pop","isInstance","gapH","gapV","size","domWidth","domHeight","gap","rectWidth","rectHeight","legendSelectActionHandler","methodName","isSelected","selectedMap","isToggleSelect","eachComponent","legendData","isItemSelected","hasOwnProperty","selected","AxisPointerModel","extendComponentModel","zlevel","z","snap","triggerTooltip","status","link","animation","animationDurationUpdate","lineStyle","shadowStyle","label","precision","margin","borderColor","borderWidth","shadowBlur","shadowColor","handle","shadowOffsetX","shadowOffsetY","throttle","BaseAxisPointer","viewHelper","cartesianAxisHelper","AxisView","CartesianAxisPointer","makeElOption","elOption","axisPointerModel","axisPointerType","otherExtent","getCartesian","getOtherAxis","getGlobalExtent","pixelValue","toGlobalCoord","dataToCoord","elStyle","buildElStyle","pointerOption","pointerShapeBuilder","graphicKey","pointer","layoutInfo","layout","buildCartesianSingleLabelElOption","getHandleTransform","labelInside","labelMargin","getTransformedPosition","rotation","labelDirection","PI","updateHandleTransform","delta","axisExtent","dimIndex","currPosition","cursorOtherValue","cursorPoint","tooltipOptions","verticalAlign","line","targetShape","makeLineShape","getAxisDimIndex","subPixelOptimize","shadow","bandWidth","getBandWidth","span","makeRectShape","registerAxisPointerClass","rectCoordAxisBuildSplitArea","axisView","axisGroup","scale","isBlank","splitAreaModel","areaStyleModel","areaColors","gridRect","ticksCoords","getTicksCoords","tickModel","clamp","areaColorsLen","lastSplitAreaColors","__splitAreaColors","newSplitAreaColors","createHashMap","colorIndex","cIndex","tickValue","prev","coord","areaStyle","getAreaStyle","tickCoord","isHorizontal","set","anid","rectCoordAxisHandleRemove","_config","__DEV__","_symbol","createSymbol","_listComponent","makeBackground","_contentGroup","_backgroundEl","_selectorGroup","_isFirstRender","positionInfo","getBoxLayoutParams","viewportSize","remove","legendDrawnMap","selectMode","excludeSeriesId","eachRawSeries","itemModel","getSeriesByName","getVisual","legendSymbolType","symbolType","itemGroup","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","legendVisualProvider","provider","containName","indexOfName","getItemVisual","newline","_createSelector","createSelectorButton","selectorItem","labelText","labelModel","emphasisLabelModel","setLabelStyle","hoverStyle","defaultText","title","isRectText","setHoverStyle","itemWidth","itemHeight","inactiveColor","inactiveBorderColor","symbolKeepAspect","legendModelItemStyle","itemIcon","legendGlobalTooltipModel","parentModel","legendSymbol","setSymbolStyle","legendSymbolCenter","textX","setTextStyle","text","hitRect","formatterParams","componentType","legendIndex","componentIndex","$vars","symbol","itemStyle","stroke","seriesName","dataName","storage","getDisplayList","useHoverLayer","axisPointerModelHelper","_axisPointer","axisPointerClass","fixValue","superApply","arguments","updateAxisPointer","force","axisPointer","disposeAxisPointer","forceRender","Clazz","getAxisPointerClass","getAxisPointerModel","axisPointerClazz","clazz","_layout","layoutBox","positionElement","componentModel","boxLayoutParams","r","markerRich","prefix","suffix","startId","endId","substr","textWidth","textHeight","textBorderRadius","textBackgroundColor","textOffset","rich","textLineHeight","textPadding","bounding","isNameSpecified","lang","langSelector","legend","defaultSelectorOption","all","inverse","LegendModel","dependencies","layoutMode","ignoreSize","mergeDefaultAndTheme","_updateSelector","mergeOption","_updateData","_data","hasSelected","select","potentialData","availableNames","isPotential","names","getAllNames","isSeriesFiltered","concat","_availableNames","rawData","dataItem","selectedMode","unSelect","toggleSelected","allSelect","inverseSelect","borderRadius","itemGap","textStyle","selectorLabel","fontFamily","emphasis","selectorItemGap","legendModels","findComponents","mainType","filterSeries","showContent","trigger","alwaysShowContent","displayMode","confine","showDelay","hideDelay","extraCssText","animationEasingUpdate","crossStyle","axisTrigger","registerProcessor","PRIORITY","PROCESSOR","STATISTIC","collect","axesInfo","seriesInvolved","coordSysMap","collectAxesInfo","collectSeriesInfo","globalAxisPointerModel","linksOption","linkGroups","getCoordinateSystems","axisPointerEnabled","coordSysKey","makeKey","axesInfoInCoordSys","coordSysModel","baseTooltipModel","getAxes","saveTooltipAxisInfo","getTooltipAxes","triggerAxis","cross","tooltipAxes","baseAxes","otherAxes","fromTooltip","axisPointerShow","isHandleTrigger","makeAxisPointerModel","involveSeries","axisInfo","useHandle","seriesModels","groupIndex","getLinkGroupIndex","linkGroup","mapper","tooltipAxisPointerModel","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","eachSeries","seriesTooltipTrigger","seriesTooltipShow","getAxis","seriesDataCount","count","linkOption","checkPropInLink","linkPropValue","axisPropValue","getAxisInfo","parse","extent","getExtent","legendFilter","Component","SERIES_FILTER","registerSubTypeDefaulter","AxisPointerView","clazzUtil","eventTool","throttleUtil","animationModel","moveAnimation","props","propsEqual","lastProp","stopAnimation","lastProps","newProps","equals","updateLabelShowHide","labelEl","getHandleTransProps","trans","updateMandatoryProps","traverse","_group","_lastGraphicKey","_handle","_dragging","_lastValue","_lastStatus","_payloadInfo","animationThreshold","_axisModel","_axisPointerModel","clear","_moveAnimation","determineAnimation","doUpdateProps","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","_renderHandle","isCategoryAxis","useSnap","abs","pointerEl","isInit","handleModel","draggable","stop","onmousedown","_onHandleDragMove","drift","ondragend","_onHandleDragEnd","includeStyles","handleSize","createOrUpdate","_moveHandleToValue","dx","dy","_doDispatchAxisPointer","payloadInfo","doClear","buildLabel","xDimIndex","enableClassExtend","modelHelper","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputFinder","showValueMap","list","updaters","showPointer","showTooltip","coordSysContainsPoint","containPoint","inputAxisInfo","findInputAxisInfo","pointToData","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","dontSnap","containData","buildPayloadsBySeries","payloadBatch","snapToValue","minDist","Number","MAX_VALUE","minDiff","seriesNestestValue","dataIndices","dataDim","getAxisTooltipData","nestestValue","indicesOfNearest","isFinite","diff","dist","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","outputAxesInfo","valItem","sampleItem","escapeConnect","highDownKey","lastHighlights","newHighlights","batchItem","toHighlight","toDownplay","batch","axisName","isNaN","subType","query","setScrollDataIndex","mergeLayoutParam","getLayoutParams","ScrollableLegendModel","pageButtonItemGap","pageIcons","horizontal","vertical","pageIconColor","pageIconInactiveColor","pageTextStyle","extraOpt","inputPositionParams","mergeAndNormalizeLayoutParams","raw","AxisBuilder","_axisSplitHelper","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","_axisGroup","getCoordSysModel","axisBuilder","getGroup","groupTransition","_splitLine","splitLineModel","lineStyleModel","lineColors","lineCount","p1","p2","getLineStyle","Line","x1","y1","x2","y2","_minorSplitLine","minorSplitLineModel","minorTicksCoords","getMinorTicksCoords","k","_splitArea","_util","retrieve","_number","isRadianAroundZero","remRadian","matrixUtil","_vector","v2ApplyTransform","_axisHelper","shouldShowAllLabels","labelOffset","nameDirection","tickDirection","dumbGroup","updateTransform","_transform","_dumbGroup","hasBuilder","builders","call","axisLine","matrix","pt1","pt2","lineCap","strokeContainThreshold","arrows","arrowSize","arrowOffset","symbolWidth","symbolHeight","rotate","sqrt","cos","sin","axisTickLabel","ticksEls","buildAxisMajorTicks","labelEls","buildAxisLabel","fixMinMaxLabelShow","buildAxisMinorTicks","labelLayout","axisNameAvailableWidth","nameLocation","gapSignal","isNameLocationCenter","nameRotation","innerTextLayout","endTextLayout","textFont","truncateOpt","ellipsis","maxWidth","nameTruncateMaxWidth","truncatedText","truncateText","minChar","placeholder","textEl","__fullText","__truncatedText","isLabelSilent","eventData","makeAxisEventDataBase","targetType","decomposeTransform","axisRotation","textRotation","direction","rotationDiff","textPosition","textRotate","onLeft","tickEls","showMinLabel","showMaxLabel","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","ignore","next","firstRect","nextRect","mRotationBack","identity","mul","getLocalTransform","createTicks","tickTransform","tickEndCoord","tickLineStyle","aniid","tickEl","minorTickModel","minorTickLineStyle","minorTicksEls","axisLabelShow","labels","getViewLabels","labelRotation","labelRotate","rawCategoryData","getCategories","triggerEvent","labelItem","formattedLabel","rawLabel","itemLabelModel","textColor","getShallow","textContain","styleModel","buildLabelElOption","labelPos","paddings","textRect","confineInContainer","bgColor","lineWidth","getLabel","axisDimension","seriesData","isFunction","create","translate","textLayout","makeSectorShape","r0","startAngle","endAngle","clockwise"],"mappings":"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","file":"js/chunk-vendors~41ff223c.f908a6c8.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./axisPointer\");\n\nrequire(\"./tooltip/TooltipModel\");\n\nrequire(\"./tooltip/TooltipView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Better way to pack data in graphic element\n\n/**\n * @action\n * @property {string} type\n * @property {number} seriesIndex\n * @property {number} dataIndex\n * @property {number} [x]\n * @property {number} [y]\n */\necharts.registerAction({\n  type: 'showTip',\n  event: 'showTip',\n  update: 'tooltip:manuallyShowTip'\n}, // noop\nfunction () {});\necharts.registerAction({\n  type: 'hideTip',\n  event: 'hideTip',\n  update: 'tooltip:manuallyHideTip'\n}, // noop\nfunction () {});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../util/graphic\");\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./axis\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid view\necharts.extendComponentView({\n  type: 'grid',\n  render: function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new graphic.Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: zrUtil.defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  }\n});\necharts.registerPreprocessor(function (option) {\n  // Only create grid when need\n  if (option.xAxis && option.yAxis && !option.grid) {\n    option.grid = {};\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar ComponentModel = require(\"../model/Component\");\n\nvar ComponentView = require(\"../view/Component\");\n\nvar _sourceHelper = require(\"../data/helper/sourceHelper\");\n\nvar detectSourceFormat = _sourceHelper.detectSourceFormat;\n\nvar _sourceType = require(\"../data/helper/sourceType\");\n\nvar SERIES_LAYOUT_BY_COLUMN = _sourceType.SERIES_LAYOUT_BY_COLUMN;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * This module is imported by echarts directly.\n *\n * Notice:\n * Always keep this file exists for backward compatibility.\n * Because before 4.1.0, dataset is an optional component,\n * some users may import this module manually.\n */\nComponentModel.extend({\n  type: 'dataset',\n\n  /**\n   * @protected\n   */\n  defaultOption: {\n    // 'row', 'column'\n    seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n    // null/'auto': auto detect header, see \"module:echarts/data/helper/sourceHelper\"\n    sourceHeader: null,\n    dimensions: null,\n    source: null\n  },\n  optionUpdated: function () {\n    detectSourceFormat(this);\n  }\n});\nComponentView.extend({\n  type: 'dataset'\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar eventUtil = require(\"zrender/lib/core/event\");\n\nvar domUtil = require(\"zrender/lib/core/dom\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar formatUtil = require(\"../../util/format\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar toCamelCase = formatUtil.toCamelCase;\nvar vendors = ['', '-webkit-', '-moz-', '-o-'];\nvar gCssText = 'position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;';\n/**\n * @param {number} duration\n * @return {string}\n * @inner\n */\n\nfunction assembleTransition(duration) {\n  var transitionCurve = 'cubic-bezier(0.23, 1, 0.32, 1)';\n  var transitionText = 'left ' + duration + 's ' + transitionCurve + ',' + 'top ' + duration + 's ' + transitionCurve;\n  return zrUtil.map(vendors, function (vendorPrefix) {\n    return vendorPrefix + 'transition:' + transitionText;\n  }).join(';');\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n/**\n * @param {Object} tooltipModel\n * @return {string}\n * @inner\n */\n\n\nfunction assembleCssText(tooltipModel) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = tooltipModel.get('padding'); // Animation transition. Do not animate when transitionDuration is 0.\n\n  transitionDuration && cssText.push(assembleTransition(transitionDuration));\n\n  if (backgroundColor) {\n    if (env.canvasSupported) {\n      cssText.push('background-Color:' + backgroundColor);\n    } else {\n      // for ie\n      cssText.push('background-Color:#' + zrColor.toHex(backgroundColor));\n      cssText.push('filter:alpha(opacity=70)');\n    }\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + formatUtil.normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n} // If not able to make, do not modify the input `out`.\n\n\nfunction makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n\n  if (appendToBody) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      domUtil.transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY; // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n}\n/**\n * @alias module:echarts/component/tooltip/TooltipContent\n * @param {HTMLElement} container\n * @param {ExtensionAPI} api\n * @param {Object} [opt]\n * @param {boolean} [opt.appendToBody]\n *        `false`: the DOM element will be inside the container. Default value.\n *        `true`: the DOM element will be appended to HTML body, which avoid\n *                some overflow clip but intrude outside of the container.\n * @constructor\n */\n\n\nfunction TooltipContent(container, api, opt) {\n  if (env.wxa) {\n    return null;\n  }\n\n  var el = document.createElement('div');\n  el.domBelongToZr = true;\n  this.el = el;\n  var zr = this._zr = api.getZr();\n  var appendToBody = this._appendToBody = opt && opt.appendToBody;\n  this._styleCoord = [0, 0];\n  makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\n\n  if (appendToBody) {\n    document.body.appendChild(el);\n  } else {\n    container.appendChild(el);\n  }\n\n  this._container = container;\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout; // FIXME\n  // Is it needed to trigger zr event manually if\n  // the browser do not support `pointer-events: none`.\n\n  var self = this;\n\n  el.onmouseenter = function () {\n    // clear the timeout in hideLater and keep showing tooltip\n    if (self._enterable) {\n      clearTimeout(self._hideTimeout);\n      self._show = true;\n    }\n\n    self._inContent = true;\n  };\n\n  el.onmousemove = function (e) {\n    e = e || window.event;\n\n    if (!self._enterable) {\n      // `pointer-events: none` is set to tooltip content div\n      // if `enterable` is set as `false`, and `el.onmousemove`\n      // can not be triggered. But in browser that do not\n      // support `pointer-events`, we need to do this:\n      // Try trigger zrender event to avoid mouse\n      // in and out shape too frequently\n      var handler = zr.handler;\n      var zrViewportRoot = zr.painter.getViewportRoot();\n      eventUtil.normalizeEvent(zrViewportRoot, e, true);\n      handler.dispatch('mousemove', e);\n    }\n  };\n\n  el.onmouseleave = function () {\n    if (self._enterable) {\n      if (self._show) {\n        self.hideLater(self._hideDelay);\n      }\n    }\n\n    self._inContent = false;\n  };\n}\n\nTooltipContent.prototype = {\n  constructor: TooltipContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var stl = container.currentStyle || document.defaultView.getComputedStyle(container);\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && stl.position !== 'absolute') {\n      domStyle.position = 'relative';\n    } // Hide the tooltip\n    // PENDING\n    // this.hide();\n\n  },\n  show: function (tooltipModel) {\n    clearTimeout(this._hideTimeout);\n    var el = this.el;\n    var styleCoord = this._styleCoord;\n    el.style.cssText = gCssText + assembleCssText(tooltipModel) // Because of the reason described in:\n    // http://stackoverflow.com/questions/21125587/css3-transition-not-working-in-chrome-anymore\n    // we should set initial value to `left` and `top`.\n    + ';left:' + styleCoord[0] + 'px;top:' + styleCoord[1] + 'px;' + (tooltipModel.get('extraCssText') || '');\n    el.style.display = el.innerHTML ? 'block' : 'none'; // If mouse occsionally move over the tooltip, a mouseout event will be\n    // triggered by canvas, and cuase some unexpectable result like dragging\n    // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n    // it. Although it is not suppored by IE8~IE10, fortunately it is a rare\n    // scenario.\n\n    el.style.pointerEvents = this._enterable ? 'auto' : 'none';\n    this._show = true;\n  },\n  setContent: function (content) {\n    this.el.innerHTML = content == null ? '' : content;\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var el = this.el;\n    return [el.clientWidth, el.clientHeight];\n  },\n  moveTo: function (zrX, zrY) {\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\n    var style = this.el.style;\n    style.left = styleCoord[0] + 'px';\n    style.top = styleCoord[1] + 'px';\n  },\n  hide: function () {\n    this.el.style.display = 'none';\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  dispose: function () {\n    this.el.parentNode.removeChild(this.el);\n  },\n  getOuterSize: function () {\n    var width = this.el.clientWidth;\n    var height = this.el.clientHeight; // Consider browser compatibility.\n    // IE8 does not support getComputedStyle.\n\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      var stl = document.defaultView.getComputedStyle(this.el);\n\n      if (stl) {\n        width += parseInt(stl.borderLeftWidth, 10) + parseInt(stl.borderRightWidth, 10);\n        height += parseInt(stl.borderTopWidth, 10) + parseInt(stl.borderBottomWidth, 10);\n      }\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n};\nvar _default = TooltipContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./legend\");\n\nrequire(\"./legend/ScrollableLegendModel\");\n\nrequire(\"./legend/ScrollableLegendView\");\n\nrequire(\"./legend/scrollableLegendAction\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar LegendView = require(\"./LegendView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Separate legend and scrollable legend to reduce package size.\n */\nvar Group = graphic.Group;\nvar WH = ['width', 'height'];\nvar XY = ['x', 'y'];\nvar ScrollableLegendView = LegendView.extend({\n  type: 'legend.scroll',\n  newlineDisabled: true,\n  init: function () {\n    ScrollableLegendView.superCall(this, 'init');\n    /**\n     * @private\n     * @type {number} For `scroll`.\n     */\n\n    this._currentIndex = 0;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this.group.add(this._containerGroup = new Group());\n\n    this._containerGroup.add(this.getContentGroup());\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n\n    this.group.add(this._controllerGroup = new Group());\n    /**\n     *\n     * @private\n     */\n\n    this._showController;\n  },\n\n  /**\n   * @override\n   */\n  resetInner: function () {\n    ScrollableLegendView.superCall(this, 'resetInner');\n\n    this._controllerGroup.removeAll();\n\n    this._containerGroup.removeClipPath();\n\n    this._containerGroup.__rectSize = null;\n  },\n\n  /**\n   * @override\n   */\n  renderInner: function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var me = this; // Render content items.\n\n    ScrollableLegendView.superCall(this, 'renderInner', itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n    var controllerGroup = this._controllerGroup; // FIXME: support be 'auto' adapt to size number text length,\n    // e.g., '3/12345' should not overlap with the control arrow button.\n\n    var pageIconSize = legendModel.get('pageIconSize', true);\n\n    if (!zrUtil.isArray(pageIconSize)) {\n      pageIconSize = [pageIconSize, pageIconSize];\n    }\n\n    createPageButton('pagePrev', 0);\n    var pageTextStyleModel = legendModel.getModel('pageTextStyle');\n    controllerGroup.add(new graphic.Text({\n      name: 'pageText',\n      style: {\n        textFill: pageTextStyleModel.getTextColor(),\n        font: pageTextStyleModel.getFont(),\n        textVerticalAlign: 'middle',\n        textAlign: 'center'\n      },\n      silent: true\n    }));\n    createPageButton('pageNext', 1);\n\n    function createPageButton(name, iconIdx) {\n      var pageDataIndexName = name + 'DataIndex';\n      var icon = graphic.createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\n        // Buttons will be created in each render, so we do not need\n        // to worry about avoiding using legendModel kept in scope.\n        onclick: zrUtil.bind(me._pageGo, me, pageDataIndexName, legendModel, api)\n      }, {\n        x: -pageIconSize[0] / 2,\n        y: -pageIconSize[1] / 2,\n        width: pageIconSize[0],\n        height: pageIconSize[1]\n      });\n      icon.name = name;\n      controllerGroup.add(icon);\n    }\n  },\n\n  /**\n   * @override\n   */\n  layoutInner: function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var hw = WH[1 - orientIdx];\n    var yx = XY[1 - orientIdx];\n    selector && layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n    'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n    var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n    var selectorRect = selectorGroup.getBoundingRect();\n    var selectorPos = [-selectorRect.x, -selectorRect.y];\n    var processMaxSize = zrUtil.clone(maxSize);\n    selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);\n\n    var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx);\n\n    if (selector) {\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;\n      } else {\n        var offset = selectorRect[wh] + selectorButtonGap;\n        selectorPos[orientIdx] -= offset;\n        mainRect[xy] -= offset;\n      }\n\n      mainRect[wh] += selectorRect[wh] + selectorButtonGap;\n      selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;\n      mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);\n      selectorGroup.attr('position', selectorPos);\n    }\n\n    return mainRect;\n  },\n  _layoutContentAndController: function (legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx) {\n    var contentGroup = this.getContentGroup();\n    var containerGroup = this._containerGroup;\n    var controllerGroup = this._controllerGroup; // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\n    layoutUtil.box( // Buttons in controller are layout always horizontally.\n    'horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\n    var contentRect = contentGroup.getBoundingRect();\n    var controllerRect = controllerGroup.getBoundingRect();\n    var showController = this._showController = contentRect[wh] > maxSize[wh];\n    var contentPos = [-contentRect.x, -contentRect.y]; // Remain contentPos when scroll animation perfroming.\n    // If first rendering, `contentGroup.position` is [0, 0], which\n    // does not make sense and may cause unexepcted animation if adopted.\n\n    if (!isFirstRender) {\n      contentPos[orientIdx] = contentGroup.position[orientIdx];\n    } // Layout container group based on 0.\n\n\n    var containerPos = [0, 0];\n    var controllerPos = [-controllerRect.x, -controllerRect.y];\n    var pageButtonGap = zrUtil.retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true)); // Place containerGroup and controllerGroup and contentGroup.\n\n    if (showController) {\n      var pageButtonPosition = legendModel.get('pageButtonPosition', true); // controller is on the right / bottom.\n\n      if (pageButtonPosition === 'end') {\n        controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\n      } // controller is on the left / top.\n      else {\n          containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\n        }\n    } // Always align controller to content as 'middle'.\n\n\n    controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\n    contentGroup.attr('position', contentPos);\n    containerGroup.attr('position', containerPos);\n    controllerGroup.attr('position', controllerPos); // Calculate `mainRect` and set `clipPath`.\n    // mainRect should not be calculated by `this.group.getBoundingRect()`\n    // for sake of the overflow.\n\n    var mainRect = {\n      x: 0,\n      y: 0\n    }; // Consider content may be overflow (should be clipped).\n\n    mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\n    mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]); // `containerRect[yx] + containerPos[1 - orientIdx]` is 0.\n\n    mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\n    containerGroup.__rectSize = maxSize[wh];\n\n    if (showController) {\n      var clipShape = {\n        x: 0,\n        y: 0\n      };\n      clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\n      clipShape[hw] = mainRect[hw];\n      containerGroup.setClipPath(new graphic.Rect({\n        shape: clipShape\n      })); // Consider content may be larger than container, container rect\n      // can not be obtained from `containerGroup.getBoundingRect()`.\n\n      containerGroup.__rectSize = clipShape[wh];\n    } else {\n      // Do not remove or ignore controller. Keep them set as placeholders.\n      controllerGroup.eachChild(function (child) {\n        child.attr({\n          invisible: true,\n          silent: true\n        });\n      });\n    } // Content translate animation.\n\n\n    var pageInfo = this._getPageInfo(legendModel);\n\n    pageInfo.pageIndex != null && graphic.updateProps(contentGroup, {\n      position: pageInfo.contentPosition\n    }, // When switch from \"show controller\" to \"not show controller\", view should be\n    // updated immediately without animation, otherwise causes weird effect.\n    showController ? legendModel : false);\n\n    this._updatePageInfoView(legendModel, pageInfo);\n\n    return mainRect;\n  },\n  _pageGo: function (to, legendModel, api) {\n    var scrollDataIndex = this._getPageInfo(legendModel)[to];\n\n    scrollDataIndex != null && api.dispatchAction({\n      type: 'legendScroll',\n      scrollDataIndex: scrollDataIndex,\n      legendId: legendModel.id\n    });\n  },\n  _updatePageInfoView: function (legendModel, pageInfo) {\n    var controllerGroup = this._controllerGroup;\n    zrUtil.each(['pagePrev', 'pageNext'], function (name) {\n      var canJump = pageInfo[name + 'DataIndex'] != null;\n      var icon = controllerGroup.childOfName(name);\n\n      if (icon) {\n        icon.setStyle('fill', canJump ? legendModel.get('pageIconColor', true) : legendModel.get('pageIconInactiveColor', true));\n        icon.cursor = canJump ? 'pointer' : 'default';\n      }\n    });\n    var pageText = controllerGroup.childOfName('pageText');\n    var pageFormatter = legendModel.get('pageFormatter');\n    var pageIndex = pageInfo.pageIndex;\n    var current = pageIndex != null ? pageIndex + 1 : 0;\n    var total = pageInfo.pageCount;\n    pageText && pageFormatter && pageText.setStyle('text', zrUtil.isString(pageFormatter) ? pageFormatter.replace('{current}', current).replace('{total}', total) : pageFormatter({\n      current: current,\n      total: total\n    }));\n  },\n\n  /**\n   * @param {module:echarts/model/Model} legendModel\n   * @return {Object} {\n   *  contentPosition: Array.<number>, null when data item not found.\n   *  pageIndex: number, null when data item not found.\n   *  pageCount: number, always be a number, can be 0.\n   *  pagePrevDataIndex: number, null when no previous page.\n   *  pageNextDataIndex: number, null when no next page.\n   * }\n   */\n  _getPageInfo: function (legendModel) {\n    var scrollDataIndex = legendModel.get('scrollDataIndex', true);\n    var contentGroup = this.getContentGroup();\n    var containerRectSize = this._containerGroup.__rectSize;\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n\n    var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);\n\n    var children = contentGroup.children();\n    var targetItem = children[targetItemIndex];\n    var itemCount = children.length;\n    var pCount = !itemCount ? 0 : 1;\n    var result = {\n      contentPosition: contentGroup.position.slice(),\n      pageCount: pCount,\n      pageIndex: pCount - 1,\n      pagePrevDataIndex: null,\n      pageNextDataIndex: null\n    };\n\n    if (!targetItem) {\n      return result;\n    }\n\n    var targetItemInfo = getItemInfo(targetItem);\n    result.contentPosition[orientIdx] = -targetItemInfo.s; // Strategy:\n    // (1) Always align based on the left/top most item.\n    // (2) It is user-friendly that the last item shown in the\n    // current window is shown at the begining of next window.\n    // Otherwise if half of the last item is cut by the window,\n    // it will have no chance to display entirely.\n    // (3) Consider that item size probably be different, we\n    // have calculate pageIndex by size rather than item index,\n    // and we can not get page index directly by division.\n    // (4) The window is to narrow to contain more than\n    // one item, we should make sure that the page can be fliped.\n\n    for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {\n      currItemInfo = getItemInfo(children[i]);\n\n      if ( // Half of the last item is out of the window.\n      !currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize || // If the current item does not intersect with the window, the new page\n      // can be started at the current item or the last item.\n      currItemInfo && !intersect(currItemInfo, winStartItemInfo.s)) {\n        if (winEndItemInfo.i > winStartItemInfo.i) {\n          winStartItemInfo = winEndItemInfo;\n        } else {\n          // e.g., when page size is smaller than item size.\n          winStartItemInfo = currItemInfo;\n        }\n\n        if (winStartItemInfo) {\n          if (result.pageNextDataIndex == null) {\n            result.pageNextDataIndex = winStartItemInfo.i;\n          }\n\n          ++result.pageCount;\n        }\n      }\n\n      winEndItemInfo = currItemInfo;\n    }\n\n    for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {\n      currItemInfo = getItemInfo(children[i]);\n\n      if ( // If the the end item does not intersect with the window started\n      // from the current item, a page can be settled.\n      (!currItemInfo || !intersect(winEndItemInfo, currItemInfo.s)) && // e.g., when page size is smaller than item size.\n      winStartItemInfo.i < winEndItemInfo.i) {\n        winEndItemInfo = winStartItemInfo;\n\n        if (result.pagePrevDataIndex == null) {\n          result.pagePrevDataIndex = winStartItemInfo.i;\n        }\n\n        ++result.pageCount;\n        ++result.pageIndex;\n      }\n\n      winStartItemInfo = currItemInfo;\n    }\n\n    return result;\n\n    function getItemInfo(el) {\n      if (el) {\n        var itemRect = el.getBoundingRect();\n        var start = itemRect[xy] + el.position[orientIdx];\n        return {\n          s: start,\n          e: start + itemRect[wh],\n          i: el.__legendDataIndex\n        };\n      }\n    }\n\n    function intersect(itemInfo, winStart) {\n      return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;\n    }\n  },\n  _findTargetItemIndex: function (targetDataIndex) {\n    if (!this._showController) {\n      return 0;\n    }\n\n    var index;\n    var contentGroup = this.getContentGroup();\n    var defaultIndex;\n    contentGroup.eachChild(function (child, idx) {\n      var legendDataIdx = child.__legendDataIndex; // FIXME\n      // If the given targetDataIndex (from model) is illegal,\n      // we use defualtIndex. But the index on the legend model and\n      // action payload is still illegal. That case will not be\n      // changed until some scenario requires.\n\n      if (defaultIndex == null && legendDataIdx != null) {\n        defaultIndex = idx;\n      }\n\n      if (legendDataIdx === targetDataIndex) {\n        index = idx;\n      }\n    });\n    return index != null ? index : defaultIndex;\n  }\n});\nvar _default = ScrollableLegendView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param {module:echarts/model/Global} ecModel\n * @return {Object} {point: [x, y], el: ...} point Will not be null.\n */\nfunction _default(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n      return data.mapDimension(dim);\n    }), dataIndex, true)) || [];\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nfunction register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\nfunction unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}\n\nexports.register = register;\nexports.unregister = unregister;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar TooltipContent = require(\"./TooltipContent\");\n\nvar TooltipRichContent = require(\"./TooltipRichContent\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar findPointFromSeries = require(\"../axisPointer/findPointFromSeries\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar Model = require(\"../../model/Model\");\n\nvar globalListener = require(\"../axisPointer/globalListener\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar axisPointerViewHelper = require(\"../axisPointer/viewHelper\");\n\nvar _model = require(\"../../util/model\");\n\nvar getTooltipRenderMode = _model.getTooltipRenderMode;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar parsePercent = numberUtil.parsePercent;\nvar proxyRect = new graphic.Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar _default = echarts.extendComponentView({\n  type: 'tooltip',\n  init: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = tooltipModel.get('renderMode');\n    this._renderMode = getTooltipRenderMode(renderMode);\n    var tooltipContent;\n\n    if (this._renderMode === 'html') {\n      tooltipContent = new TooltipContent(api.getDom(), api, {\n        appendToBody: tooltipModel.get('appendToBody', true)\n      });\n      this._newLine = '<br/>';\n    } else {\n      tooltipContent = new TooltipRichContent(api);\n      this._newLine = '\\n';\n    }\n\n    this._tooltipContent = tooltipContent;\n  },\n  render: function (tooltipModel, ecModel, api) {\n    if (env.node) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    /**\n     * @private\n     * @type {module:echarts/component/tooltip/TooltipModel}\n     */\n\n    this._tooltipModel = tooltipModel;\n    /**\n     * @private\n     * @type {module:echarts/model/Global}\n     */\n\n    this._ecModel = ecModel;\n    /**\n     * @private\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this._api = api;\n    /**\n     * Should be cleaned when render.\n     * @private\n     * @type {Array.<Array.<Object>>}\n     */\n\n    this._lastDataByCoordSys = null;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update();\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow();\n  },\n  _initGlobalListener: function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  },\n  _keepShow: function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api; // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && tooltipModel.get('triggerOn') !== 'none') {\n      var self = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self._lastX,\n          y: self._lastY\n        });\n      });\n    }\n  },\n\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  manuallyShowTip: function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n\n    if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.position = [payload.x, payload.y];\n      el.update();\n      el.tooltip = payload.tooltip; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: payload.dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          position: payload.position,\n          target: pointInfo.el\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  },\n  manuallyHideTip: function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  },\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  _manuallyAxisShowTip: function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model, tooltipModel]);\n\n    if (tooltipModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  },\n  _tryShow: function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } // Always show item tooltip if mouse is on the element with dataIndex\n    else if (el && el.dataIndex != null) {\n        this._lastDataByCoordSys = null;\n\n        this._showSeriesItemTooltip(e, el, dispatchAction);\n      } // Tooltip provided directly. Like legend.\n      else if (el && el.tooltip) {\n          this._lastDataByCoordSys = null;\n\n          this._showComponentItemTooltip(e, el, dispatchAction);\n        } else {\n          this._lastDataByCoordSys = null;\n\n          this._hide(dispatchAction);\n        }\n  },\n  _showOrMove: function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easyer to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = zrUtil.bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  },\n  _showAxisTooltip: function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleDefaultHTML = [];\n    var singleParamsList = [];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption, globalTooltipModel]);\n    var renderMode = this._renderMode;\n    var newLine = this._newLine;\n    var markers = {};\n    each(dataByCoordSys, function (itemCoordSys) {\n      // var coordParamList = [];\n      // var coordDefaultHTML = [];\n      // var coordTooltipModel = buildTooltipModel([\n      //     e.tooltipOption,\n      //     itemCoordSys.tooltipOption,\n      //     ecModel.getComponent(itemCoordSys.coordSysMainType, itemCoordSys.coordSysIndex),\n      //     globalTooltipModel\n      // ]);\n      // var displayMode = coordTooltipModel.get('displayMode');\n      // var paramsList = displayMode === 'single' ? singleParamsList : [];\n      each(itemCoordSys.dataByAxis, function (item) {\n        var axisModel = ecModel.getComponent(item.axisDim + 'Axis', item.axisIndex);\n        var axisValue = item.value;\n        var seriesDefaultHTML = [];\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var valueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, item.seriesDataIndices, item.valueLabelOpt);\n        zrUtil.each(item.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var dataParams = series && series.getDataParams(dataIndex);\n          dataParams.axisDim = item.axisDim;\n          dataParams.axisIndex = item.axisIndex;\n          dataParams.axisType = item.axisType;\n          dataParams.axisId = item.axisId;\n          dataParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, axisValue);\n          dataParams.axisValueLabel = valueLabel;\n\n          if (dataParams) {\n            singleParamsList.push(dataParams);\n            var seriesTooltip = series.formatTooltip(dataIndex, true, null, renderMode);\n            var html;\n\n            if (zrUtil.isObject(seriesTooltip)) {\n              html = seriesTooltip.html;\n              var newMarkers = seriesTooltip.markers;\n              zrUtil.merge(markers, newMarkers);\n            } else {\n              html = seriesTooltip;\n            }\n\n            seriesDefaultHTML.push(html);\n          }\n        }); // Default tooltip content\n        // FIXME\n        // (1) shold be the first data which has name?\n        // (2) themeRiver, firstDataIndex is array, and first line is unnecessary.\n\n        var firstLine = valueLabel;\n\n        if (renderMode !== 'html') {\n          singleDefaultHTML.push(seriesDefaultHTML.join(newLine));\n        } else {\n          singleDefaultHTML.push((firstLine ? formatUtil.encodeHTML(firstLine) + newLine : '') + seriesDefaultHTML.join(newLine));\n        }\n      });\n    }, this); // In most case, the second axis is shown upper than the first one.\n\n    singleDefaultHTML.reverse();\n    singleDefaultHTML = singleDefaultHTML.join(this._newLine + this._newLine);\n    var positionExpr = e.position;\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, singleParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, singleDefaultHTML, singleParamsList, Math.random(), point[0], point[1], positionExpr, undefined, markers);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  },\n  _showSeriesItemTooltip: function (e, el, dispatchAction) {\n    var ecModel = this._ecModel; // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = el.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = el.dataModel || seriesModel;\n    var dataIndex = el.dataIndex;\n    var dataType = el.dataType;\n    var data = dataModel.getData(dataType);\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model, this._tooltipModel]);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var seriesTooltip = dataModel.formatTooltip(dataIndex, false, dataType, this._renderMode);\n    var defaultHtml;\n    var markers;\n\n    if (zrUtil.isObject(seriesTooltip)) {\n      defaultHtml = seriesTooltip.html;\n      markers = seriesTooltip.markers;\n    } else {\n      defaultHtml = seriesTooltip;\n      markers = null;\n    }\n\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, defaultHtml, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markers);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  },\n  _showComponentItemTooltip: function (e, el, dispatchAction) {\n    var tooltipOpt = el.tooltip;\n\n    if (typeof tooltipOpt === 'string') {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var subTooltipModel = new Model(tooltipOpt, this._tooltipModel, this._ecModel);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on cooridinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      this._showTooltipContent(subTooltipModel, defaultHtml, subTooltipModel.get('formatterParams') || {}, asyncTicket, e.offsetX, e.offsetY, e.position, el);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  },\n  _showTooltipContent: function (tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markers) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    if (formatter && typeof formatter === 'string') {\n      html = formatUtil.formatTpl(formatter, params, true);\n    } else if (typeof formatter === 'function') {\n      var callback = bind(function (cbTicket, html) {\n        if (cbTicket === this._ticket) {\n          tooltipContent.setContent(html, markers, tooltipModel);\n\n          this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n        }\n      }, this);\n      this._ticket = asyncTicket;\n      html = formatter(params, asyncTicket, callback);\n    }\n\n    tooltipContent.setContent(html, markers, tooltipModel);\n    tooltipContent.show(tooltipModel);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  },\n\n  /**\n   * @param  {string|Function|Array.<number>|Object} positionExpr\n   * @param  {number} x Mouse x\n   * @param  {number} y Mouse y\n   * @param  {boolean} confine Whether confine tooltip content in view rect.\n   * @param  {Object|<Array.<Object>} params\n   * @param  {module:zrender/Element} el target element\n   * @param  {module:echarts/ExtensionAPI} api\n   * @return {Array.<number>}\n   */\n  _updatePosition: function (tooltipModel, positionExpr, x, y, content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (typeof positionExpr === 'function') {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (zrUtil.isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (zrUtil.isObject(positionExpr)) {\n      positionExpr.width = contentSize[0];\n      positionExpr.height = contentSize[1];\n      var layoutRect = layoutUtil.getLayoutRect(positionExpr, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (typeof positionExpr === 'string' && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize);\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (tooltipModel.get('confine')) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  },\n  // FIXME\n  // Should we remove this but leave this to user?\n  _updateContentNotChangedOnAxis: function (dataByCoordSys) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || {};\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged &= lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged &= lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged &= lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    return !!contentNotChanged;\n  },\n  _hide: function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  },\n  dispose: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    this._tooltipContent.dispose();\n\n    globalListener.unregister('itemTooltip', api);\n  }\n});\n/**\n * @param {Array.<Object|module:echarts/model/Model>} modelCascade\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade) {\n  var resultModel = modelCascade.pop();\n\n  while (modelCascade.length) {\n    var tooltipOpt = modelCascade.pop();\n\n    if (tooltipOpt) {\n      if (Model.isInstance(tooltipOpt)) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (typeof tooltipOpt === 'string') {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      resultModel = new Model(tooltipOpt, resultModel, resultModel.ecModel);\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n\n  if (gapH != null) {\n    if (x + width + gapH > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var gap = 5;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - gap;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + gap;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var selectedMap = {};\n  var isToggleSelect = methodName === 'toggleSelected';\n  var isSelected; // Update all legend components\n\n  ecModel.eachComponent('legend', function (legendModel) {\n    if (isToggleSelect && isSelected != null) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n    } else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n      isSelected = legendModel.isSelected(payload.name);\n    }\n\n    var legendData = legendModel.getData();\n    zrUtil.each(legendData, function (model) {\n      var name = model.get('name'); // Wrap element\n\n      if (name === '\\n' || name === '') {\n        return;\n      }\n\n      var isItemSelected = legendModel.isSelected(name);\n\n      if (selectedMap.hasOwnProperty(name)) {\n        // Unselected if any legend is unselected\n        selectedMap[name] = selectedMap[name] && isItemSelected;\n      } else {\n        selectedMap[name] = isItemSelected;\n      }\n    });\n  }); // Return the event explicitly\n\n  return methodName === 'allSelect' || methodName === 'inverseSelect' ? {\n    selected: selectedMap\n  } : {\n    name: payload.name,\n    selected: selectedMap\n  };\n}\n/**\n * @event legendToggleSelect\n * @type {Object}\n * @property {string} type 'legendToggleSelect'\n * @property {string} [from]\n * @property {string} name Series name or data item name\n */\n\n\necharts.registerAction('legendToggleSelect', 'legendselectchanged', zrUtil.curry(legendSelectActionHandler, 'toggleSelected'));\necharts.registerAction('legendAllSelect', 'legendselectall', zrUtil.curry(legendSelectActionHandler, 'allSelect'));\necharts.registerAction('legendInverseSelect', 'legendinverseselect', zrUtil.curry(legendSelectActionHandler, 'inverseSelect'));\n/**\n * @event legendSelect\n * @type {Object}\n * @property {string} type 'legendSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendSelect', 'legendselected', zrUtil.curry(legendSelectActionHandler, 'select'));\n/**\n * @event legendUnSelect\n * @type {Object}\n * @property {string} type 'legendUnSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendUnSelect', 'legendunselected', zrUtil.curry(legendSelectActionHandler, 'unSelect'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerModel = echarts.extendComponentModel({\n  type: 'axisPointer',\n  coordSysAxesInfo: null,\n  defaultOption: {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: null,\n    // set default in AxisPonterView.js\n    zlevel: 0,\n    z: 50,\n    type: 'line',\n    // 'line' 'shadow' 'cross' 'none'.\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    // Init value depends on whether handle is used.\n    // [group0, group1, ...]\n    // Each group can be: {\n    //      mapper: function () {},\n    //      singleTooltip: 'multiple',  // 'multiple' or 'single'\n    //      xAxisId: ...,\n    //      yAxisName: ...,\n    //      angleAxisIndex: ...\n    // }\n    // mapper: can be ignored.\n    //      input: {axisInfo, value}\n    //      output: {axisInfo, value}\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      type: 'solid'\n    },\n    shadowStyle: {\n      color: 'rgba(150,150,150,0.3)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      // string | Function\n      precision: 'auto',\n      // Or a number like 0, 1, 2 ...\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      // default: axis line color\n      borderColor: null,\n      borderWidth: 0,\n      shadowBlur: 3,\n      shadowColor: '#aaa' // Considering applicability, common style should\n      // better not have shadowOffset.\n      // shadowOffsetX: 0,\n      // shadowOffsetY: 2\n\n    },\n    handle: {\n      show: false,\n\n      /* eslint-disable */\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      // jshint ignore:line\n\n      /* eslint-enable */\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  }\n});\nvar _default = AxisPointerModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BaseAxisPointer = require(\"./BaseAxisPointer\");\n\nvar viewHelper = require(\"./viewHelper\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\nvar AxisView = require(\"../axis/AxisView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar CartesianAxisPointer = BaseAxisPointer.extend({\n  /**\n   * @override\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  },\n\n  /**\n   * @override\n   */\n  getHandleTransform: function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    });\n    layoutInfo.labelMargin = axisPointerModel.get('handle.margin');\n    return {\n      position: viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo),\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  },\n\n  /**\n   * @override\n   */\n  updateHandleTransform: function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = transform.position;\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      position: currPosition,\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  }\n});\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nAxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\nvar _default = CartesianAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n\n  if (axis.scale.isBlank()) {\n    return;\n  }\n\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true\n  });\n\n  if (!ticksCoords.length) {\n    return;\n  } // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n\n\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = axisView.__splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x;\n    var y;\n    var width;\n    var height;\n\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n\n  axisView.__splitAreaColors = newSplitAreaColors;\n}\n\nfunction rectCoordAxisHandleRemove(axisView) {\n  axisView.__splitAreaColors = null;\n}\n\nexports.rectCoordAxisBuildSplitArea = rectCoordAxisBuildSplitArea;\nexports.rectCoordAxisHandleRemove = rectCoordAxisHandleRemove;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _listComponent = require(\"../helper/listComponent\");\n\nvar makeBackground = _listComponent.makeBackground;\n\nvar layoutUtil = require(\"../../util/layout\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar _default = echarts.extendComponentView({\n  type: 'legend.plain',\n  newlineDisabled: false,\n\n  /**\n   * @override\n   */\n  init: function () {\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n    this.group.add(this._contentGroup = new Group());\n    /**\n     * @private\n     * @type {module:zrender/Element}\n     */\n\n    this._backgroundEl;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this.group.add(this._selectorGroup = new Group());\n    /**\n     * If first rendering, `contentGroup.position` is [0, 0], which\n     * does not make sense and may cause unexepcted animation if adopted.\n     * @private\n     * @type {boolean}\n     */\n\n    this._isFirstRender = true;\n  },\n\n  /**\n   * @protected\n   */\n  getContentGroup: function () {\n    return this._contentGroup;\n  },\n\n  /**\n   * @protected\n   */\n  getSelectorGroup: function () {\n    return this._selectorGroup;\n  },\n\n  /**\n   * @override\n   */\n  render: function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    }\n\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.attr('position', [layoutRect.x - mainRect.x, layoutRect.y - mainRect.y]); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  },\n\n  /**\n   * @protected\n   */\n  resetInner: function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  },\n\n  /**\n   * @protected\n   */\n  renderInner: function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (itemModel, dataIndex) {\n      var name = itemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        contentGroup.add(new Group({\n          newline: true\n        }));\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Legend to control series.\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var color = data.getVisual('color');\n        var borderColor = data.getVisual('borderColor'); // If color is a callback function\n\n        if (typeof color === 'function') {\n          // Use the first data\n          color = color(seriesModel.getDataParams(0));\n        } // If borderColor is a callback function\n\n\n        if (typeof borderColor === 'function') {\n          // Use the first data\n          borderColor = borderColor(seriesModel.getDataParams(0));\n        } // Using rect symbol defaultly\n\n\n        var legendSymbolType = data.getVisual('legendSymbol') || 'roundRect';\n        var symbolType = data.getVisual('symbol');\n\n        var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n\n            if (!provider.containName(name)) {\n              return;\n            }\n\n            var idx = provider.indexOfName(name);\n            var color = provider.getItemVisual(idx, 'color');\n            var borderColor = provider.getItemVisual(idx, 'borderColor');\n            var legendSymbolType = 'roundRect';\n\n            var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, null, itemAlign, color, borderColor, selectMode); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n    }, this);\n\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  },\n  _createSelector: function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function (selectorItem) {\n      createSelectorButton(selectorItem);\n    });\n\n    function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel('emphasis.selectorLabel');\n      graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, emphasisLabelModel, {\n        defaultText: selectorItem.title,\n        isRectText: false\n      });\n      graphic.setHoverStyle(labelText);\n    }\n  },\n  _createItem: function (name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode) {\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var inactiveColor = legendModel.get('inactiveColor');\n    var inactiveBorderColor = legendModel.get('inactiveBorderColor');\n    var symbolKeepAspect = legendModel.get('symbolKeepAspect');\n    var legendModelItemStyle = legendModel.getModel('itemStyle');\n    var isSelected = legendModel.isSelected(name);\n    var itemGroup = new Group();\n    var textStyleModel = itemModel.getModel('textStyle');\n    var itemIcon = itemModel.get('icon');\n    var tooltipModel = itemModel.getModel('tooltip');\n    var legendGlobalTooltipModel = tooltipModel.parentModel; // Use user given icon first\n\n    legendSymbolType = itemIcon || legendSymbolType;\n    var legendSymbol = createSymbol(legendSymbolType, 0, 0, itemWidth, itemHeight, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n    symbolKeepAspect == null ? true : symbolKeepAspect);\n    itemGroup.add(setSymbolStyle(legendSymbol, legendSymbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected)); // Compose symbols\n    // PENDING\n\n    if (!itemIcon && symbolType // At least show one symbol, can't be all none\n    && (symbolType !== legendSymbolType || symbolType === 'none')) {\n      var size = itemHeight * 0.8;\n\n      if (symbolType === 'none') {\n        symbolType = 'circle';\n      }\n\n      var legendSymbolCenter = createSymbol(symbolType, (itemWidth - size) / 2, (itemHeight - size) / 2, size, size, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n      symbolKeepAspect == null ? true : symbolKeepAspect); // Put symbol in the center\n\n      itemGroup.add(setSymbolStyle(legendSymbolCenter, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (typeof formatter === 'string' && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (typeof formatter === 'function') {\n      content = formatter(name);\n    }\n\n    itemGroup.add(new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        textFill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        textAlign: textAlign,\n        textVerticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true,\n      tooltip: tooltipModel.get('show') ? zrUtil.extend({\n        content: name,\n        // Defaul formatter\n        formatter: legendGlobalTooltipModel.get('formatter', true) || function () {\n          return name;\n        },\n        formatterParams: {\n          componentType: 'legend',\n          legendIndex: legendModel.componentIndex,\n          name: name,\n          $vars: ['name']\n        }\n      }, tooltipModel.option) : null\n    });\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    graphic.setHoverStyle(itemGroup);\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  },\n\n  /**\n   * @protected\n   */\n  layoutInner: function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      } //Always align selector to content as 'middle'\n\n\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.attr('position', selectorPos);\n      contentGroup.attr('position', contentPos);\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.attr('position', contentPos);\n      return this.group.getBoundingRect();\n    }\n  },\n\n  /**\n   * @protected\n   */\n  remove: function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  }\n});\n\nfunction setSymbolStyle(symbol, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected) {\n  var itemStyle;\n\n  if (symbolType !== 'line' && symbolType.indexOf('empty') < 0) {\n    itemStyle = legendModelItemStyle.getItemStyle();\n    symbol.style.stroke = borderColor;\n\n    if (!isSelected) {\n      itemStyle.stroke = inactiveBorderColor;\n    }\n  } else {\n    itemStyle = legendModelItemStyle.getItemStyle(['borderWidth', 'borderColor']);\n  }\n\n  return symbol.setStyle(itemStyle);\n}\n\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  }); // highlight after select\n\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar axisPointerModelHelper = require(\"../axisPointer/modelHelper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Base class of AxisView.\n */\nvar AxisView = echarts.extendComponentView({\n  type: 'axis',\n\n  /**\n   * @private\n   */\n  _axisPointer: null,\n\n  /**\n   * @protected\n   * @type {string}\n   */\n  axisPointerClass: null,\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    AxisView.superApply(this, 'render', arguments);\n    updateAxisPointer(this, axisModel, ecModel, api, payload, true);\n  },\n\n  /**\n   * Action handler.\n   * @public\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/model/Global} ecModel\n   * @param {module:echarts/ExtensionAPI} api\n   * @param {Object} payload\n   */\n  updateAxisPointer: function (axisModel, ecModel, api, payload, force) {\n    updateAxisPointer(this, axisModel, ecModel, api, payload, false);\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n    AxisView.superApply(this, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    disposeAxisPointer(this, api);\n    AxisView.superApply(this, 'dispose', arguments);\n  }\n});\n\nfunction updateAxisPointer(axisView, axisModel, ecModel, api, payload, forceRender) {\n  var Clazz = AxisView.getAxisPointerClass(axisView.axisPointerClass);\n\n  if (!Clazz) {\n    return;\n  }\n\n  var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n  axisPointerModel ? (axisView._axisPointer || (axisView._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : disposeAxisPointer(axisView, api);\n}\n\nfunction disposeAxisPointer(axisView, ecModel, api) {\n  var axisPointer = axisView._axisPointer;\n  axisPointer && axisPointer.dispose(ecModel, api);\n  axisView._axisPointer = null;\n}\n\nvar axisPointerClazz = [];\n\nAxisView.registerAxisPointerClass = function (type, clazz) {\n  axisPointerClazz[type] = clazz;\n};\n\nAxisView.getAxisPointerClass = function (type) {\n  return type && axisPointerClazz[type];\n};\n\nvar _default = AxisView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\nvar layoutBox = _layout.box;\nvar positionElement = _layout.positionElement;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\nfunction layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\n\nfunction makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  var rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}\n\nexports.layout = layout;\nexports.makeBackground = makeBackground;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import Group from 'zrender/src/container/Group';\n\n/**\n * @alias module:echarts/component/tooltip/TooltipRichContent\n * @constructor\n */\nfunction TooltipRichContent(api) {\n  this._zr = api.getZr();\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout;\n}\n\nTooltipRichContent.prototype = {\n  constructor: TooltipRichContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {// noop\n  },\n  show: function (tooltipModel) {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.attr('show', true);\n    this._show = true;\n  },\n\n  /**\n   * Set tooltip content\n   *\n   * @param {string} content rich text string of content\n   * @param {Object} markerRich rich text style\n   * @param {Object} tooltipModel tooltip model\n   */\n  setContent: function (content, markerRich, tooltipModel) {\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var markers = {};\n    var text = content;\n    var prefix = '{marker';\n    var suffix = '|}';\n    var startId = text.indexOf(prefix);\n\n    while (startId >= 0) {\n      var endId = text.indexOf(suffix);\n      var name = text.substr(startId + prefix.length, endId - startId - prefix.length);\n\n      if (name.indexOf('sub') > -1) {\n        markers['marker' + name] = {\n          textWidth: 4,\n          textHeight: 4,\n          textBorderRadius: 2,\n          textBackgroundColor: markerRich[name],\n          // TODO: textOffset is not implemented for rich text\n          textOffset: [3, 0]\n        };\n      } else {\n        markers['marker' + name] = {\n          textWidth: 10,\n          textHeight: 10,\n          textBorderRadius: 5,\n          textBackgroundColor: markerRich[name]\n        };\n      }\n\n      text = text.substr(endId + 1);\n      startId = text.indexOf('{marker');\n    }\n\n    this.el = new Text({\n      style: {\n        rich: markers,\n        text: content,\n        textLineHeight: 20,\n        textBackgroundColor: tooltipModel.get('backgroundColor'),\n        textBorderRadius: tooltipModel.get('borderRadius'),\n        textFill: tooltipModel.get('textStyle.color'),\n        textPadding: tooltipModel.get('padding')\n      },\n      z: tooltipModel.get('z')\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var bounding = this.el.getBoundingRect();\n    return [bounding.width, bounding.height];\n  },\n  moveTo: function (x, y) {\n    if (this.el) {\n      this.el.attr('position', [x, y]);\n    }\n  },\n  hide: function () {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  getOuterSize: function () {\n    var size = this.getSize();\n    return {\n      width: size[0],\n      height: size[1]\n    };\n  }\n};\nvar _default = TooltipRichContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _model = require(\"../../util/model\");\n\nvar isNameSpecified = _model.isNameSpecified;\n\nvar lang = require(\"../../lang\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar langSelector = lang.legend.selector;\nvar defaultSelectorOption = {\n  all: {\n    type: 'all',\n    title: zrUtil.clone(langSelector.all)\n  },\n  inverse: {\n    type: 'inverse',\n    title: zrUtil.clone(langSelector.inverse)\n  }\n};\nvar LegendModel = echarts.extendComponentModel({\n  type: 'legend.plain',\n  dependencies: ['series'],\n  layoutMode: {\n    type: 'box',\n    // legend.width/height are maxWidth/maxHeight actually,\n    // whereas realy width/height is calculated by its content.\n    // (Setting {left: 10, right: 10} does not make sense).\n    // So consider the case:\n    // `setOption({legend: {left: 10});`\n    // then `setOption({legend: {right: 10});`\n    // The previous `left` should be cleared by setting `ignoreSize`.\n    ignoreSize: true\n  },\n  init: function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n\n    this._updateSelector(option);\n  },\n  mergeOption: function (option) {\n    LegendModel.superCall(this, 'mergeOption', option);\n\n    this._updateSelector(option);\n  },\n  _updateSelector: function (option) {\n    var selector = option.selector;\n\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, defaultSelectorOption[item.type]);\n      });\n    }\n  },\n  optionUpdated: function () {\n    this._updateData(this.ecModel);\n\n    var legendData = this._data; // If selectedMode is single, try to select one\n\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false; // If has any selected in option.selected\n\n      for (var i = 0; i < legendData.length; i++) {\n        var name = legendData[i].get('name');\n\n        if (this.isSelected(name)) {\n          // Force to unselect others\n          this.select(name);\n          hasSelected = true;\n          break;\n        }\n      } // Try select the first if selectedMode is single\n\n\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  },\n  _updateData: function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n\n    this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n    // which is convinient for user preparing option.\n\n    var rawData = this.get('data') || potentialData;\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (typeof dataItem === 'string' || typeof dataItem === 'number') {\n        dataItem = {\n          name: dataItem\n        };\n      }\n\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n\n    this._data = legendData;\n  },\n\n  /**\n   * @return {Array.<module:echarts/model/Model>}\n   */\n  getData: function () {\n    return this._data;\n  },\n\n  /**\n   * @param {string} name\n   */\n  select: function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n\n    selected[name] = true;\n  },\n\n  /**\n   * @param {string} name\n   */\n  unSelect: function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  },\n\n  /**\n   * @param {string} name\n   */\n  toggleSelected: function (name) {\n    var selected = this.option.selected; // Default is true\n\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  },\n  allSelect: function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  },\n  inverseSelect: function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true); // Initially, default value is true\n\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n\n      selected[name] = !selected[name];\n    });\n  },\n\n  /**\n   * @param {string} name\n   */\n  isSelected: function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  },\n  getOrient: function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  },\n  defaultOption: {\n    // \n    zlevel: 0,\n    // \n    z: 4,\n    show: true,\n    // \n    // 'horizontal' | 'vertical'\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    // \n    // 'auto' | 'left' | 'right'\n    //  'auto',  x \n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    // \n    borderColor: '#ccc',\n    borderRadius: 0,\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // itempx10\n    // \n    itemGap: 10,\n    // the width of legend symbol\n    itemWidth: 25,\n    // the height of legend symbol\n    itemHeight: 14,\n    // the color of unselected legend symbol\n    inactiveColor: '#ccc',\n    // the borderColor of unselected legend symbol\n    inactiveBorderColor: '#ccc',\n    itemStyle: {\n      // the default borderWidth of legend symbol\n      borderWidth: 0\n    },\n    textStyle: {\n      // \n      color: '#333'\n    },\n    // formatter: '',\n    // \n    selectedMode: true,\n    // LEGEND.SELECTED\n    // selected: null,\n    // legend.dataitem\n    // data: [],\n    // Usage:\n    // selector: [{type: 'all or inverse', title: xxx}]\n    // or\n    // selector: true\n    // or\n    // selector: ['all', 'inverse']\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: ' sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    // Value can be 'start' or 'end'\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    // Tooltip \n    tooltip: {\n      show: false\n    }\n  }\n});\nvar _default = LegendModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendComponentModel({\n  type: 'tooltip',\n  dependencies: ['axisPointer'],\n  defaultOption: {\n    zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    // 'single' | 'multipleByCoordSys'\n    renderMode: 'auto',\n    // 'auto' | 'html' | 'richText'\n    // 'auto': use html by default, and use non-html if `document` is not defined\n    // 'html': use html for tooltip\n    // 'richText': use canvas, svg, and etc. for tooltip\n    //  {Array} | {Function}\n    // position: null\n    // Consider triggered from axisPointer handle, verticalAlign should be 'middle'\n    // align: null,\n    // verticalAlign: null,\n    //  content  viewRect  false \n    confine: false,\n    // {string}Template  {Function}\n    // formatter: null\n    showDelay: 0,\n    // ms\n    hideDelay: 100,\n    // s\n    transitionDuration: 0.4,\n    enterable: false,\n    // 0.7\n    backgroundColor: 'rgba(50,50,50,0.7)',\n    // \n    borderColor: '#333',\n    // px4\n    borderRadius: 4,\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // Extra css text\n    extraCssText: '',\n    // \n    axisPointer: {\n      // \n      // 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // type  line  tooltip line \n      //  'x' | 'y' | 'angle' | 'radius' | 'auto'\n      //  'auto' category  x \n      //  angle \n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {} // lineStyle and shadowStyle should not be specified here,\n        // otherwise it will always override those styles on option.axisPointer.\n\n      }\n    },\n    textStyle: {\n      color: '#fff',\n      fontSize: 14\n    }\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"../coord/cartesian/AxisModel\");\n\nrequire(\"./axis/CartesianAxisView\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisPointerModelHelper = require(\"./axisPointer/modelHelper\");\n\nvar axisTrigger = require(\"./axisPointer/axisTrigger\");\n\nrequire(\"./axisPointer/AxisPointerModel\");\n\nrequire(\"./axisPointer/AxisPointerView\");\n\nrequire(\"./axisPointer/CartesianAxisPointer\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// CartesianAxisPointer is not supposed to be required here. But consider\n// echarts.simple.js and online build tooltip, which only require gridSimple,\n// CartesianAxisPointer should be able to required somewhere.\necharts.registerPreprocessor(function (option) {\n  // Always has a global axisPointerModel for default setting.\n  if (option) {\n    (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n    var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n    // is not set, remain null/undefined, otherwise it will\n    // override existent link setting.\n\n    if (link && !zrUtil.isArray(link)) {\n      option.axisPointer.link = [link];\n    }\n  }\n}); // This process should proformed after coordinate systems created\n// and series data processed. So put it on statistic processing stage.\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n  // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n  // allAxesInfo should be updated when setOption performed.\n  ecModel.getComponent('axisPointer').coordSysAxesInfo = axisPointerModelHelper.collect(ecModel, api);\n}); // Broadcast to all views.\n\necharts.registerAction({\n  type: 'updateAxisPointer',\n  event: 'updateAxisPointer',\n  update: ':updateAxisPointer'\n}, axisTrigger);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\n\nfunction collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\n\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = []; // Collect axes info.\n\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n    // for user. So we enable seting tooltip on coordSys model.\n\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n    if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get('axisPointer.type') === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get('axisPointer.axis'));\n\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    } // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n\n\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var key = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n      var axisInfo = result.axesInfo[key] = {\n        key: key,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: []\n      };\n      axesInfoInCoordSys[key] = axisInfo;\n      result.seriesInvolved |= involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[key] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\n\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var volatileOption = {};\n  each(['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'], function (field) {\n    volatileOption[field] = zrUtil.clone(tooltipAxisPointerModel.get(field));\n  }); // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n  // Only these properties can be overrided from tooltip to axisPointer.\n\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n\n  var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n  labelOption.show == null && (labelOption.show = false);\n\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get('label.show');\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && zrUtil.defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\n\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get('tooltip.trigger', true);\n    var seriesTooltipShow = seriesModel.get('tooltip.show', true);\n\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get('axisPointer.show', true) === false) {\n      return;\n    }\n\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  }, this);\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\n\n\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\n\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || zrUtil.isArray(linkPropValue) && zrUtil.indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\n\nfunction fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n\n  if (!axisInfo) {\n    return;\n  }\n\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n  if (value != null) {\n    value = scale.parse(value);\n  }\n\n  var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n\n  if ( // Pick a value on axis when initializing.\n  value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n\n  option.value = value;\n\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\n\nfunction getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\n\nfunction getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\n\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get('handle.show');\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\n\n\nfunction makeKey(model) {\n  return model.type + '||' + model.id;\n}\n\nexports.collect = collect;\nexports.fixValue = fixValue;\nexports.getAxisInfo = getAxisInfo;\nexports.getAxisPointerModel = getAxisPointerModel;\nexports.makeKey = makeKey;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./legend/LegendModel\");\n\nrequire(\"./legend/legendAction\");\n\nrequire(\"./legend/LegendView\");\n\nvar legendFilter = require(\"./legend/legendFilter\");\n\nvar Component = require(\"../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Do not contain scrollable legend, for sake of file size.\n// Series Filter\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\nComponent.registerSubTypeDefaulter('legend', function () {\n  // Default 'plain' when no type specified.\n  return 'plain';\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar globalListener = require(\"./globalListener\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerView = echarts.extendComponentView({\n  type: 'axisPointer',\n  render: function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    globalListener.unregister(api.getZr(), 'axisPointer');\n    AxisPointerView.superApply(this._model, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n    AxisPointerView.superApply(this._model, 'dispose', arguments);\n  }\n});\nvar _default = AxisPointerView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar clazzUtil = require(\"../../util/clazz\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar axisPointerModelHelper = require(\"./modelHelper\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar throttleUtil = require(\"../../util/throttle\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n * Implemenents {module:echarts/component/axis/IAxisPointer}.\n */\n\nfunction BaseAxisPointer() {}\n\nBaseAxisPointer.prototype = {\n  /**\n   * @private\n   */\n  _group: null,\n\n  /**\n   * @private\n   */\n  _lastGraphicKey: null,\n\n  /**\n   * @private\n   */\n  _handle: null,\n\n  /**\n   * @private\n   */\n  _dragging: false,\n\n  /**\n   * @private\n   */\n  _lastValue: null,\n\n  /**\n   * @private\n   */\n  _lastStatus: null,\n\n  /**\n   * @private\n   */\n  _payloadInfo: null,\n\n  /**\n   * In px, arbitrary value. Do not set too small,\n   * no animation is ok for most cases.\n   * @protected\n   */\n  animationThreshold: 15,\n\n  /**\n   * @implement\n   */\n  render: function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps, axisPointerModel);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  },\n\n  /**\n   * @implement\n   */\n  remove: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @implement\n   */\n  dispose: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @protected\n   */\n  determineAnimation: function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  },\n\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  },\n\n  /**\n   * @protected\n   */\n  createPointerEl: function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  createLabelEl: function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Rect(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updatePointerEl: function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updateLabelEl: function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        shape: elOption.label.shape,\n        position: elOption.label.position\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderHandle: function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    var includeStyles = ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n    handle.setStyle(handleModel.getItemStyle(null, includeStyles)); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.attr('scale', [handleSize[0] / 2, handleSize[1] / 2]);\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  },\n\n  /**\n   * @private\n   */\n  _moveHandleToValue: function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragMove: function (dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  },\n\n  /**\n   * Throttled method.\n   * @private\n   */\n  _doDispatchAxisPointer: function () {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragEnd: function (moveAnimation) {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  },\n\n  /**\n   * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {number} value\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0}\n   */\n  getHandleTransform: null,\n\n  /**\n   * * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {Object} transform {position, rotation}\n   * @param {Array.<number>} delta [dx, dy]\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0, cursorPoint: [x, y]}\n   */\n  updateHandleTransform: null,\n\n  /**\n   * @private\n   */\n  clear: function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n  },\n\n  /**\n   * @protected\n   */\n  doClear: function () {// Implemented by sub-class if necessary.\n  },\n\n  /**\n   * @protected\n   * @param {Array.<number>} xy\n   * @param {Array.<number>} wh\n   * @param {number} [xDimIndex=0] or 1\n   */\n  buildLabel: function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  }\n};\nBaseAxisPointer.prototype.constructor = BaseAxisPointer;\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals = equals && propsEqual(lastProps[key], item);\n    });\n    return !!equals;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get('label.show') ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    position: trans.position.slice(),\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nclazzUtil.enableClassExtend(BaseAxisPointer);\nvar _default = BaseAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar modelHelper = require(\"./modelHelper\");\n\nvar findPointFromSeries = require(\"./findPointFromSeries\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry;\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @param {Object} coordSysAxesInfo\n * @param {Object} payload\n * @param {string} [payload.currTrigger] 'click' | 'mousemove' | 'leave'\n * @param {Array.<number>} [payload.x] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Array.<number>} [payload.y] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Object} [payload.seriesIndex] finder, optional, restrict target axes.\n * @param {Object} [payload.dataIndex] finder, restrict target axes.\n * @param {Object} [payload.axesInfo] finder, restrict target axes.\n *        [{\n *          axisDim: 'x'|'y'|'angle'|...,\n *          axisIndex: ...,\n *          value: ...\n *        }, ...]\n * @param {Function} [payload.dispatchAction]\n * @param {Object} [payload.tooltipOption]\n * @param {Object|Array.<number>|Function} [payload.position] Tooltip position,\n *        which can be specified in dispatchAction\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n * @return {Object} content of event obj for echarts.connect.\n */\n\nfunction _default(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputFinder = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputFinder);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputFinder);\n  });\n  updateModelActually(showValueMap, axesInfo, outputFinder);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputFinder;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, dontSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By defualt use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    zrUtil.extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!dontSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch, outputFinder); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimension(dim, true);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get('label.precision'),\n      formatter: axisPointerModel.get('label.formatter')\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputFinder) {\n  var outputAxesInfo = outputFinder.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n        // If hide, value still need to be set, consider\n        // click legend to toggle axis blank.\n        !axisInfo.useHandle && (option.status = 'hide');\n      } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  zrUtil.each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  zrUtil.each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @event legendScroll\n * @type {Object}\n * @property {string} type 'legendScroll'\n * @property {string} scrollDataIndex\n */\necharts.registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\n  var scrollDataIndex = payload.scrollDataIndex;\n  scrollDataIndex != null && ecModel.eachComponent({\n    mainType: 'legend',\n    subType: 'scroll',\n    query: payload\n  }, function (legendModel) {\n    legendModel.setScrollDataIndex(scrollDataIndex);\n  });\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar LegendModel = require(\"./LegendModel\");\n\nvar _layout = require(\"../../util/layout\");\n\nvar mergeLayoutParam = _layout.mergeLayoutParam;\nvar getLayoutParams = _layout.getLayoutParams;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ScrollableLegendModel = LegendModel.extend({\n  type: 'legend.scroll',\n\n  /**\n   * @param {number} scrollDataIndex\n   */\n  setScrollDataIndex: function (scrollDataIndex) {\n    this.option.scrollDataIndex = scrollDataIndex;\n  },\n  defaultOption: {\n    scrollDataIndex: 0,\n    pageButtonItemGap: 5,\n    pageButtonGap: null,\n    pageButtonPosition: 'end',\n    // 'start' or 'end'\n    pageFormatter: '{current}/{total}',\n    // If null/undefined, do not show page.\n    pageIcons: {\n      horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\n      vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\n    },\n    pageIconColor: '#2f4554',\n    pageIconInactiveColor: '#aaa',\n    pageIconSize: 15,\n    // Can be [10, 3], which represents [width, height]\n    pageTextStyle: {\n      color: '#333'\n    },\n    animationDurationUpdate: 800\n  },\n\n  /**\n   * @override\n   */\n  init: function (option, parentModel, ecModel, extraOpt) {\n    var inputPositionParams = getLayoutParams(option);\n    ScrollableLegendModel.superCall(this, 'init', option, parentModel, ecModel, extraOpt);\n    mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function (option, extraOpt) {\n    ScrollableLegendModel.superCall(this, 'mergeOption', option, extraOpt);\n    mergeAndNormalizeLayoutParams(this, this.option, option);\n  }\n}); // Do not `ignoreSize` to enable setting {left: 10, right: 10}.\n\nfunction mergeAndNormalizeLayoutParams(legendModel, target, raw) {\n  var orient = legendModel.getOrient();\n  var ignoreSize = [1, 1];\n  ignoreSize[orient.index] = 0;\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: ignoreSize\n  });\n}\n\nvar _default = ScrollableLegendModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar AxisBuilder = require(\"./AxisBuilder\");\n\nvar AxisView = require(\"./AxisView\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\nvar _axisSplitHelper = require(\"./axisSplitHelper\");\n\nvar rectCoordAxisBuildSplitArea = _axisSplitHelper.rectCoordAxisBuildSplitArea;\nvar rectCoordAxisHandleRemove = _axisSplitHelper.rectCoordAxisHandleRemove;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\nvar CartesianAxisView = AxisView.extend({\n  type: 'cartesianAxis',\n  axisPointerClass: 'CartesianAxisPointer',\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get(name + '.show')) {\n        this['_' + name](axisModel, gridModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    CartesianAxisView.superCall(this, 'render', axisModel, ecModel, api, payload);\n  },\n  remove: function () {\n    rectCoordAxisHandleRemove(this);\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitLine: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n\n      this._axisGroup.add(new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        subPixelOptimize: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _minorSplitLine: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        this._axisGroup.add(new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          subPixelOptimize: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        }));\n      }\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitArea: function (axisModel, gridModel) {\n    rectCoordAxisBuildSplitArea(this, this._axisGroup, axisModel, gridModel);\n  }\n});\nCartesianAxisView.extend({\n  type: 'xAxis'\n});\nCartesianAxisView.extend({\n  type: 'yAxis'\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar retrieve = _util.retrieve;\nvar defaults = _util.defaults;\nvar extend = _util.extend;\nvar each = _util.each;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _number = require(\"../../util/number\");\n\nvar isRadianAroundZero = _number.isRadianAroundZero;\nvar remRadian = _number.remRadian;\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar matrixUtil = require(\"zrender/lib/core/matrix\");\n\nvar _vector = require(\"zrender/lib/core/vector\");\n\nvar v2ApplyTransform = _vector.applyTransform;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar shouldShowAllLabels = _axisHelper.shouldShowAllLabels;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI = Math.PI;\n/**\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n * for example: (0, 0) ------------> (0, 50)\n *\n * nameDirection or tickDirection or labelDirection is 1 means tick\n * or label is below the standard axis, whereas is -1 means above\n * the standard axis. labelOffset means offset between label and axis,\n * which is useful when 'onZero', where axisLabel is in the grid and\n * label in outside grid.\n *\n * Tips: like always,\n * positive rotation represents anticlockwise, and negative rotation\n * represents clockwise.\n * The direction of position coordinate is the same as the direction\n * of screen coordinate.\n *\n * Do not need to consider axis 'inverse', which is auto processed by\n * axis extent.\n *\n * @param {module:zrender/container/Group} group\n * @param {Object} axisModel\n * @param {Object} opt Standard axis parameters.\n * @param {Array.<number>} opt.position [x, y]\n * @param {number} opt.rotation by radian\n * @param {number} [opt.nameDirection=1] 1 or -1 Used when nameLocation is 'middle' or 'center'.\n * @param {number} [opt.tickDirection=1] 1 or -1\n * @param {number} [opt.labelDirection=1] 1 or -1\n * @param {number} [opt.labelOffset=0] Usefull when onZero.\n * @param {string} [opt.axisLabelShow] default get from axisModel.\n * @param {string} [opt.axisName] default get from axisModel.\n * @param {number} [opt.axisNameAvailableWidth]\n * @param {number} [opt.labelRotate] by degree, default get from axisModel.\n * @param {number} [opt.strokeContainThreshold] Default label interval when label\n * @param {number} [opt.nameTruncateMaxWidth]\n */\n\nvar AxisBuilder = function (axisModel, opt) {\n  /**\n   * @readOnly\n   */\n  this.opt = opt;\n  /**\n   * @readOnly\n   */\n\n  this.axisModel = axisModel; // Default value\n\n  defaults(opt, {\n    labelOffset: 0,\n    nameDirection: 1,\n    tickDirection: 1,\n    labelDirection: 1,\n    silent: true\n  });\n  /**\n   * @readOnly\n   */\n\n  this.group = new graphic.Group(); // FIXME Not use a seperate text group?\n\n  var dumbGroup = new graphic.Group({\n    position: opt.position.slice(),\n    rotation: opt.rotation\n  }); // this.group.add(dumbGroup);\n  // this._dumbGroup = dumbGroup;\n\n  dumbGroup.updateTransform();\n  this._transform = dumbGroup.transform;\n  this._dumbGroup = dumbGroup;\n};\n\nAxisBuilder.prototype = {\n  constructor: AxisBuilder,\n  hasBuilder: function (name) {\n    return !!builders[name];\n  },\n  add: function (name) {\n    builders[name].call(this);\n  },\n  getGroup: function () {\n    return this.group;\n  }\n};\nvar builders = {\n  /**\n   * @private\n   */\n  axisLine: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n\n    if (!axisModel.get('axisLine.show')) {\n      return;\n    }\n\n    var extent = this.axisModel.axis.getExtent();\n    var matrix = this._transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel('axisLine.lineStyle').getLineStyle());\n    this.group.add(new graphic.Line({\n      // Id for animation\n      anid: 'line',\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    }));\n    var arrows = axisModel.get('axisLine.symbol');\n    var arrowSize = axisModel.get('axisLine.symbolSize');\n    var arrowOffset = axisModel.get('axisLine.symbolOffset') || 0;\n\n    if (typeof arrowOffset === 'number') {\n      arrowOffset = [arrowOffset, arrowOffset];\n    }\n\n    if (arrows != null) {\n      if (typeof arrows === 'string') {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n\n      if (typeof arrowSize === 'string' || typeof arrowSize === 'number') {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n\n      var symbolWidth = arrowSize[0];\n      var symbolHeight = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth / 2, -symbolHeight / 2, symbolWidth, symbolHeight, lineStyle.stroke, true); // Calculate arrow position with offset\n\n          var r = point.r + point.offset;\n          var pos = [pt1[0] + r * Math.cos(opt.rotation), pt1[1] - r * Math.sin(opt.rotation)];\n          symbol.attr({\n            rotation: point.rotate,\n            position: pos,\n            silent: true,\n            z2: 11\n          });\n          this.group.add(symbol);\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @private\n   */\n  axisTickLabel: function () {\n    var axisModel = this.axisModel;\n    var opt = this.opt;\n    var ticksEls = buildAxisMajorTicks(this, axisModel, opt);\n    var labelEls = buildAxisLabel(this, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n    buildAxisMinorTicks(this, axisModel, opt);\n  },\n\n  /**\n   * @private\n   */\n  axisName: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n\n    if (!name) {\n      return;\n    }\n\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = this.axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // 'middle'\n    // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n\n    var axisNameAvailableWidth;\n\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth); // FIXME\n    // truncate rich text? (consider performance)\n\n    var truncatedText = ellipsis != null && maxWidth != null ? formatUtil.truncateText(name, maxWidth, textFont, ellipsis, {\n      minChar: 2,\n      placeholder: truncateOpt.placeholder\n    }) : name;\n    var tooltipOpt = axisModel.get('tooltip', true);\n    var mainType = axisModel.mainType;\n    var formatterParams = {\n      componentType: mainType,\n      name: name,\n      $vars: ['name']\n    };\n    formatterParams[mainType + 'Index'] = axisModel.componentIndex;\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'name',\n      __fullText: name,\n      __truncatedText: truncatedText,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: isLabelSilent(axisModel),\n      z2: 1,\n      tooltip: tooltipOpt && tooltipOpt.show ? extend({\n        content: name,\n        formatter: function () {\n          return name;\n        },\n        formatterParams: formatterParams\n      }, tooltipOpt) : null\n    });\n    graphic.setTextStyle(textEl.style, textStyleModel, {\n      text: truncatedText,\n      textFont: textFont,\n      textFill: textStyleModel.getTextColor() || axisModel.get('axisLine.lineStyle.color'),\n      textAlign: textStyleModel.get('align') || labelLayout.textAlign,\n      textVerticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n    });\n\n    if (axisModel.get('triggerEvent')) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisName';\n      textEl.eventData.name = name;\n    } // FIXME\n\n\n    this._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    this.group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\n\nvar makeAxisEventDataBase = AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n  var eventData = {\n    componentType: axisModel.mainType,\n    componentIndex: axisModel.componentIndex\n  };\n  eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n  return eventData;\n};\n/**\n * @public\n * @static\n * @param {Object} opt\n * @param {number} axisRotation in radian\n * @param {number} textRotation in radian\n * @param {number} direction\n * @return {Object} {\n *  rotation, // according to axis\n *  textAlign,\n *  textVerticalAlign\n * }\n */\n\n\nvar innerTextLayout = AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n  var rotationDiff = remRadian(textRotation - axisRotation);\n  var textAlign;\n  var textVerticalAlign;\n\n  if (isRadianAroundZero(rotationDiff)) {\n    // Label is parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI)) {\n    // Label is inverse parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff > 0 && rotationDiff < PI) {\n      textAlign = direction > 0 ? 'right' : 'left';\n    } else {\n      textAlign = direction > 0 ? 'left' : 'right';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n};\n\nfunction endTextLayout(opt, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - opt.rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nvar isLabelSilent = AxisBuilder.isLabelSilent = function (axisModel) {\n  var tooltipOpt = axisModel.get('tooltip');\n  return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n  || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n};\n\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  } // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n\n\n  var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n  var showMaxLabel = axisModel.get('axisLabel.showMaxLabel'); // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\n\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\n\nfunction isTwoLabelOverlapped(current, next, labelLayout) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n\n  if (!firstRect || !nextRect) {\n    return;\n  } // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\n\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\n\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, aniid) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    } // Tick line, Not use group transform to have better line draw\n\n\n    var tickEl = new graphic.Line({\n      // Id for animation\n      anid: aniid + '_' + ticksCoords[i].tickValue,\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      silent: true\n    });\n    tickEls.push(tickEl);\n  }\n\n  return tickEls;\n}\n\nfunction buildAxisMajorTicks(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, axisBuilder._transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get('axisLine.lineStyle.color')\n  }), 'ticks');\n\n  for (var i = 0; i < ticksEls.length; i++) {\n    axisBuilder.group.add(ticksEls[i]);\n  }\n\n  return ticksEls;\n}\n\nfunction buildAxisMinorTicks(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n\n  if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var minorTicksCoords = axis.getMinorTicksCoords();\n\n  if (!minorTicksCoords.length) {\n    return;\n  }\n\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get('axisLine.lineStyle.color')\n  }));\n\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], axisBuilder._transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      axisBuilder.group.add(minorTicksEls[k]);\n    }\n  }\n}\n\nfunction buildAxisLabel(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get('axisLabel.show'));\n\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels(); // Special label rotate.\n\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n\n    if (rawCategoryData && rawCategoryData[tickValue] && rawCategoryData[tickValue].textStyle) {\n      itemLabelModel = new Model(rawCategoryData[tickValue].textStyle, labelModel, axisModel.ecModel);\n    }\n\n    var textColor = itemLabelModel.getTextColor() || axisModel.get('axisLine.lineStyle.color');\n    var tickCoord = axis.dataToCoord(tickValue);\n    var pos = [tickCoord, opt.labelOffset + opt.labelDirection * labelMargin];\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'label_' + tickValue,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10\n    });\n    graphic.setTextStyle(textEl.style, itemLabelModel, {\n      text: formattedLabel,\n      textAlign: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n      textVerticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n      textFill: typeof textColor === 'function' ? textColor( // (1) In category axis with data zoom, tick is not the original\n      // index of axis.data. So tick should not be exposed to user\n      // in category axis.\n      // (2) Compatible with previous version, which always use formatted label as\n      // input. But in interval scale the formatted label is like '223,445', which\n      // maked user repalce ','. So we modify it to return original val but remain\n      // it as 'string' to avoid error in replacing.\n      axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n    }); // Pack data for mouse event\n\n    if (triggerEvent) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisLabel';\n      textEl.eventData.value = rawLabel;\n    } // FIXME\n\n\n    axisBuilder._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    axisBuilder.group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\n\nvar _default = AxisBuilder;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar AxisBuilder = require(\"../axis/AxisBuilder\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Model} axisPointerModel\n */\nfunction buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\n\nfunction buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get('label.precision'),\n    formatter: axisPointerModel.get('label.formatter')\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get('axisLine.lineStyle.color');\n  }\n\n  elOption.label = {\n    shape: {\n      x: 0,\n      y: 0,\n      width: width,\n      height: height,\n      r: labelModel.get('borderRadius')\n    },\n    position: position.slice(),\n    // TODO: rich\n    style: {\n      text: text,\n      textFont: font,\n      textFill: labelModel.getTextColor(),\n      textPosition: 'inside',\n      textPadding: paddings,\n      fill: bgColor,\n      stroke: labelModel.get('borderColor') || 'transparent',\n      lineWidth: labelModel.get('borderWidth') || 0,\n      shadowBlur: labelModel.get('shadowBlur'),\n      shadowColor: labelModel.get('shadowColor'),\n      shadowOffsetX: labelModel.get('shadowOffsetX'),\n      shadowOffsetY: labelModel.get('shadowOffsetY')\n    },\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n/**\n * @param {number} value\n * @param {module:echarts/coord/Axis} axis\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} opt\n * @param {Array.<Object>} seriesDataIndices\n * @param {number|string} opt.precision 'auto' or a number\n * @param {string|Function} opt.formatter label formatter\n */\n\n\nfunction getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel( // If `precision` is set, width can be fixed (like '12.00500'), which\n  // helps to debounce when when moving label.\n  value, {\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params = {\n      value: axisHelper.getAxisRawValue(axis, value),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params);\n    }\n  }\n\n  return text;\n}\n/**\n * @param {module:echarts/coord/Axis} axis\n * @param {number} value\n * @param {Object} layoutInfo {\n *  rotation, position, labelOffset, labelDirection, labelMargin\n * }\n */\n\n\nfunction getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\n\nfunction buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get('label.margin');\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\n/**\n * @param {Array.<number>} p1\n * @param {Array.<number>} p2\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\n/**\n * @param {Array.<number>} xy\n * @param {Array.<number>} wh\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\n\nfunction makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}\n\nexports.buildElStyle = buildElStyle;\nexports.buildLabelElOption = buildLabelElOption;\nexports.getValueLabel = getValueLabel;\nexports.getTransformedPosition = getTransformedPosition;\nexports.buildCartesianSingleLabelElOption = buildCartesianSingleLabelElOption;\nexports.makeLineShape = makeLineShape;\nexports.makeRectShape = makeRectShape;\nexports.makeSectorShape = makeSectorShape;"],"sourceRoot":""}